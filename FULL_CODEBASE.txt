====== COMPLETE AI CREATOR STUDIO CODEBASE ======
Generated: 11/16/2025 15:17:28
Total Files: 108


==========================================
FILE: src\app\api\analytics\summary\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';

// GET /api/analytics/summary - Get dashboard metrics
export async function GET() {
  try {
    // Get content counts
    const totalContent = await db.content.count();
    const videoContent = await db.content.count({ where: { fileType: 'video' } });
    const imageContent = await db.content.count({ where: { fileType: 'image' } });

    // Get character counts
    const totalCharacters = await db.character.count();
    const activeCharacters = await db.character.count({ where: { isActive: true } });

    // Get job queue stats
    const pendingJobs = await db.jobQueue.count({ where: { status: 'pending' } });
    const processingJobs = await db.jobQueue.count({ where: { status: 'processing' } });

    // Get today's posts
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    const tomorrow = new Date(today);
    tomorrow.setDate(tomorrow.getDate() + 1);

    const todayPosts = await db.schedule.count({
      where: {
        postTime: {
          gte: today,
          lt: tomorrow
        }
      }
    });

    // Get average performance score
    const avgPerformanceResult = await db.analytics.aggregate({
      _avg: {
        performanceScore: true
      }
    });

    const avgPerformance = avgPerformanceResult._avg.performanceScore || 0;

    // Get top performing characters
    const topCharacters = await db.character.findMany({
      take: 3,
      orderBy: {
        performanceScore: 'desc'
      },
      include: {
        _count: {
          select: {
            contents: true
          }
        }
      }
    });

    // Get recent content with analytics
    const recentContent = await db.content.findMany({
      take: 10,
      orderBy: {
        createdAt: 'desc'
      },
      include: {
        character: {
          select: {
            code: true
          }
        },
        analytics: {
          select: {
            performanceScore: true
          }
        }
      }
    });

    // Calculate weekly growth (mock data for now)
    const weeklyGrowth = 15.2;

    return NextResponse.json({
      totalContent,
      videoContent,
      imageContent,
      totalCharacters,
      activeCharacters,
      pendingJobs,
      processingJobs,
      todayPosts,
      avgPerformance: avgPerformanceResult._avg.performanceScore || 0,
      weeklyGrowth,
      topCharacters: topCharacters.map(char => ({
        code: char.code,
        performance: char.performanceScore,
        content: char._count.contents
      })),
      recentContent: recentContent.map(content => ({
        id: content.id,
        title: content.title,
        character: content.character.code,
        type: content.fileType,
        status: content.status,
        performance: content.analytics?.performanceScore || 0
      }))
    });

  } catch (error) {
    console.error('Error fetching analytics summary:', error);
    return NextResponse.json(
      { error: 'Failed to fetch analytics summary' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\api-keys\[id]\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';
import { getServerSession } from '@/lib/auth';

// PUT /api/api-keys/[id] - Update API key
export async function PUT(
  request: NextRequest,
  { params }: { params: { id: string } }
) {
  try {
    const session = await getServerSession();
    
    if (!session?.user?.id) {
      return NextResponse.json(
        { error: 'Unauthorized' },
        { status: 401 }
      );
    }

    const { label, isActive } = await request.json();

    // Check if API key belongs to user
    const existingKey = await db.apiKey.findFirst({
      where: {
        id: params.id,
        userId: session.user.id
      }
    });

    if (!existingKey) {
      return NextResponse.json(
        { error: 'API key not found' },
        { status: 404 }
      );
    }

    const updatedKey = await db.apiKey.update({
      where: { id: params.id },
      data: {
        ...(label !== undefined && { label }),
        ...(isActive !== undefined && { isActive })
      }
    });

    return NextResponse.json({
      success: true,
      apiKey: updatedKey,
      message: 'API key updated successfully'
    });

  } catch (error) {
    console.error('API key update error:', error);
    return NextResponse.json(
      { error: 'Failed to update API key' },
      { status: 500 }
    );
  }
}

// DELETE /api/api-keys/[id] - Delete API key
export async function DELETE(
  request: NextRequest,
  { params }: { params: { id: string } }
) {
  try {
    const session = await getServerSession();
    
    if (!session?.user?.id) {
      return NextResponse.json(
        { error: 'Unauthorized' },
        { status: 401 }
      );
    }

    // Check if API key belongs to user
    const existingKey = await db.apiKey.findFirst({
      where: {
        id: params.id,
        userId: session.user.id
      }
    });

    if (!existingKey) {
      return NextResponse.json(
        { error: 'API key not found' },
        { status: 404 }
      );
    }

    await db.apiKey.delete({
      where: { id: params.id }
    });

    return NextResponse.json({
      success: true,
      message: 'API key deleted successfully'
    });

  } catch (error) {
    console.error('API key deletion error:', error);
    return NextResponse.json(
      { error: 'Failed to delete API key' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\api-keys\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';
import { nanoid } from 'nanoid';
import { getServerSession } from '@/lib/auth';

// POST /api/api-keys/create - Create new API key
export async function POST() {
  try {
    const session = await getServerSession();
    
    if (!session?.user?.id) {
      return NextResponse.json(
        { error: 'Unauthorized' },
        { status: 401 }
      );
    }

    // Generate API key with prefix
    const key = `zcs_${nanoid(48)}`;

    const apiKey = await db.apiKey.create({
      data: {
        key,
        userId: session.user.id,
        label: 'Generated API Key'
      }
    });

    return NextResponse.json({
      success: true,
      apiKey: {
        id: apiKey.id,
        key: apiKey.key,
        label: apiKey.label,
        createdAt: apiKey.createdAt
      },
      message: 'API key created successfully'
    });

  } catch (error) {
    console.error('API key creation error:', error);
    return NextResponse.json(
      { error: 'Failed to create API key' },
      { status: 500 }
    );
  }
}

// GET /api/api-keys - List user's API keys
export async function GET() {
  try {
    const session = await getServerSession();
    
    if (!session?.user?.id) {
      return NextResponse.json(
        { error: 'Unauthorized' },
        { status: 401 }
      );
    }

    const apiKeys = await db.apiKey.findMany({
      where: {
        userId: session.user.id
      },
      orderBy: {
        createdAt: 'desc'
      },
      select: {
        id: true,
        key: true,
        label: true,
        isActive: true,
        lastUsedAt: true,
        createdAt: true
      }
    });

    // Mask the keys for security (show only first 8 and last 4 characters)
    const maskedKeys = apiKeys.map(key => ({
      ...key,
      key: `${key.key.substring(0, 12)}...${key.key.substring(key.key.length - 4)}`,
      hasFullKey: false
    }));

    return NextResponse.json({
      success: true,
      apiKeys: maskedKeys
    });

  } catch (error) {
    console.error('API keys fetch error:', error);
    return NextResponse.json(
      { error: 'Failed to fetch API keys' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\auth\[...nextauth]\route.ts
==========================================
import NextAuth from "next-auth"
import CredentialsProvider from "next-auth/providers/credentials"
import { db } from "@/lib/db"
import bcrypt from "bcryptjs"

const handler = NextAuth({
  session: { strategy: "jwt" },
  
  providers: [
    CredentialsProvider({
      name: "Credentials",

      credentials: {
        email: { label: "Email", type: "email" },
        password: { label: "Password", type: "password" },
      },

      async authorize(credentials) {
        if (!credentials?.email || !credentials?.password) {
          return null
        }

        const user = await db.user.findUnique({
          where: { email: credentials.email },
        })

        if (!user || !user.passwordHash) {
          return null
        }

        const valid = await bcrypt.compare(credentials.password, user.passwordHash)
        if (!valid) {
          return null
        }

        return {
          id: user.id,
          email: user.email,
          name: user.name,
          role: user.role,
        }
      },
    }),
  ],

  callbacks: {
    async jwt({ token, user }) {
      if (user) {
        token.role = user.role
        token.id = user.id
      }
      return token
    },

    async session({ session, token }) {
      if (token) {
        session.user.id = token.id as string
        session.user.role = token.role as string
      }
      return session
    },
  },

  pages: {
    signIn: "/login",
    error: "/login",
  },
})

export { handler as GET, handler as POST }


==========================================
FILE: src\app\api\auth\init-demo\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';
import bcrypt from 'bcryptjs';

export async function POST() {
  try {
    // Check if demo user already exists
    const existingUser = await db.user.findUnique({
      where: { email: 'demo@aicreator.com' }
    });

    if (existingUser) {
      return NextResponse.json({
        success: true,
        message: 'Demo user already exists',
        user: {
          email: existingUser.email,
          name: existingUser.name,
          role: existingUser.role
        }
      });
    }

    // Create demo user
    const passwordHash = await bcrypt.hash('demo123456', 12);

    const demoUser = await db.user.create({
      data: {
        email: 'demo@aicreator.com',
        passwordHash,
        name: 'Demo User',
        role: 'admin' // Give admin role for demo
      }
    });

    // Create a demo API key
    const apiKey = await db.apiKey.create({
      data: {
        key: `zcs_demo_${Date.now()}_${Math.random().toString(36).substring(2, 15)}`,
        userId: demoUser.id,
        label: 'Demo API Key',
        isActive: true
      }
    });

    return NextResponse.json({
      success: true,
      message: 'Demo user created successfully',
      user: {
        email: demoUser.email,
        name: demoUser.name,
        role: demoUser.role
      },
      apiKey: {
        key: apiKey.key,
        label: apiKey.label
      }
    });

  } catch (error) {
    console.error('Demo user creation error:', error);
    return NextResponse.json(
      { error: 'Failed to create demo user' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\auth\register\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';
import bcrypt from 'bcryptjs';

export async function POST(request: NextRequest) {
  try {
    const { email, password, name } = await request.json();

    if (!email || !password) {
      return NextResponse.json(
        { error: 'Email and password are required' },
        { status: 400 }
      );
    }

    if (password.length < 6) {
      return NextResponse.json(
        { error: 'Password must be at least 6 characters long' },
        { status: 400 }
      );
    }

    // Check if user already exists
    const existingUser = await db.user.findUnique({
      where: { email }
    });

    if (existingUser) {
      return NextResponse.json(
        { error: 'User with this email already exists' },
        { status: 409 }
      );
    }

    // Hash password
    const passwordHash = await bcrypt.hash(password, 12);

    // Create user
    const user = await db.user.create({
      data: {
        email,
        passwordHash,
        name: name || null,
        role: 'user'
      }
    });

    // Remove password hash from response
    const { passwordHash: _, ...userWithoutPassword } = user;

    return NextResponse.json({
      success: true,
      user: userWithoutPassword,
      message: 'User created successfully'
    });

  } catch (error) {
    console.error('Registration error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\characters\init\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';

// Define the 18 characters as specified in the handoff
const CHARACTERS = [
  // Korean characters
  { code: 'ID_01_A', ethnicity: 'korean', baseAge: 18, variant: 'A', aestheticType: 'cinematic' },
  { code: 'ID_01_B', ethnicity: 'korean', baseAge: 18, variant: 'B', aestheticType: 'influencer' },
  { code: 'ID_01_C', ethnicity: 'korean', baseAge: 18, variant: 'C', aestheticType: 'cinematic' },
  
  { code: 'ID_02_A', ethnicity: 'korean', baseAge: 25, variant: 'A', aestheticType: 'influencer' },
  { code: 'ID_02_B', ethnicity: 'korean', baseAge: 25, variant: 'B', aestheticType: 'cinematic' },
  { code: 'ID_02_C', ethnicity: 'korean', baseAge: 25, variant: 'C', aestheticType: 'influencer' },
  
  { code: 'ID_03_A', ethnicity: 'korean', baseAge: 35, variant: 'A', aestheticType: 'cinematic' },
  { code: 'ID_03_B', ethnicity: 'korean', baseAge: 35, variant: 'B', aestheticType: 'influencer' },
  { code: 'ID_03_C', ethnicity: 'korean', baseAge: 35, variant: 'C', aestheticType: 'cinematic' },
  
  // Japanese characters
  { code: 'ID_04_A', ethnicity: 'japanese', baseAge: 18, variant: 'A', aestheticType: 'cinematic' },
  { code: 'ID_04_B', ethnicity: 'japanese', baseAge: 18, variant: 'B', aestheticType: 'influencer' },
  { code: 'ID_04_C', ethnicity: 'japanese', baseAge: 18, variant: 'C', aestheticType: 'cinematic' },
  
  { code: 'ID_05_A', ethnicity: 'japanese', baseAge: 25, variant: 'A', aestheticType: 'influencer' },
  { code: 'ID_05_B', ethnicity: 'japanese', baseAge: 25, variant: 'B', aestheticType: 'cinematic' },
  { code: 'ID_05_C', ethnicity: 'japanese', baseAge: 25, variant: 'C', aestheticType: 'influencer' },
  
  // Chinese characters
  { code: 'ID_06_A', ethnicity: 'chinese', baseAge: 18, variant: 'A', aestheticType: 'cinematic' },
  { code: 'ID_06_B', ethnicity: 'chinese', baseAge: 18, variant: 'B', aestheticType: 'influencer' },
  { code: 'ID_06_C', ethnicity: 'chinese', baseAge: 18, variant: 'C', aestheticType: 'cinematic' }
];

export async function POST() {
  try {
    // Check if characters already exist
    const existingCount = await db.character.count();
    
    if (existingCount > 0) {
      return NextResponse.json({ 
        message: 'Characters already initialized',
        count: existingCount 
      });
    }

    // Create all characters
    const createdCharacters = await Promise.all(
      CHARACTERS.map(async (character) => {
        return await db.character.create({
          data: {
            code: character.code,
            ethnicity: character.ethnicity,
            baseAge: character.baseAge,
            variant: character.variant,
            aestheticType: character.aestheticType,
            embedding: {
              description: `${character.ethnicity} male, age ${character.baseAge}, variant ${character.variant}, ${character.aestheticType} aesthetic`,
              traits: {
                age_group: character.baseAge < 21 ? 'young_adult' : character.baseAge < 30 ? 'adult' : 'mature',
                style: character.aestheticType,
                ethnicity: character.ethnicity,
                variant: character.variant
              }
            }
          }
        });
      })
    );

    return NextResponse.json({ 
      message: 'Characters initialized successfully',
      count: createdCharacters.length,
      characters: createdCharacters
    });

  } catch (error) {
    console.error('Error initializing characters:', error);
    return NextResponse.json(
      { error: 'Failed to initialize characters' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\characters\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';

export async function GET() {
  try {
    const characters = await db.character.findMany({
      orderBy: [
        { ethnicity: 'asc' },
        { baseAge: 'asc' },
        { variant: 'asc' }
      ],
      include: {
        _count: {
          select: {
            contents: true
          }
        }
      }
    });

    return NextResponse.json({ characters });

  } catch (error) {
    console.error('Error fetching characters:', error);
    return NextResponse.json(
      { error: 'Failed to fetch characters' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\content\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';

export async function GET(request: NextRequest) {
  try {
    // Get recent content from database
    const recentContent = await db.content.findMany({
      take: 10,
      orderBy: { createdAt: 'desc' },
      include: {
        character: {
          select: {
            id: true,
            name: true,
            niche: true,
          }
        }
      }
    });

    // Format the response
    const formattedContent = recentContent.map(content => ({
      id: content.id,
      title: content.title,
      type: content.type,
      status: content.status,
      performance: content.performance || 0,
      createdAt: content.createdAt,
      character: content.character,
      // Add mock metrics for now
      views: Math.floor(Math.random() * 10000),
      likes: Math.floor(Math.random() * 1000),
      comments: Math.floor(Math.random() * 100),
      shares: Math.floor(Math.random() * 50),
    }));

    return NextResponse.json({
      success: true,
      recentContent: formattedContent,
    });
  } catch (error) {
    console.error('Error fetching recent content:', error);
    return NextResponse.json(
      { 
        success: false, 
        error: 'Failed to fetch recent content',
        recentContent: []
      },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\director\plan\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';
import ZAI from 'z-ai-web-dev-sdk';

// WebSocket event emitter helper
function emitSocketEvent(event: string, data: any) {
  // This would typically use your WebSocket server
  // For now, we'll log it - in a real implementation
  // you'd emit to connected clients
  console.log(`WebSocket Event: ${event}`, data);
}

// POST /api/director/plan - Generate comprehensive content plan using AI Director
export async function POST(request: NextRequest) {
  try {
    const { projectId, notes } = await request.json();

    // Get project details
    const project = await db.project.findUnique({
      where: { id: projectId },
      include: {
        contents: {
          where: { type: 'scene' },
          orderBy: { createdAt: 'asc' }
        }
      }
    });

    if (!project) {
      return NextResponse.json(
        { error: 'Project not found' },
        { status: 404 }
      );
    }

    // Create director job
    const job = await db.jobQueue.create({
      data: {
        type: 'director_plan',
        status: 'pending',
        priority: 2,
        payload: { projectId, notes }
      }
    });

    // Update job status
    await db.jobQueue.update({
      where: { id: job.id },
      data: {
        status: 'processing',
        startedAt: new Date(),
        progress: 10
      }
    });

    // Initialize Z.ai GLM-4.6
    const zai = await ZAI.create();

    // Update progress
    await db.jobQueue.update({
      where: { id: job.id },
      data: { progress: 30 }
    });

    // Generate comprehensive scene plan using GLM-4.6
    const directorPrompt = `
You are an expert cinematic content director for AI-generated videos. Based on the following project information, create a detailed scene breakdown for a compelling video.

PROJECT DETAILS:
Title: ${project.title}
Description: ${project.description}
Additional Notes: ${notes || 'None'}
Existing Scenes: ${project.contents?.length || 0}

Create a structured scene plan with 3-5 scenes. For each scene, provide:
1. Scene title (engaging and descriptive)
2. Scene description (what happens in the scene)
3. Camera direction (shot type, angles, movement)
4. Mood and lighting
5. Prompt for Z.ai image generation
6. Prompt for Z.ai video generation
7. Recommended character type
8. Estimated duration

Return ONLY a JSON object with this structure:
{
  "plan": {
    "title": "Overall video title",
    "description": "Overall video description", 
    "scenes": [
      {
        "title": "Scene title",
        "description": "Scene description",
        "camera": "Camera direction",
        "mood": "Mood and lighting",
        "prompt_image": "Z.ai image prompt",
        "prompt_video": "Z.ai video prompt", 
        "character": "Recommended character",
        "duration": "Estimated duration"
      }
    ]
  }
}

Make it cinematic, engaging, and suitable for AI generation.
`;

    // Update progress
    await db.jobQueue.update({
      where: { id: job.id },
      data: { progress: 60 }
    });

    // Call GLM-4.6 for intelligent scene planning
    const completion = await zai.chat.completions.create({
      messages: [
        {
          role: 'system',
          content: 'You are an expert cinematic content director. Always respond with valid JSON only.'
        },
        {
          role: 'user',
          content: directorPrompt
        }
      ],
      temperature: 0.7,
      max_tokens: 2000
    });

    // Update progress
    await db.jobQueue.update({
      where: { id: job.id },
      data: { progress: 80 }
    });

    // Extract and validate the plan
    const planText = completion.choices[0]?.message?.content;
    if (!planText) {
      throw new Error('No response from GLM-4.6');
    }

    let plan;
    try {
      plan = JSON.parse(planText);
    } catch (parseError) {
      throw new Error('Invalid JSON response from GLM-4.6');
    }

    // Validate plan structure
    if (!plan.plan || !plan.plan.scenes || !Array.isArray(plan.plan.scenes)) {
      throw new Error('Invalid plan structure from GLM-4.6');
    }

    // Update progress
    await db.jobQueue.update({
      where: { id: job.id },
      data: { progress: 90 }
    });

    // Store director plan
    await db.directorControl.create({
      data: {
        characterRankings: {},
        shotRankings: {},
        hookRankings: {},
        aestheticRankings: {},
        nextPlan: plan,
        lastAnalysis: new Date(),
        isActive: true
      }
    });

    // AUTO-CREATE SCENES FROM DIRECTOR PLAN
    if (data.plan && data.plan.scenes && Array.isArray(data.plan.scenes)) {
      for (let i = 0; i < data.plan.scenes.length; i++) {
        const scene = data.plan.scenes[i]

        await db.content.create({
          data: {
            projectId,
            type: "scene",
            index: i + 1,
            title: scene.title || `Scene ${i + 1}`,
            description: scene.description || "",
            camera: scene.camera || "",
            mood: scene.mood || "",
            character: scene.character || "",
            promptImage: scene.prompt_image || "",
            promptVideo: scene.prompt_video || "",
            duration: scene.duration || "",
            status: "idea",
            fileType: "video",
            createdAt: new Date()
          }
        })
      }

      // WebSocket broadcast: project updated
      emitSocketEvent("project_update", { 
        projectId,
        scenesCreated: data.plan.scenes.length,
        message: `Auto-created ${data.plan.scenes.length} scenes from Director plan`
      })
    }

    // Complete job
    await db.jobQueue.update({
      where: { id: job.id },
      data: {
        status: 'completed',
        progress: 100,
        completedAt: new Date(),
        result: {
          plan,
          generatedAt: new Date().toISOString(),
          scenesGenerated: plan.plan.scenes.length
        }
      }
    });

    return NextResponse.json({
      success: true,
      jobId: job.id,
      plan,
      message: `GLM-4.6 Director generated ${plan.plan.scenes.length} scenes`
    });

  } catch (directorError) {
    console.error('GLM-4.6 Director generation error:', directorError);

    // Update job with error
    try {
      await db.jobQueue.update({
        where: { id: job.id },
        data: {
          status: 'failed',
          error: directorError instanceof Error ? directorError.message : 'Unknown error',
          completedAt: new Date()
        }
      });
    } catch (updateError) {
      console.error('Failed to update job with error:', updateError);
    }

    return NextResponse.json(
      {
        error: 'Failed to generate director plan',
        details: directorError instanceof Error ? directorError.message : 'Unknown error'
      },
      { status: 500 }
    );
  }
}

// GET /api/director/plan - Get current director status and last plan
export async function GET() {
  try {
    // Get last director control state
    const directorControl = await db.directorControl.findFirst({
      orderBy: { updatedAt: 'desc' }
    });

    // Get active plans
    const activePlans = await db.content.findMany({
      where: { status: 'idea' },
      include: {
        character: true,
        schedule: true
      },
      orderBy: { createdAt: 'desc' },
      take: 10
    });

    return NextResponse.json({
      directorControl,
      activePlans,
      lastAnalysis: directorControl?.lastAnalysis || null,
      nextPlannedContent: activePlans.length
    });

  } catch (error) {
    console.error('Director status error:', error);
    return NextResponse.json(
      { error: 'Failed to get director status' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\generate\batch\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';

export async function POST(request: NextRequest) {
  try {
    const { 
      characterIds, 
      prompts, 
      type = 'mixed', // 'image', 'video', 'mixed'
      count = 1 
    } = await request.json();

    if (!characterIds || !Array.isArray(characterIds) || characterIds.length === 0) {
      return NextResponse.json(
        { error: 'Character IDs array is required' },
        { status: 400 }
      );
    }

    if (!prompts || !Array.isArray(prompts) || prompts.length === 0) {
      return NextResponse.json(
        { error: 'Prompts array is required' },
        { status: 400 }
      );
    }

    // Get character details
    const characters = await db.character.findMany({
      where: { 
        id: { in: characterIds },
        isActive: true 
      }
    });

    if (characters.length === 0) {
      return NextResponse.json(
        { error: 'No active characters found' },
        { status: 404 }
      );
    }

    // Create batch job
    const batchJob = await db.jobQueue.create({
      data: {
        type: 'batch_generation',
        status: 'pending',
        priority: 3, // Highest priority for batch jobs
        payload: {
          characterIds,
          prompts,
          type,
          count,
          totalJobs: characterIds.length * prompts.length * count
        }
      }
    });

    // Update batch job to processing
    await db.jobQueue.update({
      where: { id: batchJob.id },
      data: {
        status: 'processing',
        startedAt: new Date(),
        progress: 5
      }
    });

    // Generate individual jobs
    const jobs = [];
    for (const character of characters) {
      for (const prompt of prompts) {
        for (let i = 0; i < count; i++) {
          // Determine if this should be image or video
          const isVideo = type === 'video' || (type === 'mixed' && Math.random() > 0.5);
          
          const job = await db.jobQueue.create({
            data: {
              type: isVideo ? 'video_generation' : 'image_generation',
              status: 'pending',
              priority: 1,
              payload: {
                characterId: character.id,
                prompt,
                characterCode: character.code,
                batchId: batchJob.id
              }
            }
          });
          
          jobs.push({
            id: job.id,
            characterId: character.id,
            characterCode: character.code,
            prompt,
            type: isVideo ? 'video' : 'image'
          });
        }
      }
    }

    // Update batch job with jobs created
    await db.jobQueue.update({
      where: { id: batchJob.id },
      data: {
        progress: 10,
        result: {
          jobsCreated: jobs.length,
          jobs: jobs
        }
      }
    });

    return NextResponse.json({
      success: true,
      batchId: batchJob.id,
      totalJobs: jobs.length,
      jobs,
      message: `Created ${jobs.length} generation jobs`
    });

  } catch (error) {
    console.error('Batch generation error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\generate\image\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';
import { getZAIClient } from '@/lib/z-ai/client';

export async function POST(request: NextRequest) {
  try {
    const { characterId, prompt, style = 'photorealistic', size = '1024x1024', numImages = 1 } = await request.json();

    if (!characterId || !prompt) {
      return NextResponse.json(
        { error: 'Character ID and prompt are required' },
        { status: 400 }
      );
    }

    // Get character details
    const character = await db.character.findUnique({
      where: { id: characterId }
    });

    if (!character) {
      return NextResponse.json(
        { error: 'Character not found' },
        { status: 404 }
      );
    }

    // Create job queue entry
    const job = await db.jobQueue.create({
      data: {
        type: 'image_generation',
        status: 'pending',
        priority: 1,
        payload: {
          characterId,
          prompt,
          style,
          size,
          numImages,
          characterCode: character.code
        }
      }
    });

    // Update job status to processing
    await db.jobQueue.update({
      where: { id: job.id },
      data: {
        status: 'processing',
        startedAt: new Date(),
        progress: 10
      }
    });

    try {
      // Get Z.ai client
      const zaiClient = getZAIClient();

      // Enhanced prompt with character context
      const enhancedPrompt = `
Create a ${style} image of ${character.embedding?.description || character.code}.
${prompt}
Style: ${character.aestheticType}
Ethnicity: ${character.ethnicity}
Age: ${character.baseAge}
Variant: ${character.variant}
`.trim();

      // Update progress
      await db.jobQueue.update({
        where: { id: job.id },
        data: { progress: 30 }
      });

      // Generate image using CogView-4
      const response = await zaiClient.generateImage({
        prompt: enhancedPrompt,
        size: size,
        style: style,
        num_images: numImages
      });

      // Update progress
      await db.jobQueue.update({
        where: { id: job.id },
        data: { progress: 80 }
      });

      // Get the generated image data
      const imageData = response.data?.[0];
      
      if (!imageData) {
        throw new Error('No image data received from Z.ai CogView-4');
      }

      // Handle image data (could be base64 or URL)
      let fileUrl: string;
      if (typeof imageData === 'string' && imageData.startsWith('data:')) {
        fileUrl = imageData; // Base64 data URL
      } else if (imageData.url) {
        fileUrl = imageData.url; // URL from Z.ai
      } else if (imageData.base64) {
        fileUrl = `data:image/png;base64,${imageData.base64}`; // Base64 string
      } else {
        throw new Error('Unexpected image data format from Z.ai');
      }

      // Create content entry
      const content = await db.content.create({
        data: {
          characterId,
          title: `Generated Image - ${character.code}`,
          description: prompt,
          promptCogView: {
            originalPrompt: prompt,
            enhancedPrompt,
            style,
            size,
            numImages
          },
          status: 'ready',
          fileType: 'image',
          fileUrl,
          aesthetic: character.aestheticType,
          tags: `${character.ethnicity},${character.aestheticType},${character.code}`
        }
      });

      // Complete job
      await db.jobQueue.update({
        where: { id: job.id },
        data: {
          status: 'completed',
          progress: 100,
          completedAt: new Date(),
          result: {
            contentId: content.id,
            imageUrl: fileUrl,
            characterCode: character.code
          }
        }
      });

      return NextResponse.json({
        success: true,
        contentId: content.id,
        jobId: job.id,
        imageUrl: fileUrl,
        message: 'Image generated successfully using Z.ai CogView-4'
      });

    } catch (zaiError) {
      console.error('Z.ai CogView-4 generation error:', zaiError);
      
      // Update job with error
      await db.jobQueue.update({
        where: { id: job.id },
        data: {
          status: 'failed',
          error: zaiError instanceof Error ? zaiError.message : 'Unknown error',
          completedAt: new Date()
        }
      });

      return NextResponse.json(
        { error: 'Failed to generate image', details: zaiError instanceof Error ? zaiError.message : 'Unknown error' },
        { status: 500 }
      );
    }

  } catch (error) {
    console.error('Image generation error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\generate\video\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';
import { getZAIClient } from '@/lib/z-ai/client';

export async function POST(request: NextRequest) {
  try {
    const { characterId, prompt, duration = 5, resolution = '1920x1080' } = await request.json();

    if (!characterId || !prompt) {
      return NextResponse.json(
        { error: 'Character ID and prompt are required' },
        { status: 400 }
      );
    }

    // Get character details
    const character = await db.character.findUnique({
      where: { id: characterId }
    });

    if (!character) {
      return NextResponse.json(
        { error: 'Character not found' },
        { status: 404 }
      );
    }

    // Create job queue entry
    const job = await db.jobQueue.create({
      data: {
        type: 'video_generation',
        status: 'pending',
        priority: 2, // Higher priority for videos
        payload: {
          characterId,
          prompt,
          duration,
          resolution,
          characterCode: character.code
        }
      }
    });

    // Update job status to processing
    await db.jobQueue.update({
      where: { id: job.id },
      data: {
        status: 'processing',
        startedAt: new Date(),
        progress: 10
      }
    });

    try {
      // Get Z.ai client
      const zaiClient = getZAIClient();

      // Enhanced prompt with character context
      const enhancedPrompt = `
Create a ${duration}-second video of ${character.embedding?.description || character.code}.
${prompt}
Style: ${character.aestheticType}
Ethnicity: ${character.ethnicity}
Age: ${character.baseAge}
Variant: ${character.variant}
Resolution: ${resolution}
Consistency anchor: ${character.code}
`.trim();

      // Update progress
      await db.jobQueue.update({
        where: { id: job.id },
        data: { progress: 30 }
      });

      // Generate video using Vidu-Q1
      const response = await zaiClient.generateVideo({
        prompt: enhancedPrompt,
        duration,
        resolution,
        consistency_anchor: character.code
      });

      // Update progress
      await db.jobQueue.update({
        where: { id: job.id },
        data: { progress: 80 }
      });

      // Get the generated video data
      const videoData = response.data?.[0];
      
      if (!videoData) {
        throw new Error('No video data received from Z.ai Vidu-Q1');
      }

      // Handle video data (could be base64 or URL)
      let fileUrl: string;
      if (typeof videoData === 'string' && videoData.startsWith('data:')) {
        fileUrl = videoData; // Base64 data URL
      } else if (videoData.url) {
        fileUrl = videoData.url; // URL from Z.ai
      } else if (videoData.base64) {
        fileUrl = `data:video/mp4;base64,${videoData.base64}`; // Base64 string
      } else {
        throw new Error('Unexpected video data format from Z.ai');
      }

      // Create content entry
      const content = await db.content.create({
        data: {
          characterId,
          title: `Generated Video - ${character.code}`,
          description: prompt,
          promptVidu: {
            originalPrompt: prompt,
            enhancedPrompt,
            duration,
            resolution
          },
          status: 'ready',
          fileType: 'video',
          fileUrl,
          duration,
          aesthetic: character.aestheticType,
          tags: `${character.ethnicity},${character.aestheticType},${character.code}`
        }
      });

      // Complete job
      await db.jobQueue.update({
        where: { id: job.id },
        data: {
          status: 'completed',
          progress: 100,
          completedAt: new Date(),
          result: {
            contentId: content.id,
            videoUrl: fileUrl,
            characterCode: character.code,
            duration
          }
        }
      });

      return NextResponse.json({
        success: true,
        contentId: content.id,
        jobId: job.id,
        videoUrl: fileUrl,
        duration,
        message: 'Video generated successfully using Z.ai Vidu-Q1'
      });

    } catch (zaiError) {
      console.error('Z.ai Vidu-Q1 generation error:', zaiError);
      
      // Update job with error
      await db.jobQueue.update({
        where: { id: job.id },
        data: {
          status: 'failed',
          error: zaiError instanceof Error ? zaiError.message : 'Unknown error',
          completedAt: new Date()
        }
      });

      return NextResponse.json(
        { error: 'Failed to generate video', details: zaiError instanceof Error ? zaiError.message : 'Unknown error' },
        { status: 500 }
      );
    }

  } catch (error) {
    console.error('Video generation error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\generate\voiceover\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';
import { getElevenLabsClient } from '@/lib/elevenlabs/client';

export async function POST(request: NextRequest) {
  try {
    const { contentId, text, voiceSettings } = await request.json();

    if (!contentId || !text) {
      return NextResponse.json(
        { error: 'Content ID and text are required' },
        { status: 400 }
      );
    }

    // Get content details
    const content = await db.content.findUnique({
      where: { id: contentId },
      include: {
        character: true
      }
    });

    if (!content) {
      return NextResponse.json(
        { error: 'Content not found' },
        { status: 404 }
      );
    }

    // Create job queue entry
    const job = await db.jobQueue.create({
      data: {
        type: 'voiceover_generation',
        status: 'pending',
        priority: 1,
        payload: {
          contentId,
          text,
          voiceSettings,
          characterCode: content.character.code
        }
      }
    });

    // Update job status to processing
    await db.jobQueue.update({
      where: { id: job.id },
      data: {
        status: 'processing',
        startedAt: new Date(),
        progress: 10
      }
    });

    try {
      // Get ElevenLabs client
      const elevenLabsClient = getElevenLabsClient();

      // Update progress
      await db.jobQueue.update({
        where: { id: job.id },
        data: { progress: 30 }
      });

      // Generate character-appropriate speech
      const audioBlob = await elevenLabsClient.generateCharacterSpeech({
        text,
        characterType: content.character.ethnicity as 'korean' | 'japanese' | 'chinese',
        age: content.character.baseAge < 21 ? 'young' : content.character.baseAge < 30 ? 'adult' : 'mature',
        aesthetic: content.character.aestheticType as 'cinematic' | 'influencer',
        ...voiceSettings
      });

      // Update progress
      await db.jobQueue.update({
        where: { id: job.id },
        data: { progress: 80 }
      });

      // Convert blob to base64 for storage
      const arrayBuffer = await audioBlob.arrayBuffer();
      const base64 = Buffer.from(arrayBuffer).toString('base64');
      const audioUrl = `data:audio/mp3;base64,${base64}`;

      // Update content with voiceover
      await db.content.update({
        where: { id: contentId },
        data: {
          // Add voiceover URL to content metadata
          promptVidu: {
            ...content.promptVidu,
            voiceoverUrl: audioUrl,
            voiceoverText: text
          }
        }
      });

      // Complete job
      await db.jobQueue.update({
        where: { id: job.id },
        data: {
          status: 'completed',
          progress: 100,
          completedAt: new Date(),
          result: {
            contentId,
            audioUrl,
            characterCode: content.character.code,
            duration: audioBlob.size
          }
        }
      });

      return NextResponse.json({
        success: true,
        contentId,
        jobId: job.id,
        audioUrl,
        message: 'Voiceover generated successfully using ElevenLabs'
      });

    } catch (voiceError) {
      console.error('ElevenLabs voiceover generation error:', voiceError);
      
      // Update job with error
      await db.jobQueue.update({
        where: { id: job.id },
        data: {
          status: 'failed',
          error: voiceError instanceof Error ? voiceError.message : 'Unknown error',
          completedAt: new Date()
        }
      });

      return NextResponse.json(
        { error: 'Failed to generate voiceover', details: voiceError instanceof Error ? voiceError.message : 'Unknown error' },
        { status: 500 }
      );
    }

  } catch (error) {
    console.error('Voiceover generation error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\projects\[id]\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';

// GET /api/projects/[id] - Get specific project
export async function GET(
  request: NextRequest,
  { params }: { params: { id: string } }
) {
  try {
    const project = await db.project.findUnique({
      where: { id: params.id },
      include: {
        character: true,
        contents: {
          where: { type: 'scene' },
          orderBy: { createdAt: 'asc' }
        }
      }
    });

    if (!project) {
      return NextResponse.json(
        { error: 'Project not found' },
        { status: 404 }
      );
    }

    // Format response to include scenes
    const formattedProject = {
      ...project,
      scenes: project.contents || []
    };

    return NextResponse.json({ project: formattedProject });

  } catch (error) {
    console.error('Error fetching project:', error);
    return NextResponse.json(
      { error: 'Failed to fetch project' },
      { status: 500 }
    );
  }
}

// POST /api/projects/[id] - Create scene or update project
export async function POST(
  request: NextRequest,
  { params }: { params: { id: string } }
) {
  try {
    const body = await request.json();
    
    // Handle scene creation
    if (body.type === 'createScene') {
      const { title, description, camera } = body;
      
      const scene = await db.content.create({
        data: {
          title,
          description,
          projectId: params.id,
          type: 'scene',
          status: 'idea',
          fileType: 'video',
          promptCogView: {
            camera: camera || 'medium shot',
            scene: description
          },
          createdAt: new Date()
        }
      });

      return NextResponse.json({
        success: true,
        scene,
        message: 'Scene created successfully'
      });
    }
    
    return NextResponse.json(
      { error: 'Invalid request type' },
      { status: 400 }
    );

  } catch (error) {
    console.error('Error in POST /api/projects/[id]:', error);
    return NextResponse.json(
      { error: 'Failed to process request' },
      { status: 500 }
    );
  }
}

// PUT /api/projects/[id] - Update project
export async function PUT(
  request: NextRequest,
  { params }: { params: { id: string } }
) {
  try {
    const { title, description, status, prompt } = await request.json();

    const project = await db.project.update({
      where: { id: params.id },
      data: {
        title,
        description,
        status,
        prompt,
        updatedAt: new Date()
      }
    });

    return NextResponse.json({
      success: true,
      project,
      message: 'Project updated successfully'
    });

  } catch (error) {
    console.error('Error updating project:', error);
    return NextResponse.json(
      { error: 'Failed to update project' },
      { status: 500 }
    );
  }
}

// DELETE /api/projects/[id] - Delete project
export async function DELETE(
  request: NextRequest,
  { params }: { params: { id: string } }
) {
  try {
    await db.project.delete({
      where: { id: params.id }
    });

    return NextResponse.json({
      success: true,
      message: 'Project deleted successfully'
    });

  } catch (error) {
    console.error('Error deleting project:', error);
    return NextResponse.json(
      { error: 'Failed to delete project' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\projects\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';

// GET /api/projects - Get all projects
export async function GET() {
  try {
    const projects = await db.project.findMany({
      include: {
        character: {
          select: {
            code: true,
            ethnicity: true,
            baseAge: true,
            aestheticType: true
          }
        }
      },
      orderBy: { createdAt: 'desc' }
    });

    return NextResponse.json({ projects });

  } catch (error) {
    console.error('Error fetching projects:', error);
    return NextResponse.json(
      { error: 'Failed to fetch projects' },
      { status: 500 }
    );
  }
}

// POST /api/projects - Create new project
export async function POST(request: NextRequest) {
  try {
    const { title, description, characterId, type, prompt } = await request.json();

    if (!title || !characterId) {
      return NextResponse.json(
        { error: 'Title and character ID are required' },
        { status: 400 }
      );
    }

    // Check if character exists
    const character = await db.character.findUnique({
      where: { id: characterId }
    });

    if (!character) {
      return NextResponse.json(
        { error: 'Character not found' },
        { status: 404 }
      );
    }

    const project = await db.project.create({
      data: {
        title,
        description,
        characterId,
        type: type || 'video',
        prompt,
        status: 'draft'
      }
    });

    return NextResponse.json({
      success: true,
      project,
      message: 'Project created successfully'
    });

  } catch (error) {
    console.error('Error creating project:', error);
    return NextResponse.json(
      { error: 'Failed to create project' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\queue\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';

// GET /api/queue - List all jobs
export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const status = searchParams.get('status');
    const type = searchParams.get('type');
    const limit = parseInt(searchParams.get('limit') || '50');

    const where: any = {};
    if (status) where.status = status;
    if (type) where.type = type;

    const jobs = await db.jobQueue.findMany({
      where,
      orderBy: [
        { priority: 'desc' },
        { createdAt: 'desc' }
      ],
      take: limit,
      include: {
        // We could include related data here if needed
      }
    });

    // Get summary statistics
    const stats = await db.jobQueue.groupBy({
      by: ['status'],
      _count: {
        status: true
      }
    });

    const statusCounts = stats.reduce((acc, stat) => {
      acc[stat.status] = stat._count.status;
      return acc;
    }, {} as Record<string, number>);

    return NextResponse.json({
      jobs,
      stats: statusCounts,
      total: jobs.length
    });

  } catch (error) {
    console.error('Error fetching queue:', error);
    return NextResponse.json(
      { error: 'Failed to fetch queue' },
      { status: 500 }
    );
  }
}

// POST /api/queue - Add new job
export async function POST(request: NextRequest) {
  try {
    const { type, payload, priority = 1 } = await request.json();

    if (!type || !payload) {
      return NextResponse.json(
        { error: 'Type and payload are required' },
        { status: 400 }
      );
    }

    const job = await db.jobQueue.create({
      data: {
        type,
        status: 'pending',
        priority,
        payload
      }
    });

    return NextResponse.json({
      success: true,
      job,
      message: 'Job added to queue successfully'
    });

  } catch (error) {
    console.error('Error adding job to queue:', error);
    return NextResponse.json(
      { error: 'Failed to add job to queue' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\queue\status\[jobId]\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';

// GET /api/queue/status/[jobId] - Get specific job status
export async function GET(
  request: NextRequest,
  { params }: { params: { jobId: string } }
) {
  try {
    const job = await db.jobQueue.findUnique({
      where: { id: params.jobId }
    });

    if (!job) {
      return NextResponse.json(
        { error: 'Job not found' },
        { status: 404 }
      );
    }

    return NextResponse.json({ job });

  } catch (error) {
    console.error('Error fetching job status:', error);
    return NextResponse.json(
      { error: 'Failed to fetch job status' },
      { status: 500 }
    );
  }
}

// PUT /api/queue/status/[jobId] - Update job status
export async function PUT(
  request: NextRequest,
  { params }: { params: { jobId: string } }
) {
  try {
    const { status, progress, result, error } = await request.json();

    const updateData: any = { updatedAt: new Date() };
    
    if (status) {
      updateData.status = status;
      if (status === 'processing') {
        updateData.startedAt = new Date();
      } else if (status === 'completed' || status === 'failed') {
        updateData.completedAt = new Date();
      }
    }
    
    if (progress !== undefined) updateData.progress = progress;
    if (result) updateData.result = result;
    if (error) updateData.error = error;

    const job = await db.jobQueue.update({
      where: { id: params.jobId },
      data: updateData
    });

    return NextResponse.json({
      success: true,
      job,
      message: 'Job updated successfully'
    });

  } catch (error) {
    console.error('Error updating job:', error);
    return NextResponse.json(
      { error: 'Failed to update job' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\route.ts
==========================================
import { NextResponse } from "next/server";

export async function GET() {
  return NextResponse.json({ message: "Hello, world!" });
}


==========================================
FILE: src\app\api\scheduler\route.ts
==========================================
import { NextRequest, NextResponse } from "next/server"
import { db } from "@/lib/db"

// GET → return all scheduled items
export async function GET() {
  try {
    const items = await db.schedule.findMany({
      orderBy: { date: "asc" }
    })

    return NextResponse.json({ items })
  } catch (err) {
    console.error("GET /api/scheduler error:", err)
    return NextResponse.json({ error: "Failed to load schedule" }, { status: 500 })
  }
}

// POST → create schedule entry
export async function POST(req: Request) {
  try {
    const body = await req.json()
    const { date, title } = body

    if (!date || !title) {
      return NextResponse.json(
        { error: "date and title are required" },
        { status: 400 }
      )
    }

    const item = await db.schedule.create({
      data: {
        date,
        title,
        status: "scheduled"
      }
    })

    return NextResponse.json({ item })
  } catch (err) {
    console.error("POST /api/scheduler error:", err)
    return NextResponse.json({ error: "Failed to create schedule" }, { status: 500 })
  }
}

// PATCH → update schedule entry
export async function PATCH(req: Request) {
  try {
    const body = await req.json()
    const { id, title, status } = body

    if (!id) return NextResponse.json({ error: "id required" }, { status: 400 })

    const item = await db.schedule.update({
      where: { id },
      data: { title, status }
    })

    return NextResponse.json({ item })
  } catch (err) {
    console.error("PATCH /api/scheduler error:", err)
    return NextResponse.json({ error: "Failed to update schedule" }, { status: 500 })
  }
}

// DELETE → remove schedule entry
export async function DELETE(req: Request) {
  try {
    const body = await req.json()
    const { id } = body

    if (!id) return NextResponse.json({ error: "id required" }, { status: 400 })

    await db.schedule.delete({ where: { id } })

    return NextResponse.json({ success: true })
  } catch (err) {
    console.error("DELETE /api/scheduler error:", err)
    return NextResponse.json({ error: "Failed to delete schedule" }, { status: 500 })
  }
}


==========================================
FILE: src\app\api\social\tiktok\analytics\[videoId]\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';
import { TikTokClient } from '@/lib/tiktok/client';
import { getServerSession } from '@/lib/auth';

// GET /api/social/tiktok/analytics/[videoId] - Get video analytics
export async function GET(
  request: NextRequest,
  { params }: { params: { videoId: string } }
) {
  try {
    const session = await getServerSession(authOptions);
    if (!session?.user?.id) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const { videoId } = params;

    if (!videoId) {
      return NextResponse.json({ error: 'Video ID required' }, { status: 400 });
    }

    // Get user's TikTok credentials
    const user = await db.user.findUnique({
      where: { id: session.user.id },
      select: { tiktokClientId: true, tiktokClientSecret: true }
    });

    if (!user?.tiktokClientId || !user?.tiktokClientSecret) {
      return NextResponse.json({ error: 'TikTok not configured' }, { status: 400 });
    }

    // Initialize TikTok client
    const tiktokClient = new TikTokClient({
      client_id: user.tiktokClientId,
      client_secret: user.tiktokClientSecret
    });

    // Get video analytics
    const analytics = await tiktokClient.getVideoAnalytics(videoId);

    // Update analytics record in database
    await db.analytics.updateMany({
      where: {
        postId: videoId,
        platform: 'tiktok'
      },
      data: {
        views: analytics.views,
        likes: analytics.likes,
        comments: analytics.comments,
        shares: analytics.shares,
        engagementRate: analytics.engagement_rate
      }
    });

    return NextResponse.json({
      success: true,
      analytics
    });

  } catch (error) {
    console.error('TikTok analytics error:', error);
    return NextResponse.json(
      { error: 'Failed to fetch TikTok analytics' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\social\tiktok\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';
import { TikTokClient } from '@/lib/tiktok/client';
import { getServerSession, authOptions } from '@/lib/auth';

// POST /api/social/tiktok/post - Post video to TikTok
export async function POST(request: NextRequest) {
  try {
    const session = await getServerSession(authOptions);
    if (!session?.user?.id) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    const { video_url, caption, hashtags, content_id } = await request.json();

    if (!video_url || !caption) {
      return NextResponse.json({ error: 'Missing required fields' }, { status: 400 });
    }

    // Get user's TikTok credentials
    const user = await db.user.findUnique({
      where: { id: session.user.id },
      select: { tiktokClientId: true, tiktokClientSecret: true }
    });

    if (!user?.tiktokClientId || !user?.tiktokClientSecret) {
      return NextResponse.json({ error: 'TikTok not configured' }, { status: 400 });
    }

    // Initialize TikTok client
    const tiktokClient = new TikTokClient({
      client_id: user.tiktokClientId,
      client_secret: user.tiktokClientSecret
    });

    // Post video to TikTok
    const result = await tiktokClient.postVideo({
      video_url,
      caption,
      hashtags: hashtags || []
    });

    // Update content record with TikTok post info
    if (content_id) {
      await db.content.update({
        where: { id: content_id },
        data: {
          tiktokPostId: result.id,
          tiktokPostUrl: result.share_url,
          status: 'posted'
        }
      });
    }

    // Create analytics record
    await db.analytics.create({
      data: {
        contentId: content_id,
        platform: 'tiktok',
        postId: result.id,
        views: 0,
        likes: 0,
        comments: 0,
        shares: 0
      }
    });

    return NextResponse.json({
      success: true,
      post: result
    });

  } catch (error) {
    console.error('TikTok post error:', error);
    return NextResponse.json(
      { error: 'Failed to post to TikTok' },
      { status: 500 }
    );
  }
}

// GET /api/social/tiktok/trends - Get trending hashtags
export async function GET() {
  try {
    const session = await getServerSession(authOptions);
    if (!session?.user?.id) {
      return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    }

    // Get user's TikTok credentials
    const user = await db.user.findUnique({
      where: { id: session.user.id },
      select: { tiktokClientId: true, tiktokClientSecret: true }
    });

    if (!user?.tiktokClientId || !user?.tiktokClientSecret) {
      // Return default trends if TikTok not configured
      return NextResponse.json({
        hashtags: [
          '#fyp',
          '#foryou',
          '#viral',
          '#trending',
          '#explore',
          '#tiktokmademebuyit',
          '#aesthetic',
          '#grwm',
          '#storytime',
          '#dance'
        ]
      });
    }

    // Initialize TikTok client
    const tiktokClient = new TikTokClient({
      client_id: user.tiktokClientId,
      client_secret: user.tiktokClientSecret
    });

    // Get trending hashtags
    const hashtags = await tiktokClient.getTrendingHashtags();

    return NextResponse.json({ hashtags });

  } catch (error) {
    console.error('TikTok trends error:', error);
    return NextResponse.json(
      { error: 'Failed to fetch TikTok trends' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\socket\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';

// Simple socket endpoint without Socket.io for now
export async function GET() {
  return NextResponse.json({ 
    message: 'Socket endpoint - WebSocket integration temporarily simplified',
    status: 'simplified'
  });
}

export async function POST(request: NextRequest) {
  try {
    const { event, data } = await request.json();
    
    // Simple event handling without Socket.io
    console.log('Socket event:', event, data);
    
    return NextResponse.json({ 
      success: true,
      event,
      data,
      timestamp: new Date().toISOString()
    });
  } catch (error) {
    console.error('Socket error:', error);
    return NextResponse.json(
      { error: 'Failed to handle socket event' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\api\tiktok\auth\start\route.ts
==========================================
import { NextRequest, NextResponse } from "next/server"

// TikTok OAuth configuration (replace with your actual credentials)
const TIKTOK_CLIENT_ID = process.env.TIKTOK_CLIENT_ID || "your_client_id"
const TIKTOK_CLIENT_SECRET = process.env.TIKTOK_CLIENT_SECRET || "your_client_secret"
const REDIRECT_URI = process.env.TIKTOK_REDIRECT_URI || "https://www.tiktok.com/v2/auth"

// Generate state parameter for OAuth
function generateState() {
  const state = Math.random().toString(36).substring(2)
  const timestamp = Date.now().toString()
  return `${state}_${timestamp}`
}

// Store state in memory (in production, use Redis)
const stateStore = new Map()

export async function GET(req: NextRequest) {
  const code = req.nextUrl.searchParams.get('code')
  const state = req.nextUrl.searchParams.get('state')

  // Verify state parameter
  if (!state || !code) {
    return NextResponse.json({
      error: "State parameter is required"
    }, { status: 400 })
  }

  // Check if state matches stored state
  const storedState = stateStore.get(code)
  if (!storedState || storedState !== state) {
    return NextResponse.json({
      error: "Invalid state parameter"
    }, { status: 400 })
  }

  // Generate TikTok authorization URL
  const authUrl = `https://www.tiktok.com/v2/auth/authorize?client_key=${TIKTOK_CLIENT_ID}&response_type=code&scope=user.info.basic,video.publish&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&state=${state}&response_type=code`

  return NextResponse.redirect(authUrl)
}

export async function POST(req: NextRequest) {
  const code = req.nextUrl.searchParams.get('code')
  const state = req.nextUrl.searchParams.get('state')

  // Verify state parameter
  if (!state || !code) {
    return NextResponse.json({
      error: "State parameter is required"
    }, { status: 400 })
  }

  // Exchange authorization code for access token
  const tokenUrl = `https://open-api.tiktok.com/v2/oauth/token/?grant_type=authorization_code&client_key=${TIKTOK_CLIENT_ID}&client_secret=${TIKTOK_CLIENT_SECRET}&code=${code}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&state=${state}`

  try {
    const response = await fetch(tokenUrl, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded'
      },
      body: new URLSearchParams({
        grant_type: 'authorization_code',
        client_id: TIKTOK_CLIENT_ID,
        client_secret: TIKTOK_CLIENT_SECRET,
        code: code,
        redirect_uri: REDIRECT_URI,
        state: state
      }).toString()
    })

    const data = await response.json()

    if (data.access_token) {
      // Store tokens in database (in production, use encrypted storage)
      // For now, return tokens directly
      // In production, you should encrypt these and store securely
      
      // Store state in memory
      stateStore.set(state, {
        access_token: data.access_token,
        refresh_token: data.refresh_token,
        expires_in: data.expires_in,
        token_type: data.token_type
      })

      return NextResponse.json({
        success: true,
        access_token: data.access_token,
        refresh_token: data.refresh_token,
        expires_in: data.expires_in,
        token_type: data.token_type,
        state: state
      })
    } else {
      return NextResponse.json({
        error: "Failed to exchange authorization code for access token"
      }, { status: 400 })
    }
  } catch (error) {
    console.error('TikTok auth error:', error)
    return NextResponse.json({
      error: 'Internal server error'
    }, { status: 500 })
  }
}



==========================================
FILE: src\app\api\tiktok\upload\route.ts
==========================================
import { NextRequest, NextResponse } from "next/server"
import { db } from "@/lib/db"
import { TikTokClient } from "@/lib/tiktok/client"

// TikTok video upload endpoint
export async function POST(req: NextRequest) {
  try {
    const formData = await req.formData()
    const videoFile = formData.get('video') as File
    const title = formData.get('title') as string
    const description = formData.get('description') as string

    if (!videoFile) {
      return NextResponse.json({
        error: "Video file is required"
      }, { status: 400 })
    }

    const tiktokClient = new TikTokClient()

    // Initialize upload
    const initResponse = await fetch('https://open-api.tiktok.com/v2/video/upload/', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${tiktokClient.getAccessToken()}`
      },
      body: formData
    })

    const initData = await initResponse.json()

    if (!initData.data?.upload_url) {
      return NextResponse.json({
        error: "Failed to initialize TikTok upload"
      }, { status: 500 })
    }

    // Upload video file
    const uploadResponse = await fetch(initData.data.upload_url, {
      method: 'PUT',
      headers: {
        'Authorization': `Bearer ${tiktokClient.getAccessToken()}`,
        'Content-Type': 'application/octet-stream'
      },
      body: videoFile
    })

    const uploadData = await uploadResponse.json()

    if (uploadData.data?.video_id) {
      // Create content entry in database
      await db.content.create({
        data: {
          title,
          description,
          fileType: 'video',
          fileUrl: uploadData.data.video_id,
          tiktokPostId: uploadData.data.video_id,
          status: 'posted',
          createdAt: new Date()
        }
      })

      console.log("Content created:", {
        id: uploadData.data.video_id,
        status: "posted"
      })

      return NextResponse.json({
        success: true,
        video_id: uploadData.data.video_id,
        title,
        fileUrl: uploadData.data.video_id
      })
    } else {
      return NextResponse.json({
        error: "Video upload failed"
      }, { status: 500 })
    }
  } catch (error) {
    console.error('TikTok upload error:', error)
    return NextResponse.json({
      error: 'Internal server error'
    }, { status: 500 })
  }
}



==========================================
FILE: src\app\api\trends\route.ts
==========================================
import { NextRequest, NextResponse } from 'next/server';
import { db } from '@/lib/db';

// GET /api/trends - Get all trends
export async function GET() {
  try {
    const trends = await db.trend.findMany({
      where: { isActive: true },
      orderBy: { popularity: 'desc' },
      take: 50
    });

    return NextResponse.json({ trends });

  } catch (error) {
    console.error('Error fetching trends:', error);
    return NextResponse.json(
      { error: 'Failed to fetch trends' },
      { status: 500 }
    );
  }
}

// POST /api/trends - Create new trend
export async function POST(request: NextRequest) {
  try {
    const { title, description, type, popularity, metadata } = await request.json();

    if (!title || !type) {
      return NextResponse.json(
        { error: 'Title and type are required' },
        { status: 400 }
      );
    }

    const trend = await db.trend.create({
      data: {
        title,
        description,
        type,
        popularity: popularity || 0,
        metadata,
        isActive: true,
        expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) // 7 days from now
      }
    });

    return NextResponse.json({
      success: true,
      trend,
      message: 'Trend created successfully'
    });

  } catch (error) {
    console.error('Error creating trend:', error);
    return NextResponse.json(
      { error: 'Failed to create trend' },
      { status: 500 }
    );
  }
}


==========================================
FILE: src\app\calendar\page.tsx
==========================================
"use client"

import { useEffect, useState } from "react"
import { Card, CardHeader, CardTitle, CardContent } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { useSocket } from "@/hooks/use-socket"
import ScheduleModal from "./ScheduleModal"

const daysOfWeek = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]

export default function CalendarPage() {
  const [schedules, setSchedules] = useState([])
  const [currentDate, setCurrentDate] = useState(new Date())
  const [showModal, setShowModal] = useState(false)
  const [selectedDate, setSelectedDate] = useState(null)

  const socket = useSocket()

  async function loadSchedule() {
    const res = await fetch("/api/scheduler")
    const data = await res.json()
    setSchedules(data.items || [])
  }

  useEffect(() => {
    loadSchedule()
  }, [])

  useEffect(() => {
    if (!socket) return
    socket.on("schedule_update", loadSchedule)
    return () => socket.off("schedule_update", loadSchedule)
  }, [socket])

  function openModal(date) {
    setSelectedDate(date)
    setShowModal(true)
  }

  // Calendar grid calculation
  const year = currentDate.getFullYear()
  const month = currentDate.getMonth()
  const firstDayOfMonth = new Date(year, month, 1)
  const startingDay = firstDayOfMonth.getDay()
  const daysInMonth = new Date(year, month + 1, 0).getDate()

  const calendarCells = []
  for (let i = 0; i < startingDay; i++) {
    calendarCells.push(null)
  }
  for (let i = 1; i <= daysInMonth; i++) {
    calendarCells.push(new Date(year, month, i))
  }

  return (
    <div className="p-8 space-y-8">

      <Card>
        <CardHeader>
          <CardTitle>Content Calendar</CardTitle>
        </CardHeader>
        <CardContent>

          {/* Month Controls */}
          <div className="flex justify-between mb-4">
            <Button
              variant="outline"
              onClick={() =>
                setCurrentDate(new Date(year, month - 1, 1))
              }
            >
              Previous
            </Button>

            <div className="text-xl font-bold">
              {currentDate.toLocaleString("default", {
                month: "long",
                year: "numeric",
              })}
            </div>

            <Button
              variant="outline"
              onClick={() =>
                setCurrentDate(new Date(year, month + 1, 1))
              }
            >
              Next
            </Button>
          </div>

          {/* Days of Week */}
          <div className="grid grid-cols-7 text-center font-semibold mb-2">
            {daysOfWeek.map((day) => (
              <div key={day}>{day}</div>
            ))}
          </div>

          {/* Calendar Grid */}
          <div className="grid grid-cols-7 gap-2">
            {calendarCells.map((date, idx) => {
              if (!date) {
                return <div key={idx} className="border h-24 bg-muted/20" />
              }

              const formatted = date.toISOString().split("T")[0]
              const daySchedules = schedules.filter(
                (s) => s.date === formatted
              )

              return (
                <div
                  key={idx}
                  className="border h-32 p-1 rounded hover:bg-muted cursor-pointer"
                  onClick={() => openModal(formatted)}
                >
                  <div className="font-bold text-sm">
                    {date.getDate()}
                  </div>

                  {/* Scheduled Items */}
                  <div className="space-y-1 mt-1">
                    {daySchedules.map((item) => (
                      <div
                        key={item.id}
                        className="text-xs p-1 rounded bg-secondary text-secondary-foreground"
                      >
                        {item.title}
                      </div>
                    ))}
                  </div>
                </div>
              )
            })}
          </div>
        </CardContent>
      </Card>

      <ScheduleModal
        open={showModal}
        onClose={() => setShowModal(false)}
        date={selectedDate}
        onSaved={loadSchedule}
      />
    </div>
  )
}


==========================================
FILE: src\app\calendar\ScheduleModal.tsx
==========================================
"use client"

import { useState } from "react"
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogFooter } from "@/components/ui/dialog"
import { Input } from "@/components/ui/input"
import { Button } from "@/components/ui/button"

export default function ScheduleModal({ open, onClose, date, onSaved }) {
  const [title, setTitle] = useState("")
  const [loading, setLoading] = useState(false)

  async function save() {
    setLoading(true)
    await fetch("/api/scheduler", {
      method: "POST",
      body: JSON.stringify({ date, title })
    })
    setLoading(false)
    onSaved()
    onClose()
  }

  if (!date) return null

  return (
    <Dialog open={open} onOpenChange={onClose}>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Schedule Content</DialogTitle>
        </DialogHeader>

        <div className="space-y-4">
          <Input
            placeholder="Post Title"
            value={title}
            onChange={(e) => setTitle(e.target.value)}
          />
        </div>

        <DialogFooter>
          <Button variant="outline" onClick={onClose}>Cancel</Button>
          <Button onClick={save} disabled={loading}>
            {loading ? "Saving…" : "Save"}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  )
}


==========================================
FILE: src\app\characters\page.tsx
==========================================
'use client';

import { useEffect, useState } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { 
  Users, 
  Play, 
  BarChart3, 
  Star,
  RefreshCw,
  Film,
  User,
  Settings
} from 'lucide-react';

interface Character {
  id: string;
  code: string;
  ethnicity: string;
  baseAge: number;
  variant: string;
  aestheticType: string;
  isActive: boolean;
  performanceScore: number;
  _count: {
    contents: number;
  };
}

export default function CharactersPage() {
  const [characters, setCharacters] = useState<Character[]>([]);
  const [loading, setLoading] = useState(true);
  const [initializing, setInitializing] = useState(false);

  useEffect(() => {
    fetchCharacters();
  }, []);

  const fetchCharacters = async () => {
    try {
      const response = await fetch('/api/characters');
      const data = await response.json();
      setCharacters(data.characters || []);
    } catch (error) {
      console.error('Error fetching characters:', error);
    } finally {
      setLoading(false);
    }
  };

  const initializeCharacters = async () => {
    setInitializing(true);
    try {
      const response = await fetch('/api/characters/init', {
        method: 'POST'
      });
      const data = await response.json();
      if (response.ok) {
        await fetchCharacters();
      }
    } catch (error) {
      console.error('Error initializing characters:', error);
    } finally {
      setInitializing(false);
    }
  };

  const getEthnicityColor = (ethnicity: string) => {
    switch (ethnicity) {
      case 'korean': return 'bg-blue-100 text-blue-800';
      case 'japanese': return 'bg-red-100 text-red-800';
      case 'chinese': return 'bg-green-100 text-green-800';
      default: return 'bg-gray-100 text-gray-800';
    }
  };

  const getAestheticIcon = (type: string) => {
    return type === 'cinematic' ? <Film className="w-4 h-4" /> : <User className="w-4 h-4" />;
  };

  const getPerformanceColor = (score: number) => {
    if (score >= 90) return 'text-green-600';
    if (score >= 70) return 'text-yellow-600';
    return 'text-red-600';
  };

  const groupCharactersByEthnicity = () => {
    const grouped: Record<string, Character[]> = {
      korean: [],
      japanese: [],
      chinese: []
    };

    characters.forEach(character => {
      if (grouped[character.ethnicity]) {
        grouped[character.ethnicity].push(character);
      }
    });

    return grouped;
  };

  if (loading) {
    return (
      <div className="min-h-screen bg-background p-6">
        <div className="max-w-7xl mx-auto">
          <div className="flex items-center justify-center h-96">
            <RefreshCw className="w-8 h-8 animate-spin" />
          </div>
        </div>
      </div>
    );
  }

  const groupedCharacters = groupCharactersByEthnicity();
  const totalCharacters = characters.length;
  const activeCharacters = characters.filter(c => c.isActive).length;

  return (
    <div className="min-h-screen bg-background p-6">
      <div className="max-w-7xl mx-auto space-y-6">
        {/* Header */}
        <div className="flex items-center justify-between">
          <div>
            <h1 className="text-3xl font-bold tracking-tight">Characters</h1>
            <p className="text-muted-foreground">
              Manage your AI character roster for content generation
            </p>
          </div>
          <div className="flex items-center gap-2">
            {totalCharacters === 0 && (
              <Button 
                onClick={initializeCharacters}
                disabled={initializing}
                className="gap-2"
              >
                <RefreshCw className={`w-4 h-4 ${initializing ? 'animate-spin' : ''}`} />
                Initialize Characters
              </Button>
            )}
            <Badge variant="outline">{totalCharacters}/18</Badge>
            <Badge variant="secondary">{activeCharacters} active</Badge>
          </div>
        </div>

        {totalCharacters === 0 ? (
          <Card>
            <CardContent className="flex flex-col items-center justify-center h-96">
              <Users className="w-16 h-16 text-muted-foreground mb-4" />
              <h3 className="text-xl font-semibold mb-2">No Characters Yet</h3>
              <p className="text-muted-foreground text-center mb-4">
                Initialize your character roster to start generating content with 18 unique AI personalities.
              </p>
              <Button 
                onClick={initializeCharacters}
                disabled={initializing}
                className="gap-2"
              >
                <RefreshCw className={`w-4 h-4 ${initializing ? 'animate-spin' : ''}`} />
                {initializing ? 'Initializing...' : 'Initialize Characters'}
              </Button>
            </CardContent>
          </Card>
        ) : (
          <Tabs defaultValue="grid" className="space-y-4">
            <TabsList>
              <TabsTrigger value="grid">Grid View</TabsTrigger>
              <TabsTrigger value="ethnicity">By Ethnicity</TabsTrigger>
              <TabsTrigger value="performance">Performance</TabsTrigger>
            </TabsList>

            <TabsContent value="grid" className="space-y-4">
              <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
                {characters.map((character) => (
                  <Card key={character.id} className="hover:shadow-md transition-shadow">
                    <CardHeader className="pb-3">
                      <div className="flex items-center justify-between">
                        <Avatar className="w-12 h-12">
                          <AvatarImage src="" />
                          <AvatarFallback className="bg-primary text-primary-foreground">
                            {character.code.slice(-2)}
                          </AvatarFallback>
                        </Avatar>
                        <div className="flex items-center gap-1">
                          {getAestheticIcon(character.aestheticType)}
                          <Badge variant={character.isActive ? "default" : "secondary"}>
                            {character.isActive ? 'Active' : 'Inactive'}
                          </Badge>
                        </div>
                      </div>
                    </CardHeader>
                    <CardContent className="space-y-3">
                      <div>
                        <h3 className="font-semibold">{character.code}</h3>
                        <p className="text-sm text-muted-foreground capitalize">
                          {character.ethnicity} • Age {character.baseAge} • Variant {character.variant}
                        </p>
                      </div>
                      
                      <div className="flex items-center gap-2">
                        <Badge className={getEthnicityColor(character.ethnicity)}>
                          {character.ethnicity}
                        </Badge>
                        <Badge variant="outline">
                          {character.aestheticType}
                        </Badge>
                      </div>

                      <div className="space-y-1">
                        <div className="flex items-center justify-between text-sm">
                          <span>Performance</span>
                          <span className={`font-medium ${getPerformanceColor(character.performanceScore)}`}>
                            {character.performanceScore.toFixed(1)}%
                          </span>
                        </div>
                        <div className="flex items-center justify-between text-sm">
                          <span>Content</span>
                          <span>{character._count.contents} pieces</span>
                        </div>
                      </div>

                      <div className="flex gap-2 pt-2">
                        <Button size="sm" variant="outline" className="flex-1 gap-1">
                          <Play className="w-3 h-3" />
                          Generate
                        </Button>
                        <Button size="sm" variant="ghost" className="gap-1">
                          <BarChart3 className="w-3 h-3" />
                        </Button>
                      </div>
                    </CardContent>
                  </Card>
                ))}
              </div>
            </TabsContent>

            <TabsContent value="ethnicity" className="space-y-6">
              {Object.entries(groupedCharacters).map(([ethnicity, chars]) => (
                <div key={ethnicity} className="space-y-3">
                  <div className="flex items-center gap-2">
                    <Badge className={getEthnicityColor(ethnicity)} capitalize>
                      {ethnicity}
                    </Badge>
                    <span className="text-sm text-muted-foreground">
                      {chars.length} characters
                    </span>
                  </div>
                  <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
                    {chars.map((character) => (
                      <Card key={character.id}>
                        <CardContent className="p-4">
                          <div className="flex items-center justify-between">
                            <div>
                              <h4 className="font-semibold">{character.code}</h4>
                              <p className="text-sm text-muted-foreground">
                                Age {character.baseAge} • {character.aestheticType}
                              </p>
                            </div>
                            <div className="text-right">
                              <div className={`font-medium ${getPerformanceColor(character.performanceScore)}`}>
                                {character.performanceScore.toFixed(1)}%
                              </div>
                              <div className="text-xs text-muted-foreground">
                                {character._count.contents} pieces
                              </div>
                            </div>
                          </div>
                        </CardContent>
                      </Card>
                    ))}
                  </div>
                </div>
              ))}
            </TabsContent>

            <TabsContent value="performance" className="space-y-4">
              <div className="space-y-4">
                {characters
                  .sort((a, b) => b.performanceScore - a.performanceScore)
                  .map((character, index) => (
                    <Card key={character.id}>
                      <CardContent className="p-4">
                        <div className="flex items-center justify-between">
                          <div className="flex items-center gap-4">
                            <div className="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-bold">
                              {index + 1}
                            </div>
                            <div>
                              <h4 className="font-semibold">{character.code}</h4>
                              <p className="text-sm text-muted-foreground">
                                {character.ethnicity} • {character.aestheticType}
                              </p>
                            </div>
                          </div>
                          <div className="flex items-center gap-4">
                            <Badge className={getEthnicityColor(character.ethnicity)}>
                              {character.ethnicity}
                            </Badge>
                            <div className="text-right">
                              <div className={`font-bold text-lg ${getPerformanceColor(character.performanceScore)}`}>
                                {character.performanceScore.toFixed(1)}%
                              </div>
                              <div className="text-xs text-muted-foreground">
                                {character._count.contents} pieces
                              </div>
                            </div>
                          </div>
                        </div>
                      </CardContent>
                    </Card>
                  ))}
              </div>
            </TabsContent>
          </Tabs>
        )}
      </div>
    </div>
  );
}


==========================================
FILE: src\app\content-queue\JobDetailModal.tsx
==========================================
"use client"

import { Dialog, DialogContent, DialogHeader, DialogTitle } from "@/components/ui/dialog"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { useState, useEffect } from "react"

export default function JobDetailModal({ job, onClose }) {
  const [fullJob, setFullJob] = useState<any>(job)
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    async function load() {
      const res = await fetch(`/api/queue/status/${job.id}`)
      const data = await res.json()
      setFullJob(data.job)
      setLoading(false)
    }
    load()
  }, [job.id])

  if (!job) return null

  return (
    <Dialog open={true} onOpenChange={onClose}>
      <DialogContent className="max-w-2xl">
        <DialogHeader>
          <DialogTitle>Job Details</DialogTitle>
        </DialogHeader>

        {loading ? (
          <p>Loading…</p>
        ) : (
          <div className="space-y-4">
            <div>
              <p className="font-medium">{fullJob.type}</p>
              <Badge>{fullJob.status}</Badge>
            </div>

            <pre className="bg-black/10 p-3 rounded text-xs overflow-auto max-h-64">
              {JSON.stringify(fullJob, null, 2)}
            </pre>

            <Button onClick={onClose}>Close</Button>
          </div>
        )}
      </DialogContent>
    </Dialog>
  )
}


==========================================
FILE: src\app\content-queue\page.tsx
==========================================
"use client"

import { useEffect, useState } from "react"
import { useSocket } from "@/hooks/use-socket"
import {
  Card,
  CardHeader,
  CardTitle,
  CardContent,
} from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import JobDetailModal from "./JobDetailModal"

export default function ContentQueuePage() {
  const socket = useSocket()

  const [jobs, setJobs] = useState<any[]>([])
  const [loading, setLoading] = useState(true)
  const [selectedJob, setSelectedJob] = useState<any>(null)
  const [error, setError] = useState<string | null>(null)

  // Load initial jobs
  useEffect(() => {
    async function load() {
      try {
        const res = await fetch("/api/queue")
        if (!res.ok) throw new Error("Failed to load queue")
        const data = await res.json()
        setJobs(data.jobs || [])
      } catch (e) {
        setError("Unable to load job queue.")
      }
      setLoading(false)
    }
    load()
  }, [])

  // WebSocket live updates
  useEffect(() => {
    if (!socket) return

    socket.on("job_update", (job) => {
      setJobs((prev) => {
        const others = prev.filter((j) => j.id !== job.id)
        return [job, ...others].slice(0, 40)
      })
    })

    socket.on("job_new", (job) => {
      setJobs((prev) => [job, ...prev].slice(0, 40))
    })

    return () => {
      socket.off("job_update")
      socket.off("job_new")
    }
  }, [socket])

  if (loading)
    return (
      <div className="p-10 text-center text-2xl">Loading content queue…</div>
    )

  return (
    <div className="p-8 space-y-8">
      <h1 className="text-4xl font-bold">Content Queue</h1>
      <p className="text-muted-foreground">
        Real-time job processing for all AI generation.
      </p>

      {error && <p className="text-red-500">{error}</p>}

      <Card>
        <CardHeader>
          <CardTitle>Recent Jobs</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          {jobs.map((job) => (
            <div
              key={job.id}
              onClick={() => setSelectedJob(job)}
              className="p-3 rounded border hover:bg-muted cursor-pointer flex justify-between items-center"
            >
              <div>
                <p className="font-medium">{job.type}</p>
                <p className="text-xs text-muted-foreground">
                  {job.createdAt}
                </p>
              </div>
              <Badge
                variant={
                  job.status === "completed"
                    ? "default"
                    : job.status === "processing"
                    ? "secondary"
                    : job.status === "failed"
                    ? "destructive"
                    : "outline"
                }
              >
                {job.status}
              </Badge>
            </div>
          ))}
        </CardContent>
      </Card>

      {selectedJob && (
        <JobDetailModal
          job={selectedJob}
          onClose={() => setSelectedJob(null)}
        />
      )}
    </div>
  )
}


==========================================
FILE: src\app\dashboard\page.tsx
==========================================
"use client"

import { useEffect, useState } from "react"
import { Card, CardHeader, CardTitle, CardContent } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Separator } from "@/components/ui/separator"
import { useSocket } from "@/hooks/use-socket"
import { Bar, BarChart, XAxis, YAxis, Tooltip, ResponsiveContainer } from "recharts"
import Link from "next/link"

export default function DashboardPage() {
  const socket = useSocket()

  // --- STATE ---
  const [loading, setLoading] = useState(true)
  const [stats, setStats] = useState<any>({})
  const [recentJobs, setRecentJobs] = useState<any[]>([])
  const [recentContent, setRecentContent] = useState<any[]>([])
  const [director, setDirector] = useState<any>(null)
  const [characters, setCharacters] = useState<any[]>([])
  const [error, setError] = useState<string | null>(null)

  // --- LOAD INITIAL DATA ---
  useEffect(() => {
    async function load() {
      try {
        const res = await fetch("/api/analytics/summary")
        const data = await res.json()
        setStats(data.stats || {})
        setRecentJobs(data.recentJobs || [])
        setRecentContent(data.recentContent || [])
        setCharacters(data.characters || [])
        setDirector(data.director || null)
      } catch (e) {
        setError("Failed to load dashboard.")
      }
      setLoading(false)
    }
    load()
  }, [])

  // --- SOCKET (LIVE UPDATES) ---
  useEffect(() => {
    if (!socket) return

    socket.on("job_update", (job) => {
      setRecentJobs((prev) => {
        const existing = prev.filter((j) => j.id !== job.id)
        return [job, ...existing].slice(0, 10)
      })
    })

    socket.on("director_update", (data) => setDirector(data))

    return () => {
      socket.off("job_update")
      socket.off("director_update")
    }
  }, [socket])

  // --- ACTIONS ---
  async function generateTestImage() {
    await fetch("/api/generate/image", { method: "POST" })
  }

  async function generateTestVideo() {
    await fetch("/api/generate/video", { method: "POST" })
  }

  async function runDirector() {
    await fetch("/api/director/plan", { method: "POST" })
  }

  async function syncTikTok() {
    await fetch("/api/social/tiktok", { method: "POST" })
  }

  if (loading) {
    return (
      <div className="p-10 text-center text-2xl font-medium">
        Loading dashboard…
      </div>
    )
  }

  return (
    <div className="p-8 space-y-8">

      {/* TITLE */}
      <div>
        <h1 className="text-4xl font-bold tracking-tight">AI Creator Studio Dashboard</h1>
        <p className="text-muted-foreground mt-1">
          Real-time control center for all AI-generated content.
        </p>
      </div>

      {error && <p className="text-red-500">{error}</p>}

      {/* TOP GRID */}
      <div className="grid grid-cols-1 md:grid-cols-3 gap-6">

        {/* METRICS */}
        <Card>
          <CardHeader>
            <CardTitle>Stats Overview</CardTitle>
          </CardHeader>
          <CardContent className="space-y-2">
            <p>Total Characters: {stats.totalCharacters}</p>
            <p>Total Content: {stats.totalContent}</p>
            <p>Jobs Pending: {stats.pendingJobs}</p>
            <p>Jobs Completed: {stats.completedJobs}</p>
          </CardContent>
        </Card>

        {/* ACTIONS */}
        <Card>
          <CardHeader>
            <CardTitle>Quick Actions</CardTitle>
          </CardHeader>
          <CardContent className="flex flex-col space-y-3">
            <Button onClick={generateTestImage}>Generate Test Image</Button>
            <Button onClick={generateTestVideo}>Generate Test Video</Button>
            <Button onClick={runDirector}>Run Director AI</Button>
            <Button onClick={syncTikTok}>Sync TikTok</Button>
          </CardContent>
        </Card>

        {/* DIRECTOR STATUS */}
        <Card>
          <CardHeader>
            <CardTitle>AI Director Status</CardTitle>
          </CardHeader>
          <CardContent>
            {director ? (
              <pre className="text-xs bg-black/10 p-2 rounded overflow-auto h-40">
                {JSON.stringify(director, null, 2)}
              </pre>
            ) : (
              <p>No director data yet.</p>
            )}
          </CardContent>
        </Card>
      </div>

      <Separator />

      {/* CHARACTERS */}
      <Card>
        <CardHeader>
          <CardTitle>Characters</CardTitle>
        </CardHeader>
        <CardContent className="grid grid-cols-2 md:grid-cols-6 gap-4">
          {characters.map((c: any) => (
            <div key={c.id} className="text-center bg-muted/30 p-3 rounded">
              <p className="font-medium">{c.code}</p>
              <p className="text-xs text-muted-foreground">{c.ethnicity}</p>
            </div>
          ))}
        </CardContent>
      </Card>

      {/* RECENT JOBS */}
      <Card>
        <CardHeader>
          <CardTitle>Recent Job Queue</CardTitle>
        </CardHeader>
        <CardContent className="space-y-2">
          {recentJobs.map((job) => (
            <div key={job.id} className="p-2 bg-muted/20 rounded">
              <p className="font-medium">{job.type}</p>
              <p className="text-xs text-muted-foreground">Status: {job.status}</p>
            </div>
          ))}
        </CardContent>
      </Card>

      {/* RECENT CONTENT */}
      <Card>
        <CardHeader>
          <CardTitle>Recent Content</CardTitle>
        </CardHeader>
        <CardContent className="grid grid-cols-2 md:grid-cols-4 gap-4">
          {recentContent.map((item) => (
            <div key={item.id} className="bg-muted/20 p-3 rounded text-center">
              <p className="text-xs">{item.aesthetic}</p>
              <p className="text-muted-foreground text-xs">{item.id}</p>
            </div>
          ))}
        </CardContent>
      </Card>

      {/* PERFORMANCE CHART */}
      <Card>
        <CardHeader>
          <CardTitle>Engagement Performance</CardTitle>
        </CardHeader>
        <CardContent style={{ height: 250 }}>
          <ResponsiveContainer width="100%" height="100%">
            <BarChart data={stats.weeklyEngagement || []}>
              <XAxis dataKey="day" />
              <YAxis />
              <Tooltip />
              <Bar dataKey="engagement" fill="#22c55e" />
            </BarChart>
          </ResponsiveContainer>
        </CardContent>
      </Card>

    </div>
  )
}


==========================================
FILE: src\app\layout.tsx
==========================================
'use client';

import { useEffect } from 'react';
import { SessionProvider } from 'next-auth/react';
import { startScheduler } from "@/lib/scheduler/automated-scheduler";

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  // Start scheduler when app loads
  useEffect(() => {
    try {
      startScheduler();
    } catch (error) {
      console.error('Scheduler failed to start:', error);
    }
  }, []);

  return (
    <html lang="en">
      <body className="antialiased">
        <SessionProvider session={null}>
          {children}
        </SessionProvider>
      </body>
    </html>
  );
}


==========================================
FILE: src\app\login\page.tsx
==========================================
'use client';

import { useState } from 'react';
import { signIn, getSession } from 'next-auth/react';
import { useRouter } from 'next/navigation';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Alert, AlertDescription } from '@/components/ui/alert';
import { Loader2, Eye, EyeOff } from 'lucide-react';

export default function LoginPage() {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [showPassword, setShowPassword] = useState(false);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  const router = useRouter();

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);
    setError('');

    try {
      const result = await signIn('credentials', {
        email,
        password,
        redirect: false,
      });

      if (result?.error) {
        setError('Invalid email or password');
      } else {
        // Check if login was successful
        const session = await getSession();
        if (session) {
          router.push('/');
          router.refresh();
        }
      }
    } catch (error) {
      setError('An error occurred during login');
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-background p-4">
      <div className="w-full max-w-md space-y-6">
        {/* Logo and Title */}
        <div className="text-center">
          <h1 className="text-3xl font-bold">AI Creator Studio</h1>
          <p className="text-muted-foreground mt-2">Sign in to your account</p>
        </div>

        {/* Login Form */}
        <Card>
          <CardHeader>
            <CardTitle>Sign In</CardTitle>
            <CardDescription>
              Enter your credentials to access your AI content studio
            </CardDescription>
          </CardHeader>
          <CardContent>
            <form onSubmit={handleSubmit} className="space-y-4">
              {error && (
                <Alert variant="destructive">
                  <AlertDescription>{error}</AlertDescription>
                </Alert>
              )}

              <div className="space-y-2">
                <Label htmlFor="email">Email</Label>
                <Input
                  id="email"
                  type="email"
                  placeholder="name@example.com"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  required
                  disabled={loading}
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="password">Password</Label>
                <div className="relative">
                  <Input
                    id="password"
                    type={showPassword ? 'text' : 'password'}
                    placeholder="Enter your password"
                    value={password}
                    onChange={(e) => setPassword(e.target.value)}
                    required
                    disabled={loading}
                  />
                  <Button
                    type="button"
                    variant="ghost"
                    size="sm"
                    className="absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent"
                    onClick={() => setShowPassword(!showPassword)}
                    disabled={loading}
                  >
                    {showPassword ? (
                      <EyeOff className="h-4 w-4" />
                    ) : (
                      <Eye className="h-4 w-4" />
                    )}
                  </Button>
                </div>
              </div>

              <Button type="submit" className="w-full" disabled={loading}>
                {loading ? (
                  <>
                    <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                    Signing in...
                  </>
                ) : (
                  'Sign In'
                )}
              </Button>
            </form>
          </CardContent>
        </Card>

        {/* Demo Account Info */}
        <Card>
          <CardContent className="pt-6">
            <div className="text-center space-y-2">
              <p className="text-sm text-muted-foreground">
                Demo Account (for testing):
              </p>
              <div className="text-xs bg-muted p-2 rounded">
                <p>Email: demo@aicreator.com</p>
                <p>Password: demo123456</p>
              </div>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
}


==========================================
FILE: src\app\not-found.tsx
==========================================
import { notFound } from 'next/navigation';

export default function NotFound() {
  notFound();
}


==========================================
FILE: src\app\page.tsx
==========================================
import { redirect } from "next/navigation"

export default function Home() {
  redirect("/dashboard")
}


==========================================
FILE: src\app\performance\page.tsx
==========================================
'use client';

import { useEffect, useState } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Progress } from '@/components/ui/progress';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { 
  BarChart3, 
  TrendingUp, 
  Activity, 
  Clock,
  Zap,
  AlertTriangle,
  CheckCircle,
  Cpu,
  Database,
  Globe,
  Users,
  Eye,
  Heart,
  MessageCircle,
  Share2,
  Calendar
} from 'lucide-react';

interface SystemMetrics {
  cpu: number;
  memory: number;
  disk: number;
  network: number;
  uptime: number;
  activeConnections: number;
}

interface PerformanceMetrics {
  responseTime: number;
  throughput: number;
  errorRate: number;
  cacheHitRate: number;
  queueLength: number;
  processingTime: number;
}

interface ContentMetrics {
  totalContent: number;
  dailyGrowth: number;
  avgEngagement: number;
  topPerforming: {
    character: string;
    performance: number;
    content: number;
  }[];
  recentPerformance: {
    date: string;
    views: number;
    engagement: number;
  }[];
}

export default function PerformanceMonitoring() {
  const [systemMetrics, setSystemMetrics] = useState<SystemMetrics>({
    cpu: 0,
    memory: 0,
    disk: 0,
    network: 0,
    uptime: 0,
    activeConnections: 0
  });

  const [performanceMetrics, setPerformanceMetrics] = useState<PerformanceMetrics>({
    responseTime: 0,
    throughput: 0,
    errorRate: 0,
    cacheHitRate: 0,
    queueLength: 0,
    processingTime: 0
  });

  const [contentMetrics, setContentMetrics] = useState<ContentMetrics>({
    totalContent: 0,
    dailyGrowth: 0,
    avgEngagement: 0,
    topPerforming: [],
    recentPerformance: []
  });

  const [alerts, setAlerts] = useState([
    {
      id: '1',
      type: 'warning',
      message: 'High CPU usage detected',
      time: '2 minutes ago',
      icon: AlertTriangle
    },
    {
      id: '2',
      type: 'info',
      message: 'AI Director analysis completed',
      time: '15 minutes ago',
      icon: CheckCircle
    }
  ]);

  useEffect(() => {
    // Simulate real-time metrics updates
    const interval = setInterval(() => {
      setSystemMetrics(prev => ({
        ...prev,
        cpu: Math.random() * 100,
        memory: Math.random() * 100,
        disk: Math.random() * 100,
        network: Math.random() * 100,
        activeConnections: Math.floor(Math.random() * 50) + 10
      }));

      setPerformanceMetrics(prev => ({
        ...prev,
        responseTime: Math.random() * 200 + 50,
        throughput: Math.random() * 1000 + 500,
        errorRate: Math.random() * 5,
        cacheHitRate: Math.random() * 30 + 70,
        queueLength: Math.floor(Math.random() * 20),
        processingTime: Math.random() * 5000 + 1000
      }));
    }, 3000);

    return () => clearInterval(interval);
  }, []);

  useEffect(() => {
    // Fetch content metrics
    const fetchContentMetrics = async () => {
      try {
        const response = await fetch('/api/analytics/summary');
        const data = await response.json();
        
        setContentMetrics({
          totalContent: data.totalContent || 156,
          dailyGrowth: data.dailyGrowth || 12,
          avgEngagement: data.avgEngagement || 8.5,
          topPerforming: [
            { character: 'ID_01_A', performance: 92, content: 24 },
            { character: 'ID_03_B', performance: 88, content: 18 },
            { character: 'ID_05_C', performance: 85, content: 22 }
          ],
          recentPerformance: [
            { date: 'Mon', views: 12500, engagement: 8.2 },
            { date: 'Tue', views: 15200, engagement: 9.1 },
            { date: 'Wed', views: 18900, engagement: 8.8 },
            { date: 'Thu', views: 22100, engagement: 9.5 },
            { date: 'Fri', views: 25800, engagement: 8.9 },
            { date: 'Sat', views: 31200, engagement: 9.2 },
            { date: 'Sun', views: 28900, engagement: 8.7 }
          ]
        });
      } catch (error) {
        console.error('Failed to fetch content metrics:', error);
      }
    };

    fetchContentMetrics();
    const interval = setInterval(fetchContentMetrics, 30000);
    return () => clearInterval(interval);
  }, []);

  const getStatusColor = (value: number, thresholds: { good: number; warning: number }) => {
    if (value <= thresholds.good) return 'text-green-500';
    if (value <= thresholds.warning) return 'text-yellow-500';
    return 'text-red-500';
  };

  const getAlertVariant = (type: string) => {
    switch (type) {
      case 'error': return 'destructive';
      case 'warning': return 'secondary';
      default: return 'default';
    }
  };

  return (
    <div className="min-h-screen bg-background p-4 md:p-6">
      <div className="max-w-7xl mx-auto space-y-4 md:space-y-6">
        {/* Header */}
        <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
          <div>
            <h1 className="text-2xl md:text-3xl font-bold tracking-tight">Performance Monitoring</h1>
            <p className="text-sm md:text-base text-muted-foreground">
              Real-time system and content performance metrics
            </p>
          </div>
          <div className="flex items-center gap-2">
            <Badge variant="outline" className="gap-1">
              <Activity className="w-3 h-3" />
              Live Monitoring
            </Badge>
            <Badge variant="secondary">Last updated: {new Date().toLocaleTimeString()}</Badge>
          </div>
        </div>

        {/* Alerts */}
        {alerts.length > 0 && (
          <div className="space-y-2">
            {alerts.map((alert) => (
              <Card key={alert.id} className="border-l-4 border-l-yellow-500">
                <CardContent className="p-3">
                  <div className="flex items-center gap-3">
                    <alert.icon className="w-4 h-4 text-yellow-500" />
                    <div className="flex-1">
                      <p className="text-sm font-medium">{alert.message}</p>
                      <p className="text-xs text-muted-foreground">{alert.time}</p>
                    </div>
                    <Badge variant={getAlertVariant(alert.type)} className="text-xs">
                      {alert.type}
                    </Badge>
                  </div>
                </CardContent>
              </Card>
            ))}
          </div>
        )}

        {/* Main Metrics Grid */}
        <div className="grid gap-4 grid-cols-2 sm:grid-cols-3 lg:grid-cols-6">
          <Card className="p-3 sm:p-4">
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-xs sm:text-sm font-medium">CPU Usage</CardTitle>
              <Cpu className="h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent className="p-0">
              <div className={`text-lg sm:text-2xl font-bold ${getStatusColor(systemMetrics.cpu, { good: 50, warning: 80 })}`}>
                {Math.round(systemMetrics.cpu)}%
              </div>
              <Progress value={systemMetrics.cpu} className="mt-2" />
            </CardContent>
          </Card>

          <Card className="p-3 sm:p-4">
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-xs sm:text-sm font-medium">Memory</CardTitle>
              <Database className="h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent className="p-0">
              <div className={`text-lg sm:text-2xl font-bold ${getStatusColor(systemMetrics.memory, { good: 60, warning: 85 })}`}>
                {Math.round(systemMetrics.memory)}%
              </div>
              <Progress value={systemMetrics.memory} className="mt-2" />
            </CardContent>
          </Card>

          <Card className="p-3 sm:p-4">
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-xs sm:text-sm font-medium">Response Time</CardTitle>
              <Clock className="h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent className="p-0">
              <div className={`text-lg sm:text-2xl font-bold ${getStatusColor(performanceMetrics.responseTime, { good: 100, warning: 200 })}`}>
                {Math.round(performanceMetrics.responseTime)}ms
              </div>
              <p className="text-xs text-muted-foreground">Avg response</p>
            </CardContent>
          </Card>

          <Card className="p-3 sm:p-4">
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-xs sm:text-sm font-medium">Throughput</CardTitle>
              <Zap className="h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent className="p-0">
              <div className="text-lg sm:text-2xl font-bold text-green-500">
                {Math.round(performanceMetrics.throughput)}
              </div>
              <p className="text-xs text-muted-foreground">Req/sec</p>
            </CardContent>
          </Card>

          <Card className="p-3 sm:p-4">
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-xs sm:text-sm font-medium">Error Rate</CardTitle>
              <AlertTriangle className="h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent className="p-0">
              <div className={`text-lg sm:text-2xl font-bold ${getStatusColor(performanceMetrics.errorRate, { good: 1, warning: 3 })}`}>
                {performanceMetrics.errorRate.toFixed(1)}%
              </div>
              <p className="text-xs text-muted-foreground">Last hour</p>
            </CardContent>
          </Card>

          <Card className="p-3 sm:p-4">
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-xs sm:text-sm font-medium">Queue Length</CardTitle>
              <BarChart3 className="h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent className="p-0">
              <div className="text-lg sm:text-2xl font-bold">
                {performanceMetrics.queueLength}
              </div>
              <p className="text-xs text-muted-foreground">Jobs pending</p>
            </CardContent>
          </Card>
        </div>

        {/* Detailed Performance Tabs */}
        <Tabs defaultValue="system" className="space-y-4">
          <TabsList className="w-full flex flex-wrap h-auto p-1">
            <TabsTrigger value="system" className="flex-1 min-w-[100px] text-xs">System</TabsTrigger>
            <TabsTrigger value="content" className="flex-1 min-w-[100px] text-xs">Content</TabsTrigger>
            <TabsTrigger value="analytics" className="flex-1 min-w-[100px] text-xs">Analytics</TabsTrigger>
            <TabsTrigger value="alerts" className="flex-1 min-w-[100px] text-xs">Alerts</TabsTrigger>
          </TabsList>

          <TabsContent value="system" className="space-y-4">
            <div className="grid gap-4 lg:grid-cols-2">
              <Card>
                <CardHeader>
                  <CardTitle className="text-base md:text-lg">System Resources</CardTitle>
                  <CardDescription className="text-sm">
                    Real-time system resource utilization
                  </CardDescription>
                </CardHeader>
                <CardContent className="space-y-4">
                  <div className="space-y-2">
                    <div className="flex justify-between text-sm">
                      <span>CPU Usage</span>
                      <span>{Math.round(systemMetrics.cpu)}%</span>
                    </div>
                    <Progress value={systemMetrics.cpu} />
                  </div>
                  <div className="space-y-2">
                    <div className="flex justify-between text-sm">
                      <span>Memory Usage</span>
                      <span>{Math.round(systemMetrics.memory)}%</span>
                    </div>
                    <Progress value={systemMetrics.memory} />
                  </div>
                  <div className="space-y-2">
                    <div className="flex justify-between text-sm">
                      <span>Disk Usage</span>
                      <span>{Math.round(systemMetrics.disk)}%</span>
                    </div>
                    <Progress value={systemMetrics.disk} />
                  </div>
                  <div className="space-y-2">
                    <div className="flex justify-between text-sm">
                      <span>Network I/O</span>
                      <span>{Math.round(systemMetrics.network)}%</span>
                    </div>
                    <Progress value={systemMetrics.network} />
                  </div>
                </CardContent>
              </Card>

              <Card>
                <CardHeader>
                  <CardTitle className="text-base md:text-lg">Performance Metrics</CardTitle>
                  <CardDescription className="text-sm">
                    Application performance indicators
                  </CardDescription>
                </CardHeader>
                <CardContent className="space-y-4">
                  <div className="grid grid-cols-2 gap-4">
                    <div className="text-center">
                      <div className="text-2xl font-bold">{Math.round(performanceMetrics.responseTime)}ms</div>
                      <p className="text-xs text-muted-foreground">Avg Response</p>
                    </div>
                    <div className="text-center">
                      <div className="text-2xl font-bold">{Math.round(performanceMetrics.throughput)}</div>
                      <p className="text-xs text-muted-foreground">Requests/sec</p>
                    </div>
                    <div className="text-center">
                      <div className="text-2xl font-bold">{performanceMetrics.cacheHitRate.toFixed(1)}%</div>
                      <p className="text-xs text-muted-foreground">Cache Hit Rate</p>
                    </div>
                    <div className="text-center">
                      <div className="text-2xl font-bold">{Math.round(performanceMetrics.processingTime / 1000)}s</div>
                      <p className="text-xs text-muted-foreground">Processing Time</p>
                    </div>
                  </div>
                </CardContent>
              </Card>
            </div>
          </TabsContent>

          <TabsContent value="content" className="space-y-4">
            <div className="grid gap-4 lg:grid-cols-2">
              <Card>
                <CardHeader>
                  <CardTitle className="text-base md:text-lg">Content Performance</CardTitle>
                  <CardDescription className="text-sm">
                    Content generation and engagement metrics
                  </CardDescription>
                </CardHeader>
                <CardContent className="space-y-4">
                  <div className="grid grid-cols-2 gap-4">
                    <div className="text-center">
                      <div className="text-2xl font-bold">{contentMetrics.totalContent}</div>
                      <p className="text-xs text-muted-foreground">Total Content</p>
                    </div>
                    <div className="text-center">
                      <div className="text-2xl font-bold text-green-500">+{contentMetrics.dailyGrowth}</div>
                      <p className="text-xs text-muted-foreground">Daily Growth</p>
                    </div>
                    <div className="text-center">
                      <div className="text-2xl font-bold">{contentMetrics.avgEngagement}%</div>
                      <p className="text-xs text-muted-foreground">Avg Engagement</p>
                    </div>
                    <div className="text-center">
                      <div className="text-2xl font-bold">{systemMetrics.activeConnections}</div>
                      <p className="text-xs text-muted-foreground">Active Users</p>
                    </div>
                  </div>
                </CardContent>
              </Card>

              <Card>
                <CardHeader>
                  <CardTitle className="text-base md:text-lg">Top Performing Characters</CardTitle>
                  <CardDescription className="text-sm">
                    Characters with highest engagement rates
                  </CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="space-y-3">
                    {contentMetrics.topPerforming.map((character, index) => (
                      <div key={character.character} className="flex items-center justify-between">
                        <div className="flex items-center gap-2">
                          <Badge variant="outline" className="text-xs">
                            #{index + 1}
                          </Badge>
                          <span className="text-sm font-medium">{character.character}</span>
                        </div>
                        <div className="flex items-center gap-2">
                          <span className="text-sm text-muted-foreground">{character.content} content</span>
                          <Badge variant="secondary" className="text-xs">
                            {character.performance}%
                          </Badge>
                        </div>
                      </div>
                    ))}
                  </div>
                </CardContent>
              </Card>
            </div>
          </TabsContent>

          <TabsContent value="analytics" className="space-y-4">
            <Card>
              <CardHeader>
                <CardTitle className="text-base md:text-lg">Weekly Performance</CardTitle>
                <CardDescription className="text-sm">
                  Content views and engagement trends
                </CardDescription>
              </CardHeader>
              <CardContent>
                <div className="space-y-4">
                  {contentMetrics.recentPerformance.map((day) => (
                    <div key={day.date} className="flex items-center justify-between p-3 border rounded-lg">
                      <div className="flex items-center gap-3">
                        <Calendar className="w-4 h-4 text-muted-foreground" />
                        <span className="font-medium text-sm">{day.date}</span>
                      </div>
                      <div className="flex items-center gap-4">
                        <div className="flex items-center gap-1">
                          <Eye className="w-3 h-3 text-blue-500" />
                          <span className="text-sm">{day.views.toLocaleString()}</span>
                        </div>
                        <div className="flex items-center gap-1">
                          <Heart className="w-3 h-3 text-red-500" />
                          <span className="text-sm">{day.engagement}%</span>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </CardContent>
            </Card>
          </TabsContent>

          <TabsContent value="alerts" className="space-y-4">
            <Card>
              <CardHeader>
                <CardTitle className="text-base md:text-lg">System Alerts</CardTitle>
                <CardDescription className="text-sm">
                  Recent system notifications and warnings
                </CardDescription>
              </CardHeader>
              <CardContent>
                <div className="space-y-3">
                  {alerts.map((alert) => (
                    <div key={alert.id} className="flex items-center gap-3 p-3 border rounded-lg">
                      <alert.icon className="w-4 h-4 text-yellow-500" />
                      <div className="flex-1">
                        <p className="text-sm font-medium">{alert.message}</p>
                        <p className="text-xs text-muted-foreground">{alert.time}</p>
                      </div>
                      <Badge variant={getAlertVariant(alert.type)} className="text-xs">
                        {alert.type}
                      </Badge>
                    </div>
                  ))}
                </div>
              </CardContent>
            </Card>
          </TabsContent>
        </Tabs>
      </div>
    </div>
  );
}


==========================================
FILE: src\app\projects\[id]\AddSceneModal.tsx
==========================================
"use client"

import { useState } from "react"
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
  DialogFooter,
} from "@/components/ui/dialog"

import { Input } from "@/components/ui/input"
import { Textarea } from "@/components/ui/textarea"
import { Button } from "@/components/ui/button"

export default function AddSceneModal({ open, onClose, projectId }) {
  const [title, setTitle] = useState("")
  const [description, setDescription] = useState("")
  const [camera, setCamera] = useState("")
  const [loading, setLoading] = useState(false)

  async function createScene() {
    setLoading(true)
    await fetch(`/api/projects/${projectId}`, {
      method: "POST",
      body: JSON.stringify({
        type: "createScene",
        title,
        description,
        camera,
      }),
    })
    setLoading(false)
    onClose()
  }

  return (
    <Dialog open={open} onOpenChange={onClose}>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Add New Scene</DialogTitle>
        </DialogHeader>

        <div className="space-y-4">
          <Input
            placeholder="Scene Title"
            value={title}
            onChange={(e) => setTitle(e.target.value)}
          />

          <Textarea
            placeholder="Scene Description"
            value={description}
            onChange={(e) => setDescription(e.target.value)}
          />

          <Textarea
            placeholder="Camera Notes (optional)"
            value={camera}
            onChange={(e) => setCamera(e.target.value)}
          />
        </div>

        <DialogFooter>
          <Button variant="outline" onClick={onClose}>Cancel</Button>

          <Button onClick={createScene} disabled={loading}>
            {loading ? "Creating…" : "Create Scene"}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  )
}


==========================================
FILE: src\app\projects\[id]\DirectorPanel.tsx
==========================================
"use client"

import { useState } from "react"
import { Card, CardHeader, CardTitle, CardContent } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Textarea } from "@/components/ui/textarea"

export default function DirectorPanel({ projectId }) {
  const [notes, setNotes] = useState("")
  const [loading, setLoading] = useState(false)
  const [result, setResult] = useState<any>(null)

  async function runDirector() {
    setLoading(true)
    try {
      const res = await fetch("/api/director/plan", {
        method: "POST",
        body: JSON.stringify({
          projectId,
          notes,
        })
      })

      const data = await res.json()
      setResult(data)
      
      // Auto-refresh project after Director completes
      if (data.success) {
        window.location.reload()
      }
    } catch (err) {
      console.error("Director error", err)
    }
    setLoading(false)
  }

  return (
    <Card className="mt-6">
      <CardHeader>
        <CardTitle>Director AI</CardTitle>
      </CardHeader>

      <CardContent className="space-y-6">

        <Textarea
          placeholder="Add director notes (optional)…"
          value={notes}
          onChange={(e) => setNotes(e.target.value)}
        />

        <Button onClick={runDirector} disabled={loading}>
          {loading ? "Directing…" : "Run Director"}
        </Button>

        {result && (
          <div className="bg-muted p-4 rounded-lg border mt-4 text-sm">
            <pre className="whitespace-pre-wrap">
              {JSON.stringify(result.plan, null, 2)}
            </pre>
          </div>
        )}
      </CardContent>
    </Card>
  )
}


==========================================
FILE: src\app\projects\[id]\page.tsx
==========================================
"use client"

import { useEffect, useState } from "react"
import { useParams } from "next/navigation"
import { Card, CardHeader, CardTitle, CardContent } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import SceneCard from "./SceneCard"
import AddSceneModal from "./AddSceneModal"
import DirectorPanel from "./DirectorPanel"
import { useSocket } from "@/hooks/use-socket"

export default function ProjectDetailPage() {
  const { id } = useParams()
  const [project, setProject] = useState<any>(null)
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<string | null>(null)
  const [showAddScene, setShowAddScene] = useState(false)

  const socket = useSocket()

  async function loadProject() {
    try {
      const res = await fetch(`/api/projects/${id}`)
      if (!res.ok) throw new Error("Failed to load project")
      const data = await res.json()
      setProject(data.project)
    } catch (e) {
      setError("Unable to load project data.")
    }
    setLoading(false)
  }

  // Load project initially
  useEffect(() => {
    if (id) loadProject()
  }, [id])

  // Listen for job updates via socket
  useEffect(() => {
    if (!socket) return
    socket.on("job_update", loadProject)
    socket.on("job_new", loadProject)
    return () => {
      socket.off("job_update", loadProject)
      socket.off("job_new", loadProject)
    }
  }, [socket])

  if (loading)
    return <div className="p-10 text-center text-2xl">Loading project…</div>

  if (!project)
    return <div className="p-10 text-center text-red-500">{error}</div>

  return (
    <div className="p-8 space-y-8">

      {/* PROJECT HEADER */}
      <Card>
        <CardHeader>
          <CardTitle>{project.title}</CardTitle>
          <p className="text-muted-foreground">{project.description}</p>
        </CardHeader>
        <CardContent className="flex gap-4">

          <Button onClick={() => setShowAddScene(true)}>
            Add Scene
          </Button>

          <Button variant="secondary" onClick={() => alert("Director Plan in 2B-2")}>
            Run Director
          </Button>

          <Button variant="outline" onClick={() => alert("Batch generation in 2B-3")}>
            Generate All Scenes
          </Button>
        </CardContent>
      </Card>

      {/* DIRECTOR PANEL */}
      <DirectorPanel
        projectId={id}
      />

      {/* SCENE LIST */}
      <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
        {project.scenes?.map((scene: any) => (
          <SceneCard key={scene.id} scene={scene} />
        ))}
      </div>

      {/* ADD SCENE MODAL */}
      <AddSceneModal
        open={showAddScene}
        onClose={() => {
          setShowAddScene(false)
          loadProject()
        }}
        projectId={id}
      />
    </div>
  )
}


==========================================
FILE: src\app\projects\[id]\SceneCard.tsx
==========================================
"use client"

import { Card, CardHeader, CardTitle, CardContent } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { useState } from "react"

export default function SceneCard({ scene }) {
  const [loadingImg, setLoadingImg] = useState(false)
  const [loadingVid, setLoadingVid] = useState(false)

  async function generateImage() {
    setLoadingImg(true)
    await fetch("/api/generate/image", {
      method: "POST",
      body: JSON.stringify({
        prompt: scene.prompt,
        sceneId: scene.id,
        projectId: scene.projectId,
      }),
    })
    setLoadingImg(false)
  }

  async function generateVideo() {
    setLoadingVid(true)
    await fetch("/api/generate/video", {
      method: "POST",
      body: JSON.stringify({
        prompt: scene.prompt,
        sceneId: scene.id,
        projectId: scene.projectId,
      }),
    })
    setLoadingVid(false)
  }

  return (
    <Card>
      <CardHeader>
        <CardTitle className="flex justify-between">
          <span>{scene.title || `Scene ${scene.index}`}</span>
          <Badge>{scene.status || "pending"}</Badge>
        </CardTitle>
      </CardHeader>

      <CardContent className="space-y-3">
        <p className="text-muted-foreground text-sm">{scene.description}</p>

        <div className="flex gap-3">
          <Button disabled={loadingImg} onClick={generateImage}>
            {loadingImg ? "Generating…" : "Image"}
          </Button>

          <Button
            disabled={loadingVid}
            onClick={generateVideo}
            variant="secondary"
          >
            {loadingVid ? "Generating…" : "Video"}
          </Button>
        </div>
      </CardContent>
    </Card>
  )
}


==========================================
FILE: src\app\projects\CreateProjectModal.tsx
==========================================
"use client"

import { Dialog, DialogContent, DialogHeader, DialogTitle } from "@/components/ui/dialog"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Textarea } from "@/components/ui/textarea"
import { useState } from "react"

export default function CreateProjectModal({ onClose }) {
  const [title, setTitle] = useState("")
  const [description, setDescription] = useState("")
  const [loading, setLoading] = useState(false)

  async function createProject() {
    setLoading(true)
    await fetch("/api/projects", {
      method: "POST",
      body: JSON.stringify({ title, description }),
    })
    setLoading(false)
    onClose()
    window.location.reload()
  }

  return (
    <Dialog open={true} onOpenChange={onClose}>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>Create New Project</DialogTitle>
        </DialogHeader>

        <div className="space-y-4">
          <Input
            placeholder="Project Title"
            value={title}
            onChange={(e) => setTitle(e.target.value)}
          />
          <Textarea
            placeholder="Description (optional)"
            value={description}
            onChange={(e) => setDescription(e.target.value)}
          />

          <Button disabled={loading} onClick={createProject} className="w-full">
            {loading ? "Creating…" : "Create Project"}
          </Button>
        </div>
      </DialogContent>
    </Dialog>
  )
}


==========================================
FILE: src\app\projects\page.tsx
==========================================
"use client"

import { useEffect, useState } from "react"
import Link from "next/link"
import { Card, CardHeader, CardTitle, CardContent } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import CreateProjectModal from "./CreateProjectModal"

export default function ProjectsPage() {
  const [projects, setProjects] = useState<any[]>([])
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<string | null>(null)
  const [showCreateModal, setShowCreateModal] = useState(false)

  useEffect(() => {
    async function load() {
      try {
        const res = await fetch("/api/projects")
        if (!res.ok) throw new Error("Failed to load projects")
        const data = await res.json()
        setProjects(data.projects || [])
      } catch (e) {
        setError("Unable to load projects.")
      }
      setLoading(false)
    }
    load()
  }, [])

  if (loading)
    return (
      <div className="p-10 text-center text-2xl">
        Loading projects…
      </div>
    )

  return (
    <div className="p-8 space-y-8">
      <div className="flex justify-between items-center">
        <div>
          <h1 className="text-4xl font-bold">Projects</h1>
          <p className="text-muted-foreground">
            Organize scenes, run Director AI, and generate content at scale.
          </p>
        </div>
        <Button size="lg" onClick={() => setShowCreateModal(true)}>
          New Project
        </Button>
      </div>

      {error && <p className="text-red-500">{error}</p>}

      <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
        {projects.map((p) => (
          <Link key={p.id} href={`/projects/${p.id}`}>
            <Card className="cursor-pointer hover:bg-muted/20 transition p-4">
              <CardHeader>
                <CardTitle>{p.title}</CardTitle>
              </CardHeader>
              <CardContent className="space-y-2">
                <p className="text-sm text-muted-foreground">{p.description}</p>
                <p className="text-xs">
                  Scenes: <strong>{p.scenes?.length || 0}</strong>
                </p>
                <p className="text-xs">
                  Jobs: <strong>{p.jobCount || 0}</strong>
                </p>
              </CardContent>
            </Card>
          </Link>
        ))}
      </div>

      {showCreateModal && (
        <CreateProjectModal onClose={() => setShowCreateModal(false)} />
      )}
    </div>
  )
}


==========================================
FILE: src\app\settings\api-keys\page.tsx
==========================================
'use client';

import { useEffect, useState } from 'react';
import { useSession } from 'next-auth/react';
import { useRouter } from 'next/navigation';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Badge } from '@/components/ui/badge';
import { Alert, AlertDescription } from '@/components/ui/alert';
import { 
  Dialog, 
  DialogContent, 
  DialogDescription, 
  DialogFooter, 
  DialogHeader, 
  DialogTitle, 
  DialogTrigger 
} from '@/components/ui/dialog';
import { 
  Plus, 
  Copy, 
  Trash2, 
  Eye, 
  EyeOff, 
  Key,
  CheckCircle,
  AlertTriangle,
  Calendar
} from 'lucide-react';

interface ApiKey {
  id: string;
  key: string;
  label: string;
  isActive: boolean;
  lastUsedAt?: string;
  createdAt: string;
  hasFullKey?: boolean;
}

export default function ApiKeysPage() {
  const { data: session, status } = useSession();
  const router = useRouter();
  const [apiKeys, setApiKeys] = useState<ApiKey[]>([]);
  const [loading, setLoading] = useState(true);
  const [creating, setCreating] = useState(false);
  const [newKey, setNewKey] = useState<ApiKey | null>(null);
  const [showKey, setShowKey] = useState<{ [key: string]: boolean }>({});
  const [editingKey, setEditingKey] = useState<ApiKey | null>(null);
  const [newLabel, setNewLabel] = useState('');

  useEffect(() => {
    if (status === 'unauthenticated') {
      router.push('/login');
      return;
    }
    
    if (status === 'authenticated') {
      fetchApiKeys();
    }
  }, [status, router]);

  const fetchApiKeys = async () => {
    try {
      const response = await fetch('/api/api-keys');
      const data = await response.json();
      if (data.success) {
        setApiKeys(data.apiKeys || []);
      }
    } catch (error) {
      console.error('Error fetching API keys:', error);
    } finally {
      setLoading(false);
    }
  };

  const createApiKey = async () => {
    setCreating(true);
    try {
      const response = await fetch('/api/api-keys/create', {
        method: 'POST'
      });
      const data = await response.json();
      if (data.success) {
        setNewKey(data.apiKey);
        await fetchApiKeys(); // Refresh the list
      }
    } catch (error) {
      console.error('Error creating API key:', error);
    } finally {
      setCreating(false);
    }
  };

  const copyToClipboard = async (text: string) => {
    try {
      await navigator.clipboard.writeText(text);
      // You could add a toast notification here
    } catch (error) {
      console.error('Failed to copy:', error);
    }
  };

  const updateApiKey = async (keyId: string, updates: { label?: string; isActive?: boolean }) => {
    try {
      const response = await fetch(`/api/api-keys/${keyId}`, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(updates)
      });
      const data = await response.json();
      if (data.success) {
        await fetchApiKeys(); // Refresh the list
        setEditingKey(null);
        setNewLabel('');
      }
    } catch (error) {
      console.error('Error updating API key:', error);
    }
  };

  const deleteApiKey = async (keyId: string) => {
    if (!confirm('Are you sure you want to delete this API key? This action cannot be undone.')) {
      return;
    }

    try {
      const response = await fetch(`/api/api-keys/${keyId}`, {
        method: 'DELETE'
      });
      const data = await response.json();
      if (data.success) {
        await fetchApiKeys(); // Refresh the list
      }
    } catch (error) {
      console.error('Error deleting API key:', error);
    }
  };

  const formatDate = (dateString: string) => {
    return new Date(dateString).toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  };

  if (status === 'loading' || loading) {
    return (
      <div className="min-h-screen bg-background p-6">
        <div className="max-w-4xl mx-auto">
          <div className="flex items-center justify-center h-96">
            <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-background p-6">
      <div className="max-w-4xl mx-auto space-y-6">
        {/* Header */}
        <div className="flex items-center justify-between">
          <div>
            <h1 className="text-3xl font-bold tracking-tight">API Keys</h1>
            <p className="text-muted-foreground">
              Manage your API keys for accessing AI Creator Studio services
            </p>
          </div>
          
          <Dialog open={!!newKey} onOpenChange={(open) => !open && setNewKey(null)}>
            <DialogTrigger asChild>
              <Button onClick={createApiKey} disabled={creating} className="gap-2">
                <Plus className="w-4 h-4" />
                {creating ? 'Creating...' : 'Create API Key'}
              </Button>
            </DialogTrigger>
            <DialogContent>
              <DialogHeader>
                <DialogTitle>API Key Created</DialogTitle>
                <DialogDescription>
                  Copy this API key now. You won't be able to see it again.
                </DialogDescription>
              </DialogHeader>
              <div className="space-y-4">
                <div className="bg-muted p-3 rounded-lg">
                  <div className="flex items-center justify-between">
                    <code className="text-sm font-mono break-all">
                      {showKey[newKey?.key || ''] ? newKey?.key : `${newKey?.key?.substring(0, 12)}...${newKey?.key?.substring(newKey.key.length - 4)}`}
                    </code>
                    <Button
                      variant="ghost"
                      size="sm"
                      onClick={() => {
                        copyToClipboard(newKey?.key || '');
                        setShowKey({ ...showKey, [newKey?.key || '']: !showKey[newKey?.key || ''] });
                      }}
                    >
                      {showKey[newKey?.key || ''] ? <EyeOff className="w-4 h-4" /> : <Eye className="w-4 h-4" />}
                    </Button>
                  </div>
                </div>
                <div className="flex gap-2">
                  <Button 
                    onClick={() => copyToClipboard(newKey?.key || '')}
                    className="flex-1 gap-2"
                  >
                    <Copy className="w-4 h-4" />
                    Copy Key
                  </Button>
                </div>
              </div>
            </DialogContent>
          </Dialog>
        </div>

        {/* API Keys List */}
        <Card>
          <CardHeader>
            <CardTitle>Your API Keys</CardTitle>
            <CardDescription>
              These keys allow you to access AI Creator Studio APIs programmatically
            </CardDescription>
          </CardHeader>
          <CardContent>
            {apiKeys.length === 0 ? (
              <div className="text-center py-8">
                <Key className="w-12 h-12 text-muted-foreground mx-auto mb-4" />
                <h3 className="text-lg font-semibold mb-2">No API Keys Yet</h3>
                <p className="text-muted-foreground mb-4">
                  Create your first API key to start using the AI Creator Studio API.
                </p>
                <Button onClick={createApiKey} disabled={creating} className="gap-2">
                  <Plus className="w-4 h-4" />
                  {creating ? 'Creating...' : 'Create API Key'}
                </Button>
              </div>
            ) : (
              <div className="space-y-4">
                {apiKeys.map((apiKey) => (
                  <div key={apiKey.id} className="border rounded-lg p-4 space-y-3">
                    <div className="flex items-start justify-between">
                      <div className="space-y-2">
                        <div className="flex items-center gap-2">
                          <Key className="w-4 h-4 text-muted-foreground" />
                          {editingKey?.id === apiKey.id ? (
                            <Input
                              value={newLabel}
                              onChange={(e) => setNewLabel(e.target.value)}
                              className="h-7 w-48"
                              placeholder="Enter label"
                            />
                          ) : (
                            <span className="font-medium">{apiKey.label}</span>
                          )}
                          <Badge variant={apiKey.isActive ? "default" : "secondary"}>
                            {apiKey.isActive ? 'Active' : 'Inactive'}
                          </Badge>
                        </div>
                        <div className="text-sm text-muted-foreground font-mono">
                          {apiKey.key}
                        </div>
                        <div className="flex items-center gap-4 text-xs text-muted-foreground">
                          <div className="flex items-center gap-1">
                            <Calendar className="w-3 h-3" />
                            Created: {formatDate(apiKey.createdAt)}
                          </div>
                          {apiKey.lastUsedAt && (
                            <div className="flex items-center gap-1">
                              <CheckCircle className="w-3 h-3" />
                              Last used: {formatDate(apiKey.lastUsedAt)}
                            </div>
                          )}
                        </div>
                      </div>
                      
                      <div className="flex items-center gap-2">
                        {editingKey?.id === apiKey.id ? (
                          <div className="flex gap-1">
                            <Button
                              size="sm"
                              onClick={() => updateApiKey(apiKey.id, { label: newLabel })}
                            >
                              Save
                            </Button>
                            <Button
                              size="sm"
                              variant="outline"
                              onClick={() => {
                                setEditingKey(null);
                                setNewLabel('');
                              }}
                            >
                              Cancel
                            </Button>
                          </div>
                        ) : (
                          <>
                            <Button
                              size="sm"
                              variant="outline"
                              onClick={() => {
                                setEditingKey(apiKey);
                                setNewLabel(apiKey.label);
                              }}
                            >
                              Edit
                            </Button>
                            <Button
                              size="sm"
                              variant="outline"
                              onClick={() => updateApiKey(apiKey.id, { isActive: !apiKey.isActive })}
                            >
                              {apiKey.isActive ? 'Disable' : 'Enable'}
                            </Button>
                            <Button
                              size="sm"
                              variant="destructive"
                              onClick={() => deleteApiKey(apiKey.id)}
                            >
                              <Trash2 className="w-4 h-4" />
                            </Button>
                          </>
                        )}
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            )}
          </CardContent>
        </Card>

        {/* API Usage Info */}
        <Alert>
          <AlertTriangle className="h-4 w-4" />
          <AlertDescription>
            <strong>Important:</strong> Keep your API keys secure and never share them publicly. 
            API keys have full access to your account and can be used to generate content, 
            view analytics, and manage your AI Creator Studio resources.
          </AlertDescription>
        </Alert>
      </div>
    </div>
  );
}


==========================================
FILE: src\app\settings\social\page.tsx
==========================================
"use client"

import { useState, useEffect } from "react"
import { Card, CardHeader, CardTitle, CardContent } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Badge } from "@/components/ui/badge"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { useSession } from "next-auth/react"
import { useRouter } from "next/navigation"

export default function SocialSettingsPage() {
  const { data: session } = useSession()
  const router = useRouter()
  const [activeTab, setActiveTab] = useState("overview")
  const [tiktokStatus, setTikTokStatus] = useState("disconnected")
  const [showAccountModal, setShowAccountModal] = useState(false)
  const [accounts, setAccounts] = useState([])

  // Load TikTok accounts from database
  useEffect(() => {
    // In a real implementation, you would fetch from API
    // For now, use mock data
    setAccounts([
      {
        id: "demo_account",
        email: "demo@tiktok.com",
        username: "Demo User",
        followers: 12500,
        verified: true,
        connected: true,
        accessToken: "mock_access_token",
        expiresAt: new Date().getTime() + 864000000
      },
      {
        id: "test_account",
        email: "test@tiktok.com",
        username: "Test User",
        followers: 500,
        verified: false,
        connected: false,
        accessToken: null,
        expiresAt: null
      }
    ])
    setTikTokStatus("connected")
  }, [])

  const handleConnectAccount = async (accountId: string) => {
    setTikTokStatus("connecting")
    
    // In a real implementation, you would redirect to TikTok OAuth
    console.log(`Connecting to TikTok account: ${accountId}`)
    
    // Mock OAuth flow
    setTimeout(() => {
      setTikTokStatus("connected")
    }, 2000)
  }

  const handleDisconnectAccount = async (accountId: string) => {
    setTikTokStatus("disconnected")
    console.log(`Disconnected from TikTok account: ${accountId}`)

    // Mock disconnection
    setTimeout(() => {
      setTikTokStatus("disconnected")
    }, 1000)
  }

  const handleDeleteAccount = async (accountId: string) => {
    // In a real implementation, you would delete from database
    console.log(`Deleting TikTok account: ${accountId}`)
    setAccounts(prev => prev.filter(acc => acc.id !== accountId))
  }

  const handleOpenAccountModal = () => {
    setShowAccountModal(true)
  }

  const handleCloseAccountModal = () => {
    setShowAccountModal(false)
  }

  const handleAddAccount = async (formData: FormData) => {
    const email = formData.get('email') as string
    const username = formData.get('username') as string
    const password = formData.get('password') as string

    // In a real implementation, you would create the account via TikTok API
    console.log(`Creating TikTok account: ${email}`)
    
    // Mock account creation
    const newAccount = {
      id: `account_${Date.now()}`,
      email,
      username,
      verified: false,
      followers: 0,
      connected: false,
      accessToken: "mock_access_token",
      expiresAt: new Date().getTime() + 864000000
    }

    setAccounts(prev => [...prev, newAccount])
    setShowAccountModal(false)
  }

  return (
    <div className="p-8 space-y-8">
      <Card>
        <CardHeader>
          <CardTitle>TikTok Accounts</CardTitle>
        </CardHeader>
        <CardContent>
          <div className="flex justify-between items-center mb-4">
            <Badge variant={tiktokStatus === "connected" ? "default" : "secondary"}>
              {tiktokStatus === "connected" ? "Connected" : "Disconnected"}
            </Badge>
            <Button onClick={handleOpenAccountModal}>
              Add Account
            </Button>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            {accounts.map((account) => (
              <Card key={account.id} className="p-4 border rounded-lg hover:bg-muted cursor-pointer">
                <CardHeader>
                  <CardTitle className="text-sm">{account.username}</CardTitle>
                  <div className="flex justify-between items-center">
                    <Badge variant={account.verified ? "default" : "secondary"}>
                      {account.verified ? "Verified" : "Unverified"}
                    </Badge>
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={() => handleConnectAccount(account.id)}
                    >
                      {tikTokStatus === "connecting" ? "Connecting..." : "Connect"}
                    </Button>
                    <Button
                      variant="outline"
                      size="sm"
                      onClick={() => handleDisconnectAccount(account.id)}
                    >
                      {tiktokStatus === "disconnecting" ? "Disconnecting..." : "Disconnect"}
                    </Button>
                  </div>
                </CardHeader>
                <CardContent>
                  <div className="text-sm text-muted-foreground">
                    <p>Followers: {account.followers.toLocaleString()}</p>
                    <p>Verified: {account.verified ? "Yes" : "No"}</p>
                    <p>Connected: {account.connected ? "Yes" : "No"}</p>
                  </div>
                </CardContent>
              </Card>
            ))}
          </div>
        </CardContent>
      </Card>

    </div>
  )
}

// Simple Account Modal Component
function AccountModal({ open, onClose, onAddAccount }: any) {
  if (!open) return null

  return (
    <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
      <Card className="w-full max-w-md">
        <CardHeader>
          <CardTitle>Add TikTok Account</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          <Input placeholder="Email" type="email" />
          <Input placeholder="Username" />
          <Input placeholder="Password" type="password" />
          <div className="flex gap-2">
            <Button onClick={onClose} variant="outline" className="flex-1">
              Cancel
            </Button>
            <Button onClick={onClose} className="flex-1">
              Add Account
            </Button>
          </div>
        </CardContent>
      </Card>
    </div>
  )
}


==========================================
FILE: src\app\simple-dashboard.tsx
==========================================
'use client';

import { useState, useEffect } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { useSimpleSocket } from '@/hooks/use-simple-socket';
import { 
  BarChart3, 
  Users, 
  Video, 
  Clock,
  TrendingUp,
  Calendar,
  Settings,
  Activity,
  Zap
} from 'lucide-react';

export default function SimpleDashboard() {
  const { isConnected, lastUpdate, emit } = useSimpleSocket();
  
  const [stats, setStats] = useState({
    totalContent: 156,
    activeCharacters: 12,
    renderingQueue: 3,
    todayPosts: 8,
    avgPerformance: 87,
    weeklyGrowth: 15
  });

  const [systemStatus, setSystemStatus] = useState({
    api: 'operational',
    database: 'operational',
    aiDirector: 'operational',
    tiktok: 'configured'
  });

  useEffect(() => {
    // Simulate real-time updates
    const interval = setInterval(() => {
      setStats(prev => ({
        ...prev,
        totalContent: prev.totalContent + Math.floor(Math.random() * 3),
        renderingQueue: Math.max(0, prev.renderingQueue + (Math.random() > 0.7 ? 1 : -1))
      }));
    }, 5000);

    return () => clearInterval(interval);
  }, []);

  const getStatusColor = (status: string) => {
    switch (status) {
      case 'operational': return 'bg-green-500';
      case 'warning': return 'bg-yellow-500';
      case 'error': return 'bg-red-500';
      default: return 'bg-gray-500';
    }
  };

  return (
    <div className="min-h-screen bg-background p-4 md:p-6">
      <div className="max-w-7xl mx-auto space-y-4 md:space-y-6">
        {/* Header */}
        <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
          <div>
            <h1 className="text-2xl md:text-3xl font-bold tracking-tight">AI Creator Studio</h1>
            <p className="text-sm md:text-base text-muted-foreground">
              Stable dashboard - core functionality working
            </p>
          </div>
          <div className="flex items-center gap-2">
            <Badge variant={isConnected ? "default" : "destructive"} className="gap-1">
              <Activity className="w-3 h-3" />
              {isConnected ? "Connected" : "Offline"}
            </Badge>
            <Badge variant="secondary">Stable</Badge>
            <Button variant="outline" size="sm">
              <Settings className="w-4 h-4" />
            </Button>
          </div>
        </div>

        {/* System Status */}
        <div className="grid gap-4 grid-cols-2 md:grid-cols-4">
          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">API Status</CardTitle>
              <div className={`w-3 h-3 rounded-full ${getStatusColor(systemStatus.api)}`}></div>
            </CardHeader>
            <CardContent>
              <p className="text-xs text-muted-foreground">Core APIs</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Database</CardTitle>
              <div className={`w-3 h-3 rounded-full ${getStatusColor(systemStatus.database)}`}></div>
            </CardHeader>
            <CardContent>
              <p className="text-xs text-muted-foreground">Connected</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">AI Director</CardTitle>
              <div className={`w-3 h-3 rounded-full ${getStatusColor(systemStatus.aiDirector)}`}></div>
            </CardHeader>
            <CardContent>
              <p className="text-xs text-muted-foreground">GLM-4.6 Ready</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">TikTok API</CardTitle>
              <div className={`w-3 h-3 rounded-full ${getStatusColor(systemStatus.tiktok)}`}></div>
            </CardHeader>
            <CardContent>
              <p className="text-xs text-muted-foreground">Configured</p>
            </CardContent>
          </Card>
        </div>

        {/* Main Stats Grid */}
        <div className="grid gap-4 grid-cols-2 sm:grid-cols-3 lg:grid-cols-6">
          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Total Content</CardTitle>
              <Video className="h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-lg sm:text-2xl font-bold">{stats.totalContent}</div>
              <p className="text-xs text-muted-foreground">+12% from last week</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Active Characters</CardTitle>
              <Users className="h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-lg sm:text-2xl font-bold">{stats.activeCharacters}/18</div>
              <p className="text-xs text-muted-foreground">3 top performers</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Rendering Queue</CardTitle>
              <Clock className="h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-lg sm:text-2xl font-bold">{stats.renderingQueue}</div>
              <p className="text-xs text-muted-foreground">2 processing</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Today's Posts</CardTitle>
              <Calendar className="h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-lg sm:text-2xl font-bold">{stats.todayPosts}</div>
              <p className="text-xs text-muted-foreground">3 scheduled</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Avg Performance</CardTitle>
              <TrendingUp className="h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-lg sm:text-2xl font-bold">{stats.avgPerformance}%</div>
              <p className="text-xs text-muted-foreground">+5% improvement</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Weekly Growth</CardTitle>
              <BarChart3 className="h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-lg sm:text-2xl font-bold">+{stats.weeklyGrowth}%</div>
              <p className="text-xs text-muted-foreground">Views & engagement</p>
            </CardContent>
          </Card>
        </div>

        {/* Status Messages */}
        <div className="space-y-4">
          <Card>
            <CardHeader>
              <CardTitle>System Status</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="space-y-2">
                <div className="flex items-center gap-2">
                  <div className="w-3 h-3 bg-green-500 rounded-full"></div>
                  <span className="text-sm">Core platform stable</span>
                </div>
                <div className="flex items-center gap-2">
                  <div className="w-3 h-3 bg-yellow-500 rounded-full"></div>
                  <span className="text-sm">Advanced features in development</span>
                </div>
                <div className="text-xs text-muted-foreground mt-2">
                  Last update: {lastUpdate}
                </div>
              </div>
            </CardContent>
          </Card>

          <Card>
            <CardHeader>
              <CardTitle>Quick Actions</CardTitle>
            </CardHeader>
            <CardContent>
              <div className="flex gap-2">
                <Button variant="outline" size="sm" onClick={() => emit('test', { message: 'Test connection' })}>
                  <Zap className="w-4 h-4 mr-2" />
                  Test Connection
                </Button>
                <Button variant="outline" size="sm" onClick={() => setStats(prev => ({ ...prev, totalContent: prev.totalContent + 1 }))}>
                  <Activity className="w-4 h-4 mr-2" />
                  Refresh Stats
                </Button>
                <Button variant="outline" size="sm">
                  <Settings className="w-4 h-4 mr-2" />
                  Settings
                </Button>
              </div>
            </CardContent>
          </Card>
        </div>
      </div>
    </div>
  );
}


==========================================
FILE: src\app\trends\page.tsx
==========================================
'use client';

import { useEffect, useState } from 'react';
import { useSession } from 'next-auth/react';
import { useRouter } from 'next/navigation';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Progress } from '@/components/ui/progress';
import { 
  TrendingUp, 
  Hash,
  Music,
  Eye,
  Play,
  Clock,
  RefreshCw,
  Filter,
  BarChart3
} from 'lucide-react';

interface Trend {
  id: string;
  type: 'hashtag' | 'sound' | 'visual' | 'pacing';
  title: string;
  description: string;
  popularity: number;
  metadata: any;
  source: string;
  isActive: boolean;
  discoveredAt: string;
  expiresAt: string;
}

export default function TrendsPage() {
  const { data: session, status } = useSession();
  const router = useRouter();
  
  const [trends, setTrends] = useState<Trend[]>([]);
  const [loading, setLoading] = useState(true);
  const [activeTab, setActiveTab] = useState('all');

  useEffect(() => {
    if (status === 'unauthenticated') {
      router.push('/login');
      return;
    }
    
    if (status === 'authenticated') {
      fetchTrends();
    }
  }, [status, router]);

  const fetchTrends = async () => {
    try {
      const response = await fetch('/api/trends/tiktok');
      const data = await response.json();
      setTrends(data.trends || []);
    } catch (error) {
      console.error('Error fetching trends:', error);
    } finally {
      setLoading(false);
    }
  };

  const getTypeIcon = (type: string) => {
    switch (type) {
      case 'hashtag': return <Hash className="w-4 h-4" />;
      case 'sound': return <Music className="w-4 h-4" />;
      case 'visual': return <Eye className="w-4 h-4" />;
      case 'pacing': return <Play className="w-4 h-4" />;
      default: return <BarChart3 className="w-4 h-4" />;
    }
  };

  const getTypeColor = (type: string) => {
    switch (type) {
      case 'hashtag': return 'bg-blue-100 text-blue-800';
      case 'sound': return 'bg-green-100 text-green-800';
      case 'visual': return 'bg-purple-100 text-purple-800';
      case 'pacing': return 'bg-orange-100 text-orange-800';
      default: return 'bg-gray-100 text-gray-800';
    }
  };

  const filteredTrends = activeTab === 'all' ? trends : trends.filter(trend => trend.type === activeTab);

  const getExpirationDays = (expiresAt: string) => {
    const now = new Date();
    const expiry = new Date(expiresAt);
    const diffTime = expiry.getTime() - now.getTime();
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    return diffDays;
  };

  if (loading) {
    return (
      <div className="min-h-screen bg-background p-6">
        <div className="max-w-7xl mx-auto">
          <div className="flex items-center justify-center h-96">
            <RefreshCw className="w-8 h-8 animate-spin" />
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-background p-6">
      <div className="max-w-7xl mx-auto space-y-6">
        {/* Header */}
        <div className="flex items-center justify-between">
          <div>
            <h1 className="text-3xl font-bold tracking-tight">Trends</h1>
            <p className="text-muted-foreground">
              Monitor trending topics, sounds, and visual styles for content creation
            </p>
          </div>
          <Button variant="outline" onClick={fetchTrends} className="gap-2">
            <RefreshCw className="w-4 h-4" />
            Refresh
          </Button>
        </div>

        {/* Stats Overview */}
        <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Total Trends</CardTitle>
              <TrendingUp className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">{trends.length}</div>
              <p className="text-xs text-muted-foreground">Active trends</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Avg Popularity</CardTitle>
              <BarChart3 className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">
                {trends.length > 0 ? Math.round(trends.reduce((sum, trend) => sum + trend.popularity, 0) / trends.length) : 0}
              </div>
              <p className="text-xs text-muted-foreground">Score</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Expiring Soon</CardTitle>
              <Clock className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">
                {trends.filter(trend => {
                  const days = getExpirationDays(trend.expiresAt);
                  return days <= 7;
                }).length}
              </div>
              <p className="text-xs text-muted-foreground">In 7 days</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">New This Week</CardTitle>
              <TrendingUp className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">
                {trends.filter(trend => {
                  const discovered = new Date(trend.discoveredAt);
                  const weekAgo = new Date(Date.now() - 7 * 24 * 60 * 60 * 1000);
                  return discovered > weekAgo;
                }).length}
              </div>
              <p className="text-xs text-muted-foreground">Trends</p>
            </CardContent>
          </Card>
        </div>

        {/* Trends List */}
        <Card>
          <CardHeader>
            <CardTitle>Trending Topics</CardTitle>
            <CardDescription>
              Current trending content on TikTok with performance metrics
            </CardDescription>
          </CardHeader>
          <CardContent>
            <Tabs value={activeTab} onValueChange={setActiveTab}>
              <TabsList>
                <TabsTrigger value="all">All Trends</TabsTrigger>
                <TabsTrigger value="hashtag">Hashtags</TabsTrigger>
                <TabsTrigger value="sound">Sounds</TabsTrigger>
                <TabsTrigger value="visual">Visuals</TabsTrigger>
                <TabsTrigger value="pacing">Pacing</TabsTrigger>
              </TabsList>

              <TabsContent value="all" className="space-y-4">
                <div className="grid gap-4 md:grid-cols-2">
                  {filteredTrends.map((trend) => (
                    <div key={trend.id} className="border rounded-lg p-4">
                      <div className="flex items-start justify-between">
                        <div className="flex items-center gap-3">
                          <div className={`p-2 rounded-full ${getTypeColor(trend.type)}`}>
                            {getTypeIcon(trend.type)}
                          </div>
                          <div>
                            <h4 className="font-semibold">{trend.title}</h4>
                            <p className="text-sm text-muted-foreground mt-1">
                              {trend.description}
                            </p>
                            <div className="flex items-center gap-2 mt-2">
                              <Badge variant="outline" className="capitalize">
                                {trend.type}
                              </Badge>
                              <Badge variant="secondary">
                                {trend.source}
                              </Badge>
                            </div>
                          </div>
                        </div>
                        <div className="text-right">
                          <div className="text-lg font-bold">{trend.popularity.toFixed(1)}</div>
                          <p className="text-xs text-muted-foreground">popularity</p>
                        </div>
                      </div>
                      <div className="mt-3">
                        <div className="flex items-center justify-between text-sm">
                          <span>Expires in {getExpirationDays(trend.expiresAt)} days</span>
                          <Progress value={Math.max(0, 100 - (getExpirationDays(trend.expiresAt) / 30) * 100)} className="w-24" />
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </TabsContent>

              {['hashtag', 'sound', 'visual', 'pacing'].map((type) => (
                <TabsContent key={type} value={type} className="space-y-4">
                  <div className="grid gap-4 md:grid-cols-2">
                    {trends.filter(trend => trend.type === type).map((trend) => (
                      <div key={trend.id} className="border rounded-lg p-4">
                        <div className="flex items-start justify-between">
                          <div className="flex items-center gap-3">
                            <div className={`p-2 rounded-full ${getTypeColor(trend.type)}`}>
                              {getTypeIcon(trend.type)}
                            </div>
                            <div>
                              <h4 className="font-semibold">{trend.title}</h4>
                              <p className="text-sm text-muted-foreground mt-1">
                                {trend.description}
                              </p>
                              <div className="flex items-center gap-2 mt-2">
                                <Badge variant="outline" className="capitalize">
                                  {trend.type}
                                </Badge>
                                <Badge variant="secondary">
                                  {trend.source}
                                </Badge>
                              </div>
                            </div>
                          </div>
                          <div className="text-right">
                            <div className="text-lg font-bold">{trend.popularity.toFixed(1)}</div>
                            <p className="text-xs text-muted-foreground">popularity</p>
                          </div>
                        </div>
                        <div className="mt-3">
                          <div className="text-sm text-muted-foreground">
                            {trend.metadata && Object.keys(trend.metadata).length > 0 && (
                              <div className="space-y-1">
                                {Object.entries(trend.metadata).map(([key, value]) => (
                                  <div key={key} className="flex justify-between">
                                    <span className="capitalize">{key.replace(/_/g, ' ')}:</span>
                                    <span>{String(value)}</span>
                                  </div>
                                ))}
                              </div>
                            )}
                          </div>
                          <div className="flex items-center justify-between text-sm">
                            <span>Expires in {getExpirationDays(trend.expiresAt)} days</span>
                            <Progress value={Math.max(0, 100 - (getExpirationDays(trend.expiresAt) / 30) * 100)} className="w-24" />
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                </TabsContent>
              ))}
            </Tabs>
          </CardContent>
        </Card>
      </div>
    </div>
  );
}


==========================================
FILE: src\components\providers.tsx
==========================================
'use client';

import { SessionProvider } from 'next-auth/react';

interface ProvidersProps {
  children: React.ReactNode;
}

export function Providers({ children }: ProvidersProps) {
  return <SessionProvider>{children}</SessionProvider>;
}


==========================================
FILE: src\components\ui\accordion.tsx
==========================================
"use client"

import * as React from "react"
import * as AccordionPrimitive from "@radix-ui/react-accordion"
import { ChevronDownIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Accordion({
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Root>) {
  return <AccordionPrimitive.Root data-slot="accordion" {...props} />
}

function AccordionItem({
  className,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Item>) {
  return (
    <AccordionPrimitive.Item
      data-slot="accordion-item"
      className={cn("border-b last:border-b-0", className)}
      {...props}
    />
  )
}

function AccordionTrigger({
  className,
  children,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Trigger>) {
  return (
    <AccordionPrimitive.Header className="flex">
      <AccordionPrimitive.Trigger
        data-slot="accordion-trigger"
        className={cn(
          "focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",
          className
        )}
        {...props}
      >
        {children}
        <ChevronDownIcon className="text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200" />
      </AccordionPrimitive.Trigger>
    </AccordionPrimitive.Header>
  )
}

function AccordionContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Content>) {
  return (
    <AccordionPrimitive.Content
      data-slot="accordion-content"
      className="data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm"
      {...props}
    >
      <div className={cn("pt-0 pb-4", className)}>{children}</div>
    </AccordionPrimitive.Content>
  )
}

export { Accordion, AccordionItem, AccordionTrigger, AccordionContent }



==========================================
FILE: src\components\ui\alert.tsx
==========================================
import * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const alertVariants = cva(
  "relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",
  {
    variants: {
      variant: {
        default: "bg-card text-card-foreground",
        destructive:
          "text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

function Alert({
  className,
  variant,
  ...props
}: React.ComponentProps<"div"> & VariantProps<typeof alertVariants>) {
  return (
    <div
      data-slot="alert"
      role="alert"
      className={cn(alertVariants({ variant }), className)}
      {...props}
    />
  )
}

function AlertTitle({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-title"
      className={cn(
        "col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",
        className
      )}
      {...props}
    />
  )
}

function AlertDescription({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-description"
      className={cn(
        "text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",
        className
      )}
      {...props}
    />
  )
}

export { Alert, AlertTitle, AlertDescription }



==========================================
FILE: src\components\ui\alert-dialog.tsx
==========================================
"use client"

import * as React from "react"
import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog"

import { cn } from "@/lib/utils"
import { buttonVariants } from "@/components/ui/button"

function AlertDialog({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {
  return <AlertDialogPrimitive.Root data-slot="alert-dialog" {...props} />
}

function AlertDialogTrigger({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {
  return (
    <AlertDialogPrimitive.Trigger data-slot="alert-dialog-trigger" {...props} />
  )
}

function AlertDialogPortal({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {
  return (
    <AlertDialogPrimitive.Portal data-slot="alert-dialog-portal" {...props} />
  )
}

function AlertDialogOverlay({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {
  return (
    <AlertDialogPrimitive.Overlay
      data-slot="alert-dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props}
    />
  )
}

function AlertDialogContent({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {
  return (
    <AlertDialogPortal>
      <AlertDialogOverlay />
      <AlertDialogPrimitive.Content
        data-slot="alert-dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className
        )}
        {...props}
      />
    </AlertDialogPortal>
  )
}

function AlertDialogHeader({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props}
    />
  )
}

function AlertDialogFooter({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="alert-dialog-footer"
      className={cn(
        "flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",
        className
      )}
      {...props}
    />
  )
}

function AlertDialogTitle({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {
  return (
    <AlertDialogPrimitive.Title
      data-slot="alert-dialog-title"
      className={cn("text-lg font-semibold", className)}
      {...props}
    />
  )
}

function AlertDialogDescription({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {
  return (
    <AlertDialogPrimitive.Description
      data-slot="alert-dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  )
}

function AlertDialogAction({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {
  return (
    <AlertDialogPrimitive.Action
      className={cn(buttonVariants(), className)}
      {...props}
    />
  )
}

function AlertDialogCancel({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {
  return (
    <AlertDialogPrimitive.Cancel
      className={cn(buttonVariants({ variant: "outline" }), className)}
      {...props}
    />
  )
}

export {
  AlertDialog,
  AlertDialogPortal,
  AlertDialogOverlay,
  AlertDialogTrigger,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogFooter,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogAction,
  AlertDialogCancel,
}



==========================================
FILE: src\components\ui\aspect-ratio.tsx
==========================================
"use client"

import * as AspectRatioPrimitive from "@radix-ui/react-aspect-ratio"

function AspectRatio({
  ...props
}: React.ComponentProps<typeof AspectRatioPrimitive.Root>) {
  return <AspectRatioPrimitive.Root data-slot="aspect-ratio" {...props} />
}

export { AspectRatio }



==========================================
FILE: src\components\ui\avatar.tsx
==========================================
"use client"

import * as React from "react"
import * as AvatarPrimitive from "@radix-ui/react-avatar"

import { cn } from "@/lib/utils"

function Avatar({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Root>) {
  return (
    <AvatarPrimitive.Root
      data-slot="avatar"
      className={cn(
        "relative flex size-8 shrink-0 overflow-hidden rounded-full",
        className
      )}
      {...props}
    />
  )
}

function AvatarImage({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Image>) {
  return (
    <AvatarPrimitive.Image
      data-slot="avatar-image"
      className={cn("aspect-square size-full", className)}
      {...props}
    />
  )
}

function AvatarFallback({
  className,
  ...props
}: React.ComponentProps<typeof AvatarPrimitive.Fallback>) {
  return (
    <AvatarPrimitive.Fallback
      data-slot="avatar-fallback"
      className={cn(
        "bg-muted flex size-full items-center justify-center rounded-full",
        className
      )}
      {...props}
    />
  )
}

export { Avatar, AvatarImage, AvatarFallback }



==========================================
FILE: src\components\ui\badge.tsx
==========================================
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const badgeVariants = cva(
  "inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",
  {
    variants: {
      variant: {
        default:
          "border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",
        secondary:
          "border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",
        destructive:
          "border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

function Badge({
  className,
  variant,
  asChild = false,
  ...props
}: React.ComponentProps<"span"> &
  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : "span"

  return (
    <Comp
      data-slot="badge"
      className={cn(badgeVariants({ variant }), className)}
      {...props}
    />
  )
}

export { Badge, badgeVariants }



==========================================
FILE: src\components\ui\breadcrumb.tsx
==========================================
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { ChevronRight, MoreHorizontal } from "lucide-react"

import { cn } from "@/lib/utils"

function Breadcrumb({ ...props }: React.ComponentProps<"nav">) {
  return <nav aria-label="breadcrumb" data-slot="breadcrumb" {...props} />
}

function BreadcrumbList({ className, ...props }: React.ComponentProps<"ol">) {
  return (
    <ol
      data-slot="breadcrumb-list"
      className={cn(
        "text-muted-foreground flex flex-wrap items-center gap-1.5 text-sm break-words sm:gap-2.5",
        className
      )}
      {...props}
    />
  )
}

function BreadcrumbItem({ className, ...props }: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="breadcrumb-item"
      className={cn("inline-flex items-center gap-1.5", className)}
      {...props}
    />
  )
}

function BreadcrumbLink({
  asChild,
  className,
  ...props
}: React.ComponentProps<"a"> & {
  asChild?: boolean
}) {
  const Comp = asChild ? Slot : "a"

  return (
    <Comp
      data-slot="breadcrumb-link"
      className={cn("hover:text-foreground transition-colors", className)}
      {...props}
    />
  )
}

function BreadcrumbPage({ className, ...props }: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="breadcrumb-page"
      role="link"
      aria-disabled="true"
      aria-current="page"
      className={cn("text-foreground font-normal", className)}
      {...props}
    />
  )
}

function BreadcrumbSeparator({
  children,
  className,
  ...props
}: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="breadcrumb-separator"
      role="presentation"
      aria-hidden="true"
      className={cn("[&>svg]:size-3.5", className)}
      {...props}
    >
      {children ?? <ChevronRight />}
    </li>
  )
}

function BreadcrumbEllipsis({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="breadcrumb-ellipsis"
      role="presentation"
      aria-hidden="true"
      className={cn("flex size-9 items-center justify-center", className)}
      {...props}
    >
      <MoreHorizontal className="size-4" />
      <span className="sr-only">More</span>
    </span>
  )
}

export {
  Breadcrumb,
  BreadcrumbList,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbPage,
  BreadcrumbSeparator,
  BreadcrumbEllipsis,
}



==========================================
FILE: src\components\ui\button.tsx
==========================================
import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default:
          "bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",
        destructive:
          "bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",
        outline:
          "border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",
        secondary:
          "bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",
        ghost:
          "hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-9 px-4 py-2 has-[>svg]:px-3",
        sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
        lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
        icon: "size-9",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

function Button({
  className,
  variant,
  size,
  asChild = false,
  ...props
}: React.ComponentProps<"button"> &
  VariantProps<typeof buttonVariants> & {
    asChild?: boolean
  }) {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      data-slot="button"
      className={cn(buttonVariants({ variant, size, className }))}
      {...props}
    />
  )
}

export { Button, buttonVariants }



==========================================
FILE: src\components\ui\calendar.tsx
==========================================
"use client"

import * as React from "react"
import {
  ChevronDownIcon,
  ChevronLeftIcon,
  ChevronRightIcon,
} from "lucide-react"
import { DayButton, DayPicker, getDefaultClassNames } from "react-day-picker"

import { cn } from "@/lib/utils"
import { Button, buttonVariants } from "@/components/ui/button"

function Calendar({
  className,
  classNames,
  showOutsideDays = true,
  captionLayout = "label",
  buttonVariant = "ghost",
  formatters,
  components,
  ...props
}: React.ComponentProps<typeof DayPicker> & {
  buttonVariant?: React.ComponentProps<typeof Button>["variant"]
}) {
  const defaultClassNames = getDefaultClassNames()

  return (
    <DayPicker
      showOutsideDays={showOutsideDays}
      className={cn(
        "bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",
        String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,
        String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,
        className
      )}
      captionLayout={captionLayout}
      formatters={{
        formatMonthDropdown: (date) =>
          date.toLocaleString("default", { month: "short" }),
        ...formatters,
      }}
      classNames={{
        root: cn("w-fit", defaultClassNames.root),
        months: cn(
          "flex gap-4 flex-col md:flex-row relative",
          defaultClassNames.months
        ),
        month: cn("flex flex-col w-full gap-4", defaultClassNames.month),
        nav: cn(
          "flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between",
          defaultClassNames.nav
        ),
        button_previous: cn(
          buttonVariants({ variant: buttonVariant }),
          "size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",
          defaultClassNames.button_previous
        ),
        button_next: cn(
          buttonVariants({ variant: buttonVariant }),
          "size-(--cell-size) aria-disabled:opacity-50 p-0 select-none",
          defaultClassNames.button_next
        ),
        month_caption: cn(
          "flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)",
          defaultClassNames.month_caption
        ),
        dropdowns: cn(
          "w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5",
          defaultClassNames.dropdowns
        ),
        dropdown_root: cn(
          "relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md",
          defaultClassNames.dropdown_root
        ),
        dropdown: cn(
          "absolute bg-popover inset-0 opacity-0",
          defaultClassNames.dropdown
        ),
        caption_label: cn(
          "select-none font-medium",
          captionLayout === "label"
            ? "text-sm"
            : "rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5",
          defaultClassNames.caption_label
        ),
        table: "w-full border-collapse",
        weekdays: cn("flex", defaultClassNames.weekdays),
        weekday: cn(
          "text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none",
          defaultClassNames.weekday
        ),
        week: cn("flex w-full mt-2", defaultClassNames.week),
        week_number_header: cn(
          "select-none w-(--cell-size)",
          defaultClassNames.week_number_header
        ),
        week_number: cn(
          "text-[0.8rem] select-none text-muted-foreground",
          defaultClassNames.week_number
        ),
        day: cn(
          "relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none",
          defaultClassNames.day
        ),
        range_start: cn(
          "rounded-l-md bg-accent",
          defaultClassNames.range_start
        ),
        range_middle: cn("rounded-none", defaultClassNames.range_middle),
        range_end: cn("rounded-r-md bg-accent", defaultClassNames.range_end),
        today: cn(
          "bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",
          defaultClassNames.today
        ),
        outside: cn(
          "text-muted-foreground aria-selected:text-muted-foreground",
          defaultClassNames.outside
        ),
        disabled: cn(
          "text-muted-foreground opacity-50",
          defaultClassNames.disabled
        ),
        hidden: cn("invisible", defaultClassNames.hidden),
        ...classNames,
      }}
      components={{
        Root: ({ className, rootRef, ...props }) => {
          return (
            <div
              data-slot="calendar"
              ref={rootRef}
              className={cn(className)}
              {...props}
            />
          )
        },
        Chevron: ({ className, orientation, ...props }) => {
          if (orientation === "left") {
            return (
              <ChevronLeftIcon className={cn("size-4", className)} {...props} />
            )
          }

          if (orientation === "right") {
            return (
              <ChevronRightIcon
                className={cn("size-4", className)}
                {...props}
              />
            )
          }

          return (
            <ChevronDownIcon className={cn("size-4", className)} {...props} />
          )
        },
        DayButton: CalendarDayButton,
        WeekNumber: ({ children, ...props }) => {
          return (
            <td {...props}>
              <div className="flex size-(--cell-size) items-center justify-center text-center">
                {children}
              </div>
            </td>
          )
        },
        ...components,
      }}
      {...props}
    />
  )
}

function CalendarDayButton({
  className,
  day,
  modifiers,
  ...props
}: React.ComponentProps<typeof DayButton>) {
  const defaultClassNames = getDefaultClassNames()

  const ref = React.useRef<HTMLButtonElement>(null)
  React.useEffect(() => {
    if (modifiers.focused) ref.current?.focus()
  }, [modifiers.focused])

  return (
    <Button
      ref={ref}
      variant="ghost"
      size="icon"
      data-day={day.date.toLocaleDateString()}
      data-selected-single={
        modifiers.selected &&
        !modifiers.range_start &&
        !modifiers.range_end &&
        !modifiers.range_middle
      }
      data-range-start={modifiers.range_start}
      data-range-end={modifiers.range_end}
      data-range-middle={modifiers.range_middle}
      className={cn(
        "data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70",
        defaultClassNames.day,
        className
      )}
      {...props}
    />
  )
}

export { Calendar, CalendarDayButton }



==========================================
FILE: src\components\ui\card.tsx
==========================================
import * as React from "react"

import { cn } from "@/lib/utils"

function Card({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card"
      className={cn(
        "bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",
        className
      )}
      {...props}
    />
  )
}

function CardHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-header"
      className={cn(
        "@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",
        className
      )}
      {...props}
    />
  )
}

function CardTitle({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-title"
      className={cn("leading-none font-semibold", className)}
      {...props}
    />
  )
}

function CardDescription({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  )
}

function CardAction({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-action"
      className={cn(
        "col-start-2 row-span-2 row-start-1 self-start justify-self-end",
        className
      )}
      {...props}
    />
  )
}

function CardContent({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-content"
      className={cn("px-6", className)}
      {...props}
    />
  )
}

function CardFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="card-footer"
      className={cn("flex items-center px-6 [.border-t]:pt-6", className)}
      {...props}
    />
  )
}

export {
  Card,
  CardHeader,
  CardFooter,
  CardTitle,
  CardAction,
  CardDescription,
  CardContent,
}



==========================================
FILE: src\components\ui\carousel.tsx
==========================================
"use client"

import * as React from "react"
import useEmblaCarousel, {
  type UseEmblaCarouselType,
} from "embla-carousel-react"
import { ArrowLeft, ArrowRight } from "lucide-react"

import { cn } from "@/lib/utils"
import { Button } from "@/components/ui/button"

type CarouselApi = UseEmblaCarouselType[1]
type UseCarouselParameters = Parameters<typeof useEmblaCarousel>
type CarouselOptions = UseCarouselParameters[0]
type CarouselPlugin = UseCarouselParameters[1]

type CarouselProps = {
  opts?: CarouselOptions
  plugins?: CarouselPlugin
  orientation?: "horizontal" | "vertical"
  setApi?: (api: CarouselApi) => void
}

type CarouselContextProps = {
  carouselRef: ReturnType<typeof useEmblaCarousel>[0]
  api: ReturnType<typeof useEmblaCarousel>[1]
  scrollPrev: () => void
  scrollNext: () => void
  canScrollPrev: boolean
  canScrollNext: boolean
} & CarouselProps

const CarouselContext = React.createContext<CarouselContextProps | null>(null)

function useCarousel() {
  const context = React.useContext(CarouselContext)

  if (!context) {
    throw new Error("useCarousel must be used within a <Carousel />")
  }

  return context
}

function Carousel({
  orientation = "horizontal",
  opts,
  setApi,
  plugins,
  className,
  children,
  ...props
}: React.ComponentProps<"div"> & CarouselProps) {
  const [carouselRef, api] = useEmblaCarousel(
    {
      ...opts,
      axis: orientation === "horizontal" ? "x" : "y",
    },
    plugins
  )
  const [canScrollPrev, setCanScrollPrev] = React.useState(false)
  const [canScrollNext, setCanScrollNext] = React.useState(false)

  const onSelect = React.useCallback((api: CarouselApi) => {
    if (!api) return
    setCanScrollPrev(api.canScrollPrev())
    setCanScrollNext(api.canScrollNext())
  }, [])

  const scrollPrev = React.useCallback(() => {
    api?.scrollPrev()
  }, [api])

  const scrollNext = React.useCallback(() => {
    api?.scrollNext()
  }, [api])

  const handleKeyDown = React.useCallback(
    (event: React.KeyboardEvent<HTMLDivElement>) => {
      if (event.key === "ArrowLeft") {
        event.preventDefault()
        scrollPrev()
      } else if (event.key === "ArrowRight") {
        event.preventDefault()
        scrollNext()
      }
    },
    [scrollPrev, scrollNext]
  )

  React.useEffect(() => {
    if (!api || !setApi) return
    setApi(api)
  }, [api, setApi])

  React.useEffect(() => {
    if (!api) return
    onSelect(api)
    api.on("reInit", onSelect)
    api.on("select", onSelect)

    return () => {
      api?.off("select", onSelect)
    }
  }, [api, onSelect])

  return (
    <CarouselContext.Provider
      value={{
        carouselRef,
        api: api,
        opts,
        orientation:
          orientation || (opts?.axis === "y" ? "vertical" : "horizontal"),
        scrollPrev,
        scrollNext,
        canScrollPrev,
        canScrollNext,
      }}
    >
      <div
        onKeyDownCapture={handleKeyDown}
        className={cn("relative", className)}
        role="region"
        aria-roledescription="carousel"
        data-slot="carousel"
        {...props}
      >
        {children}
      </div>
    </CarouselContext.Provider>
  )
}

function CarouselContent({ className, ...props }: React.ComponentProps<"div">) {
  const { carouselRef, orientation } = useCarousel()

  return (
    <div
      ref={carouselRef}
      className="overflow-hidden"
      data-slot="carousel-content"
    >
      <div
        className={cn(
          "flex",
          orientation === "horizontal" ? "-ml-4" : "-mt-4 flex-col",
          className
        )}
        {...props}
      />
    </div>
  )
}

function CarouselItem({ className, ...props }: React.ComponentProps<"div">) {
  const { orientation } = useCarousel()

  return (
    <div
      role="group"
      aria-roledescription="slide"
      data-slot="carousel-item"
      className={cn(
        "min-w-0 shrink-0 grow-0 basis-full",
        orientation === "horizontal" ? "pl-4" : "pt-4",
        className
      )}
      {...props}
    />
  )
}

function CarouselPrevious({
  className,
  variant = "outline",
  size = "icon",
  ...props
}: React.ComponentProps<typeof Button>) {
  const { orientation, scrollPrev, canScrollPrev } = useCarousel()

  return (
    <Button
      data-slot="carousel-previous"
      variant={variant}
      size={size}
      className={cn(
        "absolute size-8 rounded-full",
        orientation === "horizontal"
          ? "top-1/2 -left-12 -translate-y-1/2"
          : "-top-12 left-1/2 -translate-x-1/2 rotate-90",
        className
      )}
      disabled={!canScrollPrev}
      onClick={scrollPrev}
      {...props}
    >
      <ArrowLeft />
      <span className="sr-only">Previous slide</span>
    </Button>
  )
}

function CarouselNext({
  className,
  variant = "outline",
  size = "icon",
  ...props
}: React.ComponentProps<typeof Button>) {
  const { orientation, scrollNext, canScrollNext } = useCarousel()

  return (
    <Button
      data-slot="carousel-next"
      variant={variant}
      size={size}
      className={cn(
        "absolute size-8 rounded-full",
        orientation === "horizontal"
          ? "top-1/2 -right-12 -translate-y-1/2"
          : "-bottom-12 left-1/2 -translate-x-1/2 rotate-90",
        className
      )}
      disabled={!canScrollNext}
      onClick={scrollNext}
      {...props}
    >
      <ArrowRight />
      <span className="sr-only">Next slide</span>
    </Button>
  )
}

export {
  type CarouselApi,
  Carousel,
  CarouselContent,
  CarouselItem,
  CarouselPrevious,
  CarouselNext,
}



==========================================
FILE: src\components\ui\chart.tsx
==========================================
"use client"

import * as React from "react"
import * as RechartsPrimitive from "recharts"

import { cn } from "@/lib/utils"

// Format: { THEME_NAME: CSS_SELECTOR }
const THEMES = { light: "", dark: ".dark" } as const

export type ChartConfig = {
  [k in string]: {
    label?: React.ReactNode
    icon?: React.ComponentType
  } & (
    | { color?: string; theme?: never }
    | { color?: never; theme: Record<keyof typeof THEMES, string> }
  )
}

type ChartContextProps = {
  config: ChartConfig
}

const ChartContext = React.createContext<ChartContextProps | null>(null)

function useChart() {
  const context = React.useContext(ChartContext)

  if (!context) {
    throw new Error("useChart must be used within a <ChartContainer />")
  }

  return context
}

function ChartContainer({
  id,
  className,
  children,
  config,
  ...props
}: React.ComponentProps<"div"> & {
  config: ChartConfig
  children: React.ComponentProps<
    typeof RechartsPrimitive.ResponsiveContainer
  >["children"]
}) {
  const uniqueId = React.useId()
  const chartId = `chart-${id || uniqueId.replace(/:/g, "")}`

  return (
    <ChartContext.Provider value={{ config }}>
      <div
        data-slot="chart"
        data-chart={chartId}
        className={cn(
          "[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",
          className
        )}
        {...props}
      >
        <ChartStyle id={chartId} config={config} />
        <RechartsPrimitive.ResponsiveContainer>
          {children}
        </RechartsPrimitive.ResponsiveContainer>
      </div>
    </ChartContext.Provider>
  )
}

const ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {
  const colorConfig = Object.entries(config).filter(
    ([, config]) => config.theme || config.color
  )

  if (!colorConfig.length) {
    return null
  }

  return (
    <style
      dangerouslySetInnerHTML={{
        __html: Object.entries(THEMES)
          .map(
            ([theme, prefix]) => `
${prefix} [data-chart=${id}] {
${colorConfig
  .map(([key, itemConfig]) => {
    const color =
      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||
      itemConfig.color
    return color ? `  --color-${key}: ${color};` : null
  })
  .join("\n")}
}
`
          )
          .join("\n"),
      }}
    />
  )
}

const ChartTooltip = RechartsPrimitive.Tooltip

function ChartTooltipContent({
  active,
  payload,
  className,
  indicator = "dot",
  hideLabel = false,
  hideIndicator = false,
  label,
  labelFormatter,
  labelClassName,
  formatter,
  color,
  nameKey,
  labelKey,
}: React.ComponentProps<typeof RechartsPrimitive.Tooltip> &
  React.ComponentProps<"div"> & {
    hideLabel?: boolean
    hideIndicator?: boolean
    indicator?: "line" | "dot" | "dashed"
    nameKey?: string
    labelKey?: string
  }) {
  const { config } = useChart()

  const tooltipLabel = React.useMemo(() => {
    if (hideLabel || !payload?.length) {
      return null
    }

    const [item] = payload
    const key = `${labelKey || item?.dataKey || item?.name || "value"}`
    const itemConfig = getPayloadConfigFromPayload(config, item, key)
    const value =
      !labelKey && typeof label === "string"
        ? config[label as keyof typeof config]?.label || label
        : itemConfig?.label

    if (labelFormatter) {
      return (
        <div className={cn("font-medium", labelClassName)}>
          {labelFormatter(value, payload)}
        </div>
      )
    }

    if (!value) {
      return null
    }

    return <div className={cn("font-medium", labelClassName)}>{value}</div>
  }, [
    label,
    labelFormatter,
    payload,
    hideLabel,
    labelClassName,
    config,
    labelKey,
  ])

  if (!active || !payload?.length) {
    return null
  }

  const nestLabel = payload.length === 1 && indicator !== "dot"

  return (
    <div
      className={cn(
        "border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl",
        className
      )}
    >
      {!nestLabel ? tooltipLabel : null}
      <div className="grid gap-1.5">
        {payload.map((item, index) => {
          const key = `${nameKey || item.name || item.dataKey || "value"}`
          const itemConfig = getPayloadConfigFromPayload(config, item, key)
          const indicatorColor = color || item.payload.fill || item.color

          return (
            <div
              key={item.dataKey}
              className={cn(
                "[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5",
                indicator === "dot" && "items-center"
              )}
            >
              {formatter && item?.value !== undefined && item.name ? (
                formatter(item.value, item.name, item, index, item.payload)
              ) : (
                <>
                  {itemConfig?.icon ? (
                    <itemConfig.icon />
                  ) : (
                    !hideIndicator && (
                      <div
                        className={cn(
                          "shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)",
                          {
                            "h-2.5 w-2.5": indicator === "dot",
                            "w-1": indicator === "line",
                            "w-0 border-[1.5px] border-dashed bg-transparent":
                              indicator === "dashed",
                            "my-0.5": nestLabel && indicator === "dashed",
                          }
                        )}
                        style={
                          {
                            "--color-bg": indicatorColor,
                            "--color-border": indicatorColor,
                          } as React.CSSProperties
                        }
                      />
                    )
                  )}
                  <div
                    className={cn(
                      "flex flex-1 justify-between leading-none",
                      nestLabel ? "items-end" : "items-center"
                    )}
                  >
                    <div className="grid gap-1.5">
                      {nestLabel ? tooltipLabel : null}
                      <span className="text-muted-foreground">
                        {itemConfig?.label || item.name}
                      </span>
                    </div>
                    {item.value && (
                      <span className="text-foreground font-mono font-medium tabular-nums">
                        {item.value.toLocaleString()}
                      </span>
                    )}
                  </div>
                </>
              )}
            </div>
          )
        })}
      </div>
    </div>
  )
}

const ChartLegend = RechartsPrimitive.Legend

function ChartLegendContent({
  className,
  hideIcon = false,
  payload,
  verticalAlign = "bottom",
  nameKey,
}: React.ComponentProps<"div"> &
  Pick<RechartsPrimitive.LegendProps, "payload" | "verticalAlign"> & {
    hideIcon?: boolean
    nameKey?: string
  }) {
  const { config } = useChart()

  if (!payload?.length) {
    return null
  }

  return (
    <div
      className={cn(
        "flex items-center justify-center gap-4",
        verticalAlign === "top" ? "pb-3" : "pt-3",
        className
      )}
    >
      {payload.map((item) => {
        const key = `${nameKey || item.dataKey || "value"}`
        const itemConfig = getPayloadConfigFromPayload(config, item, key)

        return (
          <div
            key={item.value}
            className={cn(
              "[&>svg]:text-muted-foreground flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3"
            )}
          >
            {itemConfig?.icon && !hideIcon ? (
              <itemConfig.icon />
            ) : (
              <div
                className="h-2 w-2 shrink-0 rounded-[2px]"
                style={{
                  backgroundColor: item.color,
                }}
              />
            )}
            {itemConfig?.label}
          </div>
        )
      })}
    </div>
  )
}

// Helper to extract item config from a payload.
function getPayloadConfigFromPayload(
  config: ChartConfig,
  payload: unknown,
  key: string
) {
  if (typeof payload !== "object" || payload === null) {
    return undefined
  }

  const payloadPayload =
    "payload" in payload &&
    typeof payload.payload === "object" &&
    payload.payload !== null
      ? payload.payload
      : undefined

  let configLabelKey: string = key

  if (
    key in payload &&
    typeof payload[key as keyof typeof payload] === "string"
  ) {
    configLabelKey = payload[key as keyof typeof payload] as string
  } else if (
    payloadPayload &&
    key in payloadPayload &&
    typeof payloadPayload[key as keyof typeof payloadPayload] === "string"
  ) {
    configLabelKey = payloadPayload[
      key as keyof typeof payloadPayload
    ] as string
  }

  return configLabelKey in config
    ? config[configLabelKey]
    : config[key as keyof typeof config]
}

export {
  ChartContainer,
  ChartTooltip,
  ChartTooltipContent,
  ChartLegend,
  ChartLegendContent,
  ChartStyle,
}



==========================================
FILE: src\components\ui\checkbox.tsx
==========================================
"use client"

import * as React from "react"
import * as CheckboxPrimitive from "@radix-ui/react-checkbox"
import { CheckIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Checkbox({
  className,
  ...props
}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {
  return (
    <CheckboxPrimitive.Root
      data-slot="checkbox"
      className={cn(
        "peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className
      )}
      {...props}
    >
      <CheckboxPrimitive.Indicator
        data-slot="checkbox-indicator"
        className="flex items-center justify-center text-current transition-none"
      >
        <CheckIcon className="size-3.5" />
      </CheckboxPrimitive.Indicator>
    </CheckboxPrimitive.Root>
  )
}

export { Checkbox }



==========================================
FILE: src\components\ui\collapsible.tsx
==========================================
"use client"

import * as CollapsiblePrimitive from "@radix-ui/react-collapsible"

function Collapsible({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.Root>) {
  return <CollapsiblePrimitive.Root data-slot="collapsible" {...props} />
}

function CollapsibleTrigger({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {
  return (
    <CollapsiblePrimitive.CollapsibleTrigger
      data-slot="collapsible-trigger"
      {...props}
    />
  )
}

function CollapsibleContent({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {
  return (
    <CollapsiblePrimitive.CollapsibleContent
      data-slot="collapsible-content"
      {...props}
    />
  )
}

export { Collapsible, CollapsibleTrigger, CollapsibleContent }



==========================================
FILE: src\components\ui\command.tsx
==========================================
"use client"

import * as React from "react"
import { Command as CommandPrimitive } from "cmdk"
import { SearchIcon } from "lucide-react"

import { cn } from "@/lib/utils"
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog"

function Command({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive>) {
  return (
    <CommandPrimitive
      data-slot="command"
      className={cn(
        "bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",
        className
      )}
      {...props}
    />
  )
}

function CommandDialog({
  title = "Command Palette",
  description = "Search for a command to run...",
  children,
  className,
  showCloseButton = true,
  ...props
}: React.ComponentProps<typeof Dialog> & {
  title?: string
  description?: string
  className?: string
  showCloseButton?: boolean
}) {
  return (
    <Dialog {...props}>
      <DialogHeader className="sr-only">
        <DialogTitle>{title}</DialogTitle>
        <DialogDescription>{description}</DialogDescription>
      </DialogHeader>
      <DialogContent
        className={cn("overflow-hidden p-0", className)}
        showCloseButton={showCloseButton}
      >
        <Command className="[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5">
          {children}
        </Command>
      </DialogContent>
    </Dialog>
  )
}

function CommandInput({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Input>) {
  return (
    <div
      data-slot="command-input-wrapper"
      className="flex h-9 items-center gap-2 border-b px-3"
    >
      <SearchIcon className="size-4 shrink-0 opacity-50" />
      <CommandPrimitive.Input
        data-slot="command-input"
        className={cn(
          "placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",
          className
        )}
        {...props}
      />
    </div>
  )
}

function CommandList({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.List>) {
  return (
    <CommandPrimitive.List
      data-slot="command-list"
      className={cn(
        "max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",
        className
      )}
      {...props}
    />
  )
}

function CommandEmpty({
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Empty>) {
  return (
    <CommandPrimitive.Empty
      data-slot="command-empty"
      className="py-6 text-center text-sm"
      {...props}
    />
  )
}

function CommandGroup({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Group>) {
  return (
    <CommandPrimitive.Group
      data-slot="command-group"
      className={cn(
        "text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",
        className
      )}
      {...props}
    />
  )
}

function CommandSeparator({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Separator>) {
  return (
    <CommandPrimitive.Separator
      data-slot="command-separator"
      className={cn("bg-border -mx-1 h-px", className)}
      {...props}
    />
  )
}

function CommandItem({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Item>) {
  return (
    <CommandPrimitive.Item
      data-slot="command-item"
      className={cn(
        "data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    />
  )
}

function CommandShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="command-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className
      )}
      {...props}
    />
  )
}

export {
  Command,
  CommandDialog,
  CommandInput,
  CommandList,
  CommandEmpty,
  CommandGroup,
  CommandItem,
  CommandShortcut,
  CommandSeparator,
}



==========================================
FILE: src\components\ui\context-menu.tsx
==========================================
"use client"

import * as React from "react"
import * as ContextMenuPrimitive from "@radix-ui/react-context-menu"
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function ContextMenu({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Root>) {
  return <ContextMenuPrimitive.Root data-slot="context-menu" {...props} />
}

function ContextMenuTrigger({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Trigger>) {
  return (
    <ContextMenuPrimitive.Trigger data-slot="context-menu-trigger" {...props} />
  )
}

function ContextMenuGroup({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Group>) {
  return (
    <ContextMenuPrimitive.Group data-slot="context-menu-group" {...props} />
  )
}

function ContextMenuPortal({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Portal>) {
  return (
    <ContextMenuPrimitive.Portal data-slot="context-menu-portal" {...props} />
  )
}

function ContextMenuSub({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Sub>) {
  return <ContextMenuPrimitive.Sub data-slot="context-menu-sub" {...props} />
}

function ContextMenuRadioGroup({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.RadioGroup>) {
  return (
    <ContextMenuPrimitive.RadioGroup
      data-slot="context-menu-radio-group"
      {...props}
    />
  )
}

function ContextMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.SubTrigger> & {
  inset?: boolean
}) {
  return (
    <ContextMenuPrimitive.SubTrigger
      data-slot="context-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto" />
    </ContextMenuPrimitive.SubTrigger>
  )
}

function ContextMenuSubContent({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.SubContent>) {
  return (
    <ContextMenuPrimitive.SubContent
      data-slot="context-menu-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className
      )}
      {...props}
    />
  )
}

function ContextMenuContent({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Content>) {
  return (
    <ContextMenuPrimitive.Portal>
      <ContextMenuPrimitive.Content
        data-slot="context-menu-content"
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",
          className
        )}
        {...props}
      />
    </ContextMenuPrimitive.Portal>
  )
}

function ContextMenuItem({
  className,
  inset,
  variant = "default",
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Item> & {
  inset?: boolean
  variant?: "default" | "destructive"
}) {
  return (
    <ContextMenuPrimitive.Item
      data-slot="context-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    />
  )
}

function ContextMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.CheckboxItem>) {
  return (
    <ContextMenuPrimitive.CheckboxItem
      data-slot="context-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <ContextMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </ContextMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </ContextMenuPrimitive.CheckboxItem>
  )
}

function ContextMenuRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.RadioItem>) {
  return (
    <ContextMenuPrimitive.RadioItem
      data-slot="context-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <ContextMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </ContextMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </ContextMenuPrimitive.RadioItem>
  )
}

function ContextMenuLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Label> & {
  inset?: boolean
}) {
  return (
    <ContextMenuPrimitive.Label
      data-slot="context-menu-label"
      data-inset={inset}
      className={cn(
        "text-foreground px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
        className
      )}
      {...props}
    />
  )
}

function ContextMenuSeparator({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Separator>) {
  return (
    <ContextMenuPrimitive.Separator
      data-slot="context-menu-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props}
    />
  )
}

function ContextMenuShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="context-menu-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className
      )}
      {...props}
    />
  )
}

export {
  ContextMenu,
  ContextMenuTrigger,
  ContextMenuContent,
  ContextMenuItem,
  ContextMenuCheckboxItem,
  ContextMenuRadioItem,
  ContextMenuLabel,
  ContextMenuSeparator,
  ContextMenuShortcut,
  ContextMenuGroup,
  ContextMenuPortal,
  ContextMenuSub,
  ContextMenuSubContent,
  ContextMenuSubTrigger,
  ContextMenuRadioGroup,
}



==========================================
FILE: src\components\ui\dialog.tsx
==========================================
"use client"

import * as React from "react"
import * as DialogPrimitive from "@radix-ui/react-dialog"
import { XIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Dialog({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Root>) {
  return <DialogPrimitive.Root data-slot="dialog" {...props} />
}

function DialogTrigger({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {
  return <DialogPrimitive.Trigger data-slot="dialog-trigger" {...props} />
}

function DialogPortal({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Portal>) {
  return <DialogPrimitive.Portal data-slot="dialog-portal" {...props} />
}

function DialogClose({
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Close>) {
  return <DialogPrimitive.Close data-slot="dialog-close" {...props} />
}

function DialogOverlay({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {
  return (
    <DialogPrimitive.Overlay
      data-slot="dialog-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props}
    />
  )
}

function DialogContent({
  className,
  children,
  showCloseButton = true,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Content> & {
  showCloseButton?: boolean
}) {
  return (
    <DialogPortal data-slot="dialog-portal">
      <DialogOverlay />
      <DialogPrimitive.Content
        data-slot="dialog-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",
          className
        )}
        {...props}
      >
        {children}
        {showCloseButton && (
          <DialogPrimitive.Close
            data-slot="dialog-close"
            className="ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"
          >
            <XIcon />
            <span className="sr-only">Close</span>
          </DialogPrimitive.Close>
        )}
      </DialogPrimitive.Content>
    </DialogPortal>
  )
}

function DialogHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="dialog-header"
      className={cn("flex flex-col gap-2 text-center sm:text-left", className)}
      {...props}
    />
  )
}

function DialogFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="dialog-footer"
      className={cn(
        "flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",
        className
      )}
      {...props}
    />
  )
}

function DialogTitle({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Title>) {
  return (
    <DialogPrimitive.Title
      data-slot="dialog-title"
      className={cn("text-lg leading-none font-semibold", className)}
      {...props}
    />
  )
}

function DialogDescription({
  className,
  ...props
}: React.ComponentProps<typeof DialogPrimitive.Description>) {
  return (
    <DialogPrimitive.Description
      data-slot="dialog-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  )
}

export {
  Dialog,
  DialogClose,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogOverlay,
  DialogPortal,
  DialogTitle,
  DialogTrigger,
}



==========================================
FILE: src\components\ui\drawer.tsx
==========================================
"use client"

import * as React from "react"
import { Drawer as DrawerPrimitive } from "vaul"

import { cn } from "@/lib/utils"

function Drawer({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Root>) {
  return <DrawerPrimitive.Root data-slot="drawer" {...props} />
}

function DrawerTrigger({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Trigger>) {
  return <DrawerPrimitive.Trigger data-slot="drawer-trigger" {...props} />
}

function DrawerPortal({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Portal>) {
  return <DrawerPrimitive.Portal data-slot="drawer-portal" {...props} />
}

function DrawerClose({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Close>) {
  return <DrawerPrimitive.Close data-slot="drawer-close" {...props} />
}

function DrawerOverlay({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Overlay>) {
  return (
    <DrawerPrimitive.Overlay
      data-slot="drawer-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props}
    />
  )
}

function DrawerContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Content>) {
  return (
    <DrawerPortal data-slot="drawer-portal">
      <DrawerOverlay />
      <DrawerPrimitive.Content
        data-slot="drawer-content"
        className={cn(
          "group/drawer-content bg-background fixed z-50 flex h-auto flex-col",
          "data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b",
          "data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t",
          "data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm",
          "data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm",
          className
        )}
        {...props}
      >
        <div className="bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block" />
        {children}
      </DrawerPrimitive.Content>
    </DrawerPortal>
  )
}

function DrawerHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="drawer-header"
      className={cn(
        "flex flex-col gap-0.5 p-4 group-data-[vaul-drawer-direction=bottom]/drawer-content:text-center group-data-[vaul-drawer-direction=top]/drawer-content:text-center md:gap-1.5 md:text-left",
        className
      )}
      {...props}
    />
  )
}

function DrawerFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="drawer-footer"
      className={cn("mt-auto flex flex-col gap-2 p-4", className)}
      {...props}
    />
  )
}

function DrawerTitle({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Title>) {
  return (
    <DrawerPrimitive.Title
      data-slot="drawer-title"
      className={cn("text-foreground font-semibold", className)}
      {...props}
    />
  )
}

function DrawerDescription({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Description>) {
  return (
    <DrawerPrimitive.Description
      data-slot="drawer-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  )
}

export {
  Drawer,
  DrawerPortal,
  DrawerOverlay,
  DrawerTrigger,
  DrawerClose,
  DrawerContent,
  DrawerHeader,
  DrawerFooter,
  DrawerTitle,
  DrawerDescription,
}



==========================================
FILE: src\components\ui\dropdown-menu.tsx
==========================================
"use client"

import * as React from "react"
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu"
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function DropdownMenu({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {
  return <DropdownMenuPrimitive.Root data-slot="dropdown-menu" {...props} />
}

function DropdownMenuPortal({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {
  return (
    <DropdownMenuPrimitive.Portal data-slot="dropdown-menu-portal" {...props} />
  )
}

function DropdownMenuTrigger({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {
  return (
    <DropdownMenuPrimitive.Trigger
      data-slot="dropdown-menu-trigger"
      {...props}
    />
  )
}

function DropdownMenuContent({
  className,
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {
  return (
    <DropdownMenuPrimitive.Portal>
      <DropdownMenuPrimitive.Content
        data-slot="dropdown-menu-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",
          className
        )}
        {...props}
      />
    </DropdownMenuPrimitive.Portal>
  )
}

function DropdownMenuGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {
  return (
    <DropdownMenuPrimitive.Group data-slot="dropdown-menu-group" {...props} />
  )
}

function DropdownMenuItem({
  className,
  inset,
  variant = "default",
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {
  inset?: boolean
  variant?: "default" | "destructive"
}) {
  return (
    <DropdownMenuPrimitive.Item
      data-slot="dropdown-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    />
  )
}

function DropdownMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {
  return (
    <DropdownMenuPrimitive.CheckboxItem
      data-slot="dropdown-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.CheckboxItem>
  )
}

function DropdownMenuRadioGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {
  return (
    <DropdownMenuPrimitive.RadioGroup
      data-slot="dropdown-menu-radio-group"
      {...props}
    />
  )
}

function DropdownMenuRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {
  return (
    <DropdownMenuPrimitive.RadioItem
      data-slot="dropdown-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.RadioItem>
  )
}

function DropdownMenuLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {
  inset?: boolean
}) {
  return (
    <DropdownMenuPrimitive.Label
      data-slot="dropdown-menu-label"
      data-inset={inset}
      className={cn(
        "px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
        className
      )}
      {...props}
    />
  )
}

function DropdownMenuSeparator({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {
  return (
    <DropdownMenuPrimitive.Separator
      data-slot="dropdown-menu-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props}
    />
  )
}

function DropdownMenuShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="dropdown-menu-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className
      )}
      {...props}
    />
  )
}

function DropdownMenuSub({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {
  return <DropdownMenuPrimitive.Sub data-slot="dropdown-menu-sub" {...props} />
}

function DropdownMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {
  inset?: boolean
}) {
  return (
    <DropdownMenuPrimitive.SubTrigger
      data-slot="dropdown-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8",
        className
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto size-4" />
    </DropdownMenuPrimitive.SubTrigger>
  )
}

function DropdownMenuSubContent({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {
  return (
    <DropdownMenuPrimitive.SubContent
      data-slot="dropdown-menu-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className
      )}
      {...props}
    />
  )
}

export {
  DropdownMenu,
  DropdownMenuPortal,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuLabel,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioGroup,
  DropdownMenuRadioItem,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuSub,
  DropdownMenuSubTrigger,
  DropdownMenuSubContent,
}



==========================================
FILE: src\components\ui\form.tsx
==========================================
"use client"

import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"
import { Slot } from "@radix-ui/react-slot"
import {
  Controller,
  FormProvider,
  useFormContext,
  useFormState,
  type ControllerProps,
  type FieldPath,
  type FieldValues,
} from "react-hook-form"

import { cn } from "@/lib/utils"
import { Label } from "@/components/ui/label"

const Form = FormProvider

type FormFieldContextValue<
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
> = {
  name: TName
}

const FormFieldContext = React.createContext<FormFieldContextValue>(
  {} as FormFieldContextValue
)

const FormField = <
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
>({
  ...props
}: ControllerProps<TFieldValues, TName>) => {
  return (
    <FormFieldContext.Provider value={{ name: props.name }}>
      <Controller {...props} />
    </FormFieldContext.Provider>
  )
}

const useFormField = () => {
  const fieldContext = React.useContext(FormFieldContext)
  const itemContext = React.useContext(FormItemContext)
  const { getFieldState } = useFormContext()
  const formState = useFormState({ name: fieldContext.name })
  const fieldState = getFieldState(fieldContext.name, formState)

  if (!fieldContext) {
    throw new Error("useFormField should be used within <FormField>")
  }

  const { id } = itemContext

  return {
    id,
    name: fieldContext.name,
    formItemId: `${id}-form-item`,
    formDescriptionId: `${id}-form-item-description`,
    formMessageId: `${id}-form-item-message`,
    ...fieldState,
  }
}

type FormItemContextValue = {
  id: string
}

const FormItemContext = React.createContext<FormItemContextValue>(
  {} as FormItemContextValue
)

function FormItem({ className, ...props }: React.ComponentProps<"div">) {
  const id = React.useId()

  return (
    <FormItemContext.Provider value={{ id }}>
      <div
        data-slot="form-item"
        className={cn("grid gap-2", className)}
        {...props}
      />
    </FormItemContext.Provider>
  )
}

function FormLabel({
  className,
  ...props
}: React.ComponentProps<typeof LabelPrimitive.Root>) {
  const { error, formItemId } = useFormField()

  return (
    <Label
      data-slot="form-label"
      data-error={!!error}
      className={cn("data-[error=true]:text-destructive", className)}
      htmlFor={formItemId}
      {...props}
    />
  )
}

function FormControl({ ...props }: React.ComponentProps<typeof Slot>) {
  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()

  return (
    <Slot
      data-slot="form-control"
      id={formItemId}
      aria-describedby={
        !error
          ? `${formDescriptionId}`
          : `${formDescriptionId} ${formMessageId}`
      }
      aria-invalid={!!error}
      {...props}
    />
  )
}

function FormDescription({ className, ...props }: React.ComponentProps<"p">) {
  const { formDescriptionId } = useFormField()

  return (
    <p
      data-slot="form-description"
      id={formDescriptionId}
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  )
}

function FormMessage({ className, ...props }: React.ComponentProps<"p">) {
  const { error, formMessageId } = useFormField()
  const body = error ? String(error?.message ?? "") : props.children

  if (!body) {
    return null
  }

  return (
    <p
      data-slot="form-message"
      id={formMessageId}
      className={cn("text-destructive text-sm", className)}
      {...props}
    >
      {body}
    </p>
  )
}

export {
  useFormField,
  Form,
  FormItem,
  FormLabel,
  FormControl,
  FormDescription,
  FormMessage,
  FormField,
}



==========================================
FILE: src\components\ui\hover-card.tsx
==========================================
"use client"

import * as React from "react"
import * as HoverCardPrimitive from "@radix-ui/react-hover-card"

import { cn } from "@/lib/utils"

function HoverCard({
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Root>) {
  return <HoverCardPrimitive.Root data-slot="hover-card" {...props} />
}

function HoverCardTrigger({
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Trigger>) {
  return (
    <HoverCardPrimitive.Trigger data-slot="hover-card-trigger" {...props} />
  )
}

function HoverCardContent({
  className,
  align = "center",
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Content>) {
  return (
    <HoverCardPrimitive.Portal data-slot="hover-card-portal">
      <HoverCardPrimitive.Content
        data-slot="hover-card-content"
        align={align}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",
          className
        )}
        {...props}
      />
    </HoverCardPrimitive.Portal>
  )
}

export { HoverCard, HoverCardTrigger, HoverCardContent }



==========================================
FILE: src\components\ui\input.tsx
==========================================
import * as React from "react"

import { cn } from "@/lib/utils"

function Input({ className, type, ...props }: React.ComponentProps<"input">) {
  return (
    <input
      type={type}
      data-slot="input"
      className={cn(
        "file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        "focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]",
        "aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
        className
      )}
      {...props}
    />
  )
}

export { Input }



==========================================
FILE: src\components\ui\input-otp.tsx
==========================================
"use client"

import * as React from "react"
import { OTPInput, OTPInputContext } from "input-otp"
import { MinusIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function InputOTP({
  className,
  containerClassName,
  ...props
}: React.ComponentProps<typeof OTPInput> & {
  containerClassName?: string
}) {
  return (
    <OTPInput
      data-slot="input-otp"
      containerClassName={cn(
        "flex items-center gap-2 has-disabled:opacity-50",
        containerClassName
      )}
      className={cn("disabled:cursor-not-allowed", className)}
      {...props}
    />
  )
}

function InputOTPGroup({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="input-otp-group"
      className={cn("flex items-center", className)}
      {...props}
    />
  )
}

function InputOTPSlot({
  index,
  className,
  ...props
}: React.ComponentProps<"div"> & {
  index: number
}) {
  const inputOTPContext = React.useContext(OTPInputContext)
  const { char, hasFakeCaret, isActive } = inputOTPContext?.slots[index] ?? {}

  return (
    <div
      data-slot="input-otp-slot"
      data-active={isActive}
      className={cn(
        "data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]",
        className
      )}
      {...props}
    >
      {char}
      {hasFakeCaret && (
        <div className="pointer-events-none absolute inset-0 flex items-center justify-center">
          <div className="animate-caret-blink bg-foreground h-4 w-px duration-1000" />
        </div>
      )}
    </div>
  )
}

function InputOTPSeparator({ ...props }: React.ComponentProps<"div">) {
  return (
    <div data-slot="input-otp-separator" role="separator" {...props}>
      <MinusIcon />
    </div>
  )
}

export { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }



==========================================
FILE: src\components\ui\label.tsx
==========================================
"use client"

import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"

import { cn } from "@/lib/utils"

function Label({
  className,
  ...props
}: React.ComponentProps<typeof LabelPrimitive.Root>) {
  return (
    <LabelPrimitive.Root
      data-slot="label"
      className={cn(
        "flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",
        className
      )}
      {...props}
    />
  )
}

export { Label }



==========================================
FILE: src\components\ui\menubar.tsx
==========================================
"use client"

import * as React from "react"
import * as MenubarPrimitive from "@radix-ui/react-menubar"
import { CheckIcon, ChevronRightIcon, CircleIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Menubar({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Root>) {
  return (
    <MenubarPrimitive.Root
      data-slot="menubar"
      className={cn(
        "bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs",
        className
      )}
      {...props}
    />
  )
}

function MenubarMenu({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {
  return <MenubarPrimitive.Menu data-slot="menubar-menu" {...props} />
}

function MenubarGroup({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Group>) {
  return <MenubarPrimitive.Group data-slot="menubar-group" {...props} />
}

function MenubarPortal({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {
  return <MenubarPrimitive.Portal data-slot="menubar-portal" {...props} />
}

function MenubarRadioGroup({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {
  return (
    <MenubarPrimitive.RadioGroup data-slot="menubar-radio-group" {...props} />
  )
}

function MenubarTrigger({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Trigger>) {
  return (
    <MenubarPrimitive.Trigger
      data-slot="menubar-trigger"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none",
        className
      )}
      {...props}
    />
  )
}

function MenubarContent({
  className,
  align = "start",
  alignOffset = -4,
  sideOffset = 8,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Content>) {
  return (
    <MenubarPortal>
      <MenubarPrimitive.Content
        data-slot="menubar-content"
        align={align}
        alignOffset={alignOffset}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md",
          className
        )}
        {...props}
      />
    </MenubarPortal>
  )
}

function MenubarItem({
  className,
  inset,
  variant = "default",
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Item> & {
  inset?: boolean
  variant?: "default" | "destructive"
}) {
  return (
    <MenubarPrimitive.Item
      data-slot="menubar-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    />
  )
}

function MenubarCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.CheckboxItem>) {
  return (
    <MenubarPrimitive.CheckboxItem
      data-slot="menubar-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <MenubarPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </MenubarPrimitive.ItemIndicator>
      </span>
      {children}
    </MenubarPrimitive.CheckboxItem>
  )
}

function MenubarRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.RadioItem>) {
  return (
    <MenubarPrimitive.RadioItem
      data-slot="menubar-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <MenubarPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </MenubarPrimitive.ItemIndicator>
      </span>
      {children}
    </MenubarPrimitive.RadioItem>
  )
}

function MenubarLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Label> & {
  inset?: boolean
}) {
  return (
    <MenubarPrimitive.Label
      data-slot="menubar-label"
      data-inset={inset}
      className={cn(
        "px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",
        className
      )}
      {...props}
    />
  )
}

function MenubarSeparator({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Separator>) {
  return (
    <MenubarPrimitive.Separator
      data-slot="menubar-separator"
      className={cn("bg-border -mx-1 my-1 h-px", className)}
      {...props}
    />
  )
}

function MenubarShortcut({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      data-slot="menubar-shortcut"
      className={cn(
        "text-muted-foreground ml-auto text-xs tracking-widest",
        className
      )}
      {...props}
    />
  )
}

function MenubarSub({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {
  return <MenubarPrimitive.Sub data-slot="menubar-sub" {...props} />
}

function MenubarSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.SubTrigger> & {
  inset?: boolean
}) {
  return (
    <MenubarPrimitive.SubTrigger
      data-slot="menubar-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-none select-none data-[inset]:pl-8",
        className
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto h-4 w-4" />
    </MenubarPrimitive.SubTrigger>
  )
}

function MenubarSubContent({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.SubContent>) {
  return (
    <MenubarPrimitive.SubContent
      data-slot="menubar-sub-content"
      className={cn(
        "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg",
        className
      )}
      {...props}
    />
  )
}

export {
  Menubar,
  MenubarPortal,
  MenubarMenu,
  MenubarTrigger,
  MenubarContent,
  MenubarGroup,
  MenubarSeparator,
  MenubarLabel,
  MenubarItem,
  MenubarShortcut,
  MenubarCheckboxItem,
  MenubarRadioGroup,
  MenubarRadioItem,
  MenubarSub,
  MenubarSubTrigger,
  MenubarSubContent,
}



==========================================
FILE: src\components\ui\navigation-menu.tsx
==========================================
import * as React from "react"
import * as NavigationMenuPrimitive from "@radix-ui/react-navigation-menu"
import { cva } from "class-variance-authority"
import { ChevronDownIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function NavigationMenu({
  className,
  children,
  viewport = true,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Root> & {
  viewport?: boolean
}) {
  return (
    <NavigationMenuPrimitive.Root
      data-slot="navigation-menu"
      data-viewport={viewport}
      className={cn(
        "group/navigation-menu relative flex max-w-max flex-1 items-center justify-center",
        className
      )}
      {...props}
    >
      {children}
      {viewport && <NavigationMenuViewport />}
    </NavigationMenuPrimitive.Root>
  )
}

function NavigationMenuList({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.List>) {
  return (
    <NavigationMenuPrimitive.List
      data-slot="navigation-menu-list"
      className={cn(
        "group flex flex-1 list-none items-center justify-center gap-1",
        className
      )}
      {...props}
    />
  )
}

function NavigationMenuItem({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Item>) {
  return (
    <NavigationMenuPrimitive.Item
      data-slot="navigation-menu-item"
      className={cn("relative", className)}
      {...props}
    />
  )
}

const navigationMenuTriggerStyle = cva(
  "group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=open]:hover:bg-accent data-[state=open]:text-accent-foreground data-[state=open]:focus:bg-accent data-[state=open]:bg-accent/50 focus-visible:ring-ring/50 outline-none transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1"
)

function NavigationMenuTrigger({
  className,
  children,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Trigger>) {
  return (
    <NavigationMenuPrimitive.Trigger
      data-slot="navigation-menu-trigger"
      className={cn(navigationMenuTriggerStyle(), "group", className)}
      {...props}
    >
      {children}{" "}
      <ChevronDownIcon
        className="relative top-[1px] ml-1 size-3 transition duration-300 group-data-[state=open]:rotate-180"
        aria-hidden="true"
      />
    </NavigationMenuPrimitive.Trigger>
  )
}

function NavigationMenuContent({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Content>) {
  return (
    <NavigationMenuPrimitive.Content
      data-slot="navigation-menu-content"
      className={cn(
        "data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 top-0 left-0 w-full p-2 pr-2.5 md:absolute md:w-auto",
        "group-data-[viewport=false]/navigation-menu:bg-popover group-data-[viewport=false]/navigation-menu:text-popover-foreground group-data-[viewport=false]/navigation-menu:data-[state=open]:animate-in group-data-[viewport=false]/navigation-menu:data-[state=closed]:animate-out group-data-[viewport=false]/navigation-menu:data-[state=closed]:zoom-out-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:zoom-in-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:fade-in-0 group-data-[viewport=false]/navigation-menu:data-[state=closed]:fade-out-0 group-data-[viewport=false]/navigation-menu:top-full group-data-[viewport=false]/navigation-menu:mt-1.5 group-data-[viewport=false]/navigation-menu:overflow-hidden group-data-[viewport=false]/navigation-menu:rounded-md group-data-[viewport=false]/navigation-menu:border group-data-[viewport=false]/navigation-menu:shadow group-data-[viewport=false]/navigation-menu:duration-200 **:data-[slot=navigation-menu-link]:focus:ring-0 **:data-[slot=navigation-menu-link]:focus:outline-none",
        className
      )}
      {...props}
    />
  )
}

function NavigationMenuViewport({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Viewport>) {
  return (
    <div
      className={cn(
        "absolute top-full left-0 isolate z-50 flex justify-center"
      )}
    >
      <NavigationMenuPrimitive.Viewport
        data-slot="navigation-menu-viewport"
        className={cn(
          "origin-top-center bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border shadow md:w-[var(--radix-navigation-menu-viewport-width)]",
          className
        )}
        {...props}
      />
    </div>
  )
}

function NavigationMenuLink({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Link>) {
  return (
    <NavigationMenuPrimitive.Link
      data-slot="navigation-menu-link"
      className={cn(
        "data-[active=true]:focus:bg-accent data-[active=true]:hover:bg-accent data-[active=true]:bg-accent/50 data-[active=true]:text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus-visible:ring-ring/50 [&_svg:not([class*='text-'])]:text-muted-foreground flex flex-col gap-1 rounded-sm p-2 text-sm transition-all outline-none focus-visible:ring-[3px] focus-visible:outline-1 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    />
  )
}

function NavigationMenuIndicator({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Indicator>) {
  return (
    <NavigationMenuPrimitive.Indicator
      data-slot="navigation-menu-indicator"
      className={cn(
        "data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden",
        className
      )}
      {...props}
    >
      <div className="bg-border relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm shadow-md" />
    </NavigationMenuPrimitive.Indicator>
  )
}

export {
  NavigationMenu,
  NavigationMenuList,
  NavigationMenuItem,
  NavigationMenuContent,
  NavigationMenuTrigger,
  NavigationMenuLink,
  NavigationMenuIndicator,
  NavigationMenuViewport,
  navigationMenuTriggerStyle,
}



==========================================
FILE: src\components\ui\pagination.tsx
==========================================
import * as React from "react"
import {
  ChevronLeftIcon,
  ChevronRightIcon,
  MoreHorizontalIcon,
} from "lucide-react"

import { cn } from "@/lib/utils"
import { Button, buttonVariants } from "@/components/ui/button"

function Pagination({ className, ...props }: React.ComponentProps<"nav">) {
  return (
    <nav
      role="navigation"
      aria-label="pagination"
      data-slot="pagination"
      className={cn("mx-auto flex w-full justify-center", className)}
      {...props}
    />
  )
}

function PaginationContent({
  className,
  ...props
}: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="pagination-content"
      className={cn("flex flex-row items-center gap-1", className)}
      {...props}
    />
  )
}

function PaginationItem({ ...props }: React.ComponentProps<"li">) {
  return <li data-slot="pagination-item" {...props} />
}

type PaginationLinkProps = {
  isActive?: boolean
} & Pick<React.ComponentProps<typeof Button>, "size"> &
  React.ComponentProps<"a">

function PaginationLink({
  className,
  isActive,
  size = "icon",
  ...props
}: PaginationLinkProps) {
  return (
    <a
      aria-current={isActive ? "page" : undefined}
      data-slot="pagination-link"
      data-active={isActive}
      className={cn(
        buttonVariants({
          variant: isActive ? "outline" : "ghost",
          size,
        }),
        className
      )}
      {...props}
    />
  )
}

function PaginationPrevious({
  className,
  ...props
}: React.ComponentProps<typeof PaginationLink>) {
  return (
    <PaginationLink
      aria-label="Go to previous page"
      size="default"
      className={cn("gap-1 px-2.5 sm:pl-2.5", className)}
      {...props}
    >
      <ChevronLeftIcon />
      <span className="hidden sm:block">Previous</span>
    </PaginationLink>
  )
}

function PaginationNext({
  className,
  ...props
}: React.ComponentProps<typeof PaginationLink>) {
  return (
    <PaginationLink
      aria-label="Go to next page"
      size="default"
      className={cn("gap-1 px-2.5 sm:pr-2.5", className)}
      {...props}
    >
      <span className="hidden sm:block">Next</span>
      <ChevronRightIcon />
    </PaginationLink>
  )
}

function PaginationEllipsis({
  className,
  ...props
}: React.ComponentProps<"span">) {
  return (
    <span
      aria-hidden
      data-slot="pagination-ellipsis"
      className={cn("flex size-9 items-center justify-center", className)}
      {...props}
    >
      <MoreHorizontalIcon className="size-4" />
      <span className="sr-only">More pages</span>
    </span>
  )
}

export {
  Pagination,
  PaginationContent,
  PaginationLink,
  PaginationItem,
  PaginationPrevious,
  PaginationNext,
  PaginationEllipsis,
}



==========================================
FILE: src\components\ui\popover.tsx
==========================================
"use client"

import * as React from "react"
import * as PopoverPrimitive from "@radix-ui/react-popover"

import { cn } from "@/lib/utils"

function Popover({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Root>) {
  return <PopoverPrimitive.Root data-slot="popover" {...props} />
}

function PopoverTrigger({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {
  return <PopoverPrimitive.Trigger data-slot="popover-trigger" {...props} />
}

function PopoverContent({
  className,
  align = "center",
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Content>) {
  return (
    <PopoverPrimitive.Portal>
      <PopoverPrimitive.Content
        data-slot="popover-content"
        align={align}
        sideOffset={sideOffset}
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",
          className
        )}
        {...props}
      />
    </PopoverPrimitive.Portal>
  )
}

function PopoverAnchor({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {
  return <PopoverPrimitive.Anchor data-slot="popover-anchor" {...props} />
}

export { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }



==========================================
FILE: src\components\ui\progress.tsx
==========================================
"use client"

import * as React from "react"
import * as ProgressPrimitive from "@radix-ui/react-progress"

import { cn } from "@/lib/utils"

function Progress({
  className,
  value,
  ...props
}: React.ComponentProps<typeof ProgressPrimitive.Root>) {
  return (
    <ProgressPrimitive.Root
      data-slot="progress"
      className={cn(
        "bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",
        className
      )}
      {...props}
    >
      <ProgressPrimitive.Indicator
        data-slot="progress-indicator"
        className="bg-primary h-full w-full flex-1 transition-all"
        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}
      />
    </ProgressPrimitive.Root>
  )
}

export { Progress }



==========================================
FILE: src\components\ui\radio-group.tsx
==========================================
"use client"

import * as React from "react"
import * as RadioGroupPrimitive from "@radix-ui/react-radio-group"
import { CircleIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function RadioGroup({
  className,
  ...props
}: React.ComponentProps<typeof RadioGroupPrimitive.Root>) {
  return (
    <RadioGroupPrimitive.Root
      data-slot="radio-group"
      className={cn("grid gap-3", className)}
      {...props}
    />
  )
}

function RadioGroupItem({
  className,
  ...props
}: React.ComponentProps<typeof RadioGroupPrimitive.Item>) {
  return (
    <RadioGroupPrimitive.Item
      data-slot="radio-group-item"
      className={cn(
        "border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className
      )}
      {...props}
    >
      <RadioGroupPrimitive.Indicator
        data-slot="radio-group-indicator"
        className="relative flex items-center justify-center"
      >
        <CircleIcon className="fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2" />
      </RadioGroupPrimitive.Indicator>
    </RadioGroupPrimitive.Item>
  )
}

export { RadioGroup, RadioGroupItem }



==========================================
FILE: src\components\ui\resizable.tsx
==========================================
"use client"

import * as React from "react"
import { GripVerticalIcon } from "lucide-react"
import * as ResizablePrimitive from "react-resizable-panels"

import { cn } from "@/lib/utils"

function ResizablePanelGroup({
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) {
  return (
    <ResizablePrimitive.PanelGroup
      data-slot="resizable-panel-group"
      className={cn(
        "flex h-full w-full data-[panel-group-direction=vertical]:flex-col",
        className
      )}
      {...props}
    />
  )
}

function ResizablePanel({
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.Panel>) {
  return <ResizablePrimitive.Panel data-slot="resizable-panel" {...props} />
}

function ResizableHandle({
  withHandle,
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {
  withHandle?: boolean
}) {
  return (
    <ResizablePrimitive.PanelResizeHandle
      data-slot="resizable-handle"
      className={cn(
        "bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90",
        className
      )}
      {...props}
    >
      {withHandle && (
        <div className="bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border">
          <GripVerticalIcon className="size-2.5" />
        </div>
      )}
    </ResizablePrimitive.PanelResizeHandle>
  )
}

export { ResizablePanelGroup, ResizablePanel, ResizableHandle }



==========================================
FILE: src\components\ui\scroll-area.tsx
==========================================
"use client"

import * as React from "react"
import * as ScrollAreaPrimitive from "@radix-ui/react-scroll-area"

import { cn } from "@/lib/utils"

function ScrollArea({
  className,
  children,
  ...props
}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {
  return (
    <ScrollAreaPrimitive.Root
      data-slot="scroll-area"
      className={cn("relative", className)}
      {...props}
    >
      <ScrollAreaPrimitive.Viewport
        data-slot="scroll-area-viewport"
        className="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1"
      >
        {children}
      </ScrollAreaPrimitive.Viewport>
      <ScrollBar />
      <ScrollAreaPrimitive.Corner />
    </ScrollAreaPrimitive.Root>
  )
}

function ScrollBar({
  className,
  orientation = "vertical",
  ...props
}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {
  return (
    <ScrollAreaPrimitive.ScrollAreaScrollbar
      data-slot="scroll-area-scrollbar"
      orientation={orientation}
      className={cn(
        "flex touch-none p-px transition-colors select-none",
        orientation === "vertical" &&
          "h-full w-2.5 border-l border-l-transparent",
        orientation === "horizontal" &&
          "h-2.5 flex-col border-t border-t-transparent",
        className
      )}
      {...props}
    >
      <ScrollAreaPrimitive.ScrollAreaThumb
        data-slot="scroll-area-thumb"
        className="bg-border relative flex-1 rounded-full"
      />
    </ScrollAreaPrimitive.ScrollAreaScrollbar>
  )
}

export { ScrollArea, ScrollBar }



==========================================
FILE: src\components\ui\select.tsx
==========================================
"use client"

import * as React from "react"
import * as SelectPrimitive from "@radix-ui/react-select"
import { CheckIcon, ChevronDownIcon, ChevronUpIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Select({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Root>) {
  return <SelectPrimitive.Root data-slot="select" {...props} />
}

function SelectGroup({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Group>) {
  return <SelectPrimitive.Group data-slot="select-group" {...props} />
}

function SelectValue({
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Value>) {
  return <SelectPrimitive.Value data-slot="select-value" {...props} />
}

function SelectTrigger({
  className,
  size = "default",
  children,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Trigger> & {
  size?: "sm" | "default"
}) {
  return (
    <SelectPrimitive.Trigger
      data-slot="select-trigger"
      data-size={size}
      className={cn(
        "border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    >
      {children}
      <SelectPrimitive.Icon asChild>
        <ChevronDownIcon className="size-4 opacity-50" />
      </SelectPrimitive.Icon>
    </SelectPrimitive.Trigger>
  )
}

function SelectContent({
  className,
  children,
  position = "popper",
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Content>) {
  return (
    <SelectPrimitive.Portal>
      <SelectPrimitive.Content
        data-slot="select-content"
        className={cn(
          "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",
          position === "popper" &&
            "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
          className
        )}
        position={position}
        {...props}
      >
        <SelectScrollUpButton />
        <SelectPrimitive.Viewport
          className={cn(
            "p-1",
            position === "popper" &&
              "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"
          )}
        >
          {children}
        </SelectPrimitive.Viewport>
        <SelectScrollDownButton />
      </SelectPrimitive.Content>
    </SelectPrimitive.Portal>
  )
}

function SelectLabel({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Label>) {
  return (
    <SelectPrimitive.Label
      data-slot="select-label"
      className={cn("text-muted-foreground px-2 py-1.5 text-xs", className)}
      {...props}
    />
  )
}

function SelectItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Item>) {
  return (
    <SelectPrimitive.Item
      data-slot="select-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",
        className
      )}
      {...props}
    >
      <span className="absolute right-2 flex size-3.5 items-center justify-center">
        <SelectPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </SelectPrimitive.ItemIndicator>
      </span>
      <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
    </SelectPrimitive.Item>
  )
}

function SelectSeparator({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.Separator>) {
  return (
    <SelectPrimitive.Separator
      data-slot="select-separator"
      className={cn("bg-border pointer-events-none -mx-1 my-1 h-px", className)}
      {...props}
    />
  )
}

function SelectScrollUpButton({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.ScrollUpButton>) {
  return (
    <SelectPrimitive.ScrollUpButton
      data-slot="select-scroll-up-button"
      className={cn(
        "flex cursor-default items-center justify-center py-1",
        className
      )}
      {...props}
    >
      <ChevronUpIcon className="size-4" />
    </SelectPrimitive.ScrollUpButton>
  )
}

function SelectScrollDownButton({
  className,
  ...props
}: React.ComponentProps<typeof SelectPrimitive.ScrollDownButton>) {
  return (
    <SelectPrimitive.ScrollDownButton
      data-slot="select-scroll-down-button"
      className={cn(
        "flex cursor-default items-center justify-center py-1",
        className
      )}
      {...props}
    >
      <ChevronDownIcon className="size-4" />
    </SelectPrimitive.ScrollDownButton>
  )
}

export {
  Select,
  SelectContent,
  SelectGroup,
  SelectItem,
  SelectLabel,
  SelectScrollDownButton,
  SelectScrollUpButton,
  SelectSeparator,
  SelectTrigger,
  SelectValue,
}



==========================================
FILE: src\components\ui\separator.tsx
==========================================
"use client"

import * as React from "react"
import * as SeparatorPrimitive from "@radix-ui/react-separator"

import { cn } from "@/lib/utils"

function Separator({
  className,
  orientation = "horizontal",
  decorative = true,
  ...props
}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {
  return (
    <SeparatorPrimitive.Root
      data-slot="separator"
      decorative={decorative}
      orientation={orientation}
      className={cn(
        "bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",
        className
      )}
      {...props}
    />
  )
}

export { Separator }



==========================================
FILE: src\components\ui\sheet.tsx
==========================================
"use client"

import * as React from "react"
import * as SheetPrimitive from "@radix-ui/react-dialog"
import { XIcon } from "lucide-react"

import { cn } from "@/lib/utils"

function Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {
  return <SheetPrimitive.Root data-slot="sheet" {...props} />
}

function SheetTrigger({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {
  return <SheetPrimitive.Trigger data-slot="sheet-trigger" {...props} />
}

function SheetClose({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Close>) {
  return <SheetPrimitive.Close data-slot="sheet-close" {...props} />
}

function SheetPortal({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Portal>) {
  return <SheetPrimitive.Portal data-slot="sheet-portal" {...props} />
}

function SheetOverlay({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {
  return (
    <SheetPrimitive.Overlay
      data-slot="sheet-overlay"
      className={cn(
        "data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",
        className
      )}
      {...props}
    />
  )
}

function SheetContent({
  className,
  children,
  side = "right",
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Content> & {
  side?: "top" | "right" | "bottom" | "left"
}) {
  return (
    <SheetPortal>
      <SheetOverlay />
      <SheetPrimitive.Content
        data-slot="sheet-content"
        className={cn(
          "bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",
          side === "right" &&
            "data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",
          side === "left" &&
            "data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",
          side === "top" &&
            "data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",
          side === "bottom" &&
            "data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",
          className
        )}
        {...props}
      >
        {children}
        <SheetPrimitive.Close className="ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none">
          <XIcon className="size-4" />
          <span className="sr-only">Close</span>
        </SheetPrimitive.Close>
      </SheetPrimitive.Content>
    </SheetPortal>
  )
}

function SheetHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sheet-header"
      className={cn("flex flex-col gap-1.5 p-4", className)}
      {...props}
    />
  )
}

function SheetFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sheet-footer"
      className={cn("mt-auto flex flex-col gap-2 p-4", className)}
      {...props}
    />
  )
}

function SheetTitle({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Title>) {
  return (
    <SheetPrimitive.Title
      data-slot="sheet-title"
      className={cn("text-foreground font-semibold", className)}
      {...props}
    />
  )
}

function SheetDescription({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Description>) {
  return (
    <SheetPrimitive.Description
      data-slot="sheet-description"
      className={cn("text-muted-foreground text-sm", className)}
      {...props}
    />
  )
}

export {
  Sheet,
  SheetTrigger,
  SheetClose,
  SheetContent,
  SheetHeader,
  SheetFooter,
  SheetTitle,
  SheetDescription,
}



==========================================
FILE: src\components\ui\sidebar.tsx
==========================================
"use client"

import * as React from "react"
import { Slot } from "@radix-ui/react-slot"
import { cva, VariantProps } from "class-variance-authority"
import { PanelLeftIcon } from "lucide-react"

import { useIsMobile } from "@/hooks/use-mobile"
import { cn } from "@/lib/utils"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Separator } from "@/components/ui/separator"
import {
  Sheet,
  SheetContent,
  SheetDescription,
  SheetHeader,
  SheetTitle,
} from "@/components/ui/sheet"
import { Skeleton } from "@/components/ui/skeleton"
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from "@/components/ui/tooltip"

const SIDEBAR_COOKIE_NAME = "sidebar_state"
const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7
const SIDEBAR_WIDTH = "16rem"
const SIDEBAR_WIDTH_MOBILE = "18rem"
const SIDEBAR_WIDTH_ICON = "3rem"
const SIDEBAR_KEYBOARD_SHORTCUT = "b"

type SidebarContextProps = {
  state: "expanded" | "collapsed"
  open: boolean
  setOpen: (open: boolean) => void
  openMobile: boolean
  setOpenMobile: (open: boolean) => void
  isMobile: boolean
  toggleSidebar: () => void
}

const SidebarContext = React.createContext<SidebarContextProps | null>(null)

function useSidebar() {
  const context = React.useContext(SidebarContext)
  if (!context) {
    throw new Error("useSidebar must be used within a SidebarProvider.")
  }

  return context
}

function SidebarProvider({
  defaultOpen = true,
  open: openProp,
  onOpenChange: setOpenProp,
  className,
  style,
  children,
  ...props
}: React.ComponentProps<"div"> & {
  defaultOpen?: boolean
  open?: boolean
  onOpenChange?: (open: boolean) => void
}) {
  const isMobile = useIsMobile()
  const [openMobile, setOpenMobile] = React.useState(false)

  // This is the internal state of the sidebar.
  // We use openProp and setOpenProp for control from outside the component.
  const [_open, _setOpen] = React.useState(defaultOpen)
  const open = openProp ?? _open
  const setOpen = React.useCallback(
    (value: boolean | ((value: boolean) => boolean)) => {
      const openState = typeof value === "function" ? value(open) : value
      if (setOpenProp) {
        setOpenProp(openState)
      } else {
        _setOpen(openState)
      }

      // This sets the cookie to keep the sidebar state.
      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`
    },
    [setOpenProp, open]
  )

  // Helper to toggle the sidebar.
  const toggleSidebar = React.useCallback(() => {
    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)
  }, [isMobile, setOpen, setOpenMobile])

  // Adds a keyboard shortcut to toggle the sidebar.
  React.useEffect(() => {
    const handleKeyDown = (event: KeyboardEvent) => {
      if (
        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&
        (event.metaKey || event.ctrlKey)
      ) {
        event.preventDefault()
        toggleSidebar()
      }
    }

    window.addEventListener("keydown", handleKeyDown)
    return () => window.removeEventListener("keydown", handleKeyDown)
  }, [toggleSidebar])

  // We add a state so that we can do data-state="expanded" or "collapsed".
  // This makes it easier to style the sidebar with Tailwind classes.
  const state = open ? "expanded" : "collapsed"

  const contextValue = React.useMemo<SidebarContextProps>(
    () => ({
      state,
      open,
      setOpen,
      isMobile,
      openMobile,
      setOpenMobile,
      toggleSidebar,
    }),
    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]
  )

  return (
    <SidebarContext.Provider value={contextValue}>
      <TooltipProvider delayDuration={0}>
        <div
          data-slot="sidebar-wrapper"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH,
              "--sidebar-width-icon": SIDEBAR_WIDTH_ICON,
              ...style,
            } as React.CSSProperties
          }
          className={cn(
            "group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",
            className
          )}
          {...props}
        >
          {children}
        </div>
      </TooltipProvider>
    </SidebarContext.Provider>
  )
}

function Sidebar({
  side = "left",
  variant = "sidebar",
  collapsible = "offcanvas",
  className,
  children,
  ...props
}: React.ComponentProps<"div"> & {
  side?: "left" | "right"
  variant?: "sidebar" | "floating" | "inset"
  collapsible?: "offcanvas" | "icon" | "none"
}) {
  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()

  if (collapsible === "none") {
    return (
      <div
        data-slot="sidebar"
        className={cn(
          "bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",
          className
        )}
        {...props}
      >
        {children}
      </div>
    )
  }

  if (isMobile) {
    return (
      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>
        <SheetContent
          data-sidebar="sidebar"
          data-slot="sidebar"
          data-mobile="true"
          className="bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH_MOBILE,
            } as React.CSSProperties
          }
          side={side}
        >
          <SheetHeader className="sr-only">
            <SheetTitle>Sidebar</SheetTitle>
            <SheetDescription>Displays the mobile sidebar.</SheetDescription>
          </SheetHeader>
          <div className="flex h-full w-full flex-col">{children}</div>
        </SheetContent>
      </Sheet>
    )
  }

  return (
    <div
      className="group peer text-sidebar-foreground hidden md:block"
      data-state={state}
      data-collapsible={state === "collapsed" ? collapsible : ""}
      data-variant={variant}
      data-side={side}
      data-slot="sidebar"
    >
      {/* This is what handles the sidebar gap on desktop */}
      <div
        data-slot="sidebar-gap"
        className={cn(
          "relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear",
          "group-data-[collapsible=offcanvas]:w-0",
          "group-data-[side=right]:rotate-180",
          variant === "floating" || variant === "inset"
            ? "group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]"
            : "group-data-[collapsible=icon]:w-(--sidebar-width-icon)"
        )}
      />
      <div
        data-slot="sidebar-container"
        className={cn(
          "fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",
          side === "left"
            ? "left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]"
            : "right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",
          // Adjust the padding for floating and inset variants.
          variant === "floating" || variant === "inset"
            ? "p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]"
            : "group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",
          className
        )}
        {...props}
      >
        <div
          data-sidebar="sidebar"
          data-slot="sidebar-inner"
          className="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"
        >
          {children}
        </div>
      </div>
    </div>
  )
}

function SidebarTrigger({
  className,
  onClick,
  ...props
}: React.ComponentProps<typeof Button>) {
  const { toggleSidebar } = useSidebar()

  return (
    <Button
      data-sidebar="trigger"
      data-slot="sidebar-trigger"
      variant="ghost"
      size="icon"
      className={cn("size-7", className)}
      onClick={(event) => {
        onClick?.(event)
        toggleSidebar()
      }}
      {...props}
    >
      <PanelLeftIcon />
      <span className="sr-only">Toggle Sidebar</span>
    </Button>
  )
}

function SidebarRail({ className, ...props }: React.ComponentProps<"button">) {
  const { toggleSidebar } = useSidebar()

  return (
    <button
      data-sidebar="rail"
      data-slot="sidebar-rail"
      aria-label="Toggle Sidebar"
      tabIndex={-1}
      onClick={toggleSidebar}
      title="Toggle Sidebar"
      className={cn(
        "hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex",
        "in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize",
        "[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize",
        "hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full",
        "[[data-side=left][data-collapsible=offcanvas]_&]:-right-2",
        "[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",
        className
      )}
      {...props}
    />
  )
}

function SidebarInset({ className, ...props }: React.ComponentProps<"main">) {
  return (
    <main
      data-slot="sidebar-inset"
      className={cn(
        "bg-background relative flex w-full flex-1 flex-col",
        "md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",
        className
      )}
      {...props}
    />
  )
}

function SidebarInput({
  className,
  ...props
}: React.ComponentProps<typeof Input>) {
  return (
    <Input
      data-slot="sidebar-input"
      data-sidebar="input"
      className={cn("bg-background h-8 w-full shadow-none", className)}
      {...props}
    />
  )
}

function SidebarHeader({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-header"
      data-sidebar="header"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props}
    />
  )
}

function SidebarFooter({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-footer"
      data-sidebar="footer"
      className={cn("flex flex-col gap-2 p-2", className)}
      {...props}
    />
  )
}

function SidebarSeparator({
  className,
  ...props
}: React.ComponentProps<typeof Separator>) {
  return (
    <Separator
      data-slot="sidebar-separator"
      data-sidebar="separator"
      className={cn("bg-sidebar-border mx-2 w-auto", className)}
      {...props}
    />
  )
}

function SidebarContent({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-content"
      data-sidebar="content"
      className={cn(
        "flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",
        className
      )}
      {...props}
    />
  )
}

function SidebarGroup({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-group"
      data-sidebar="group"
      className={cn("relative flex w-full min-w-0 flex-col p-2", className)}
      {...props}
    />
  )
}

function SidebarGroupLabel({
  className,
  asChild = false,
  ...props
}: React.ComponentProps<"div"> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : "div"

  return (
    <Comp
      data-slot="sidebar-group-label"
      data-sidebar="group-label"
      className={cn(
        "text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        "group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",
        className
      )}
      {...props}
    />
  )
}

function SidebarGroupAction({
  className,
  asChild = false,
  ...props
}: React.ComponentProps<"button"> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      data-slot="sidebar-group-action"
      data-sidebar="group-action"
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 md:after:hidden",
        "group-data-[collapsible=icon]:hidden",
        className
      )}
      {...props}
    />
  )
}

function SidebarGroupContent({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-group-content"
      data-sidebar="group-content"
      className={cn("w-full text-sm", className)}
      {...props}
    />
  )
}

function SidebarMenu({ className, ...props }: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="sidebar-menu"
      data-sidebar="menu"
      className={cn("flex w-full min-w-0 flex-col gap-1", className)}
      {...props}
    />
  )
}

function SidebarMenuItem({ className, ...props }: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="sidebar-menu-item"
      data-sidebar="menu-item"
      className={cn("group/menu-item relative", className)}
      {...props}
    />
  )
}

const sidebarMenuButtonVariants = cva(
  "peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",
        outline:
          "bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]",
      },
      size: {
        default: "h-8 text-sm",
        sm: "h-7 text-xs",
        lg: "h-12 text-sm group-data-[collapsible=icon]:p-0!",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

function SidebarMenuButton({
  asChild = false,
  isActive = false,
  variant = "default",
  size = "default",
  tooltip,
  className,
  ...props
}: React.ComponentProps<"button"> & {
  asChild?: boolean
  isActive?: boolean
  tooltip?: string | React.ComponentProps<typeof TooltipContent>
} & VariantProps<typeof sidebarMenuButtonVariants>) {
  const Comp = asChild ? Slot : "button"
  const { isMobile, state } = useSidebar()

  const button = (
    <Comp
      data-slot="sidebar-menu-button"
      data-sidebar="menu-button"
      data-size={size}
      data-active={isActive}
      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}
      {...props}
    />
  )

  if (!tooltip) {
    return button
  }

  if (typeof tooltip === "string") {
    tooltip = {
      children: tooltip,
    }
  }

  return (
    <Tooltip>
      <TooltipTrigger asChild>{button}</TooltipTrigger>
      <TooltipContent
        side="right"
        align="center"
        hidden={state !== "collapsed" || isMobile}
        {...tooltip}
      />
    </Tooltip>
  )
}

function SidebarMenuAction({
  className,
  asChild = false,
  showOnHover = false,
  ...props
}: React.ComponentProps<"button"> & {
  asChild?: boolean
  showOnHover?: boolean
}) {
  const Comp = asChild ? Slot : "button"

  return (
    <Comp
      data-slot="sidebar-menu-action"
      data-sidebar="menu-action"
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 md:after:hidden",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        showOnHover &&
          "peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0",
        className
      )}
      {...props}
    />
  )
}

function SidebarMenuBadge({
  className,
  ...props
}: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="sidebar-menu-badge"
      data-sidebar="menu-badge"
      className={cn(
        "text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none",
        "peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        className
      )}
      {...props}
    />
  )
}

function SidebarMenuSkeleton({
  className,
  showIcon = false,
  ...props
}: React.ComponentProps<"div"> & {
  showIcon?: boolean
}) {
  // Random width between 50 to 90%.
  const width = React.useMemo(() => {
    return `${Math.floor(Math.random() * 40) + 50}%`
  }, [])

  return (
    <div
      data-slot="sidebar-menu-skeleton"
      data-sidebar="menu-skeleton"
      className={cn("flex h-8 items-center gap-2 rounded-md px-2", className)}
      {...props}
    >
      {showIcon && (
        <Skeleton
          className="size-4 rounded-md"
          data-sidebar="menu-skeleton-icon"
        />
      )}
      <Skeleton
        className="h-4 max-w-(--skeleton-width) flex-1"
        data-sidebar="menu-skeleton-text"
        style={
          {
            "--skeleton-width": width,
          } as React.CSSProperties
        }
      />
    </div>
  )
}

function SidebarMenuSub({ className, ...props }: React.ComponentProps<"ul">) {
  return (
    <ul
      data-slot="sidebar-menu-sub"
      data-sidebar="menu-sub"
      className={cn(
        "border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5",
        "group-data-[collapsible=icon]:hidden",
        className
      )}
      {...props}
    />
  )
}

function SidebarMenuSubItem({
  className,
  ...props
}: React.ComponentProps<"li">) {
  return (
    <li
      data-slot="sidebar-menu-sub-item"
      data-sidebar="menu-sub-item"
      className={cn("group/menu-sub-item relative", className)}
      {...props}
    />
  )
}

function SidebarMenuSubButton({
  asChild = false,
  size = "md",
  isActive = false,
  className,
  ...props
}: React.ComponentProps<"a"> & {
  asChild?: boolean
  size?: "sm" | "md"
  isActive?: boolean
}) {
  const Comp = asChild ? Slot : "a"

  return (
    <Comp
      data-slot="sidebar-menu-sub-button"
      data-sidebar="menu-sub-button"
      data-size={size}
      data-active={isActive}
      className={cn(
        "text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
        "data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",
        size === "sm" && "text-xs",
        size === "md" && "text-sm",
        "group-data-[collapsible=icon]:hidden",
        className
      )}
      {...props}
    />
  )
}

export {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupAction,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarInput,
  SidebarInset,
  SidebarMenu,
  SidebarMenuAction,
  SidebarMenuBadge,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarMenuSkeleton,
  SidebarMenuSub,
  SidebarMenuSubButton,
  SidebarMenuSubItem,
  SidebarProvider,
  SidebarRail,
  SidebarSeparator,
  SidebarTrigger,
  useSidebar,
}



==========================================
FILE: src\components\ui\skeleton.tsx
==========================================
import { cn } from "@/lib/utils"

function Skeleton({ className, ...props }: React.ComponentProps<"div">) {
  return (
    <div
      data-slot="skeleton"
      className={cn("bg-accent animate-pulse rounded-md", className)}
      {...props}
    />
  )
}

export { Skeleton }



==========================================
FILE: src\components\ui\slider.tsx
==========================================
"use client"

import * as React from "react"
import * as SliderPrimitive from "@radix-ui/react-slider"

import { cn } from "@/lib/utils"

function Slider({
  className,
  defaultValue,
  value,
  min = 0,
  max = 100,
  ...props
}: React.ComponentProps<typeof SliderPrimitive.Root>) {
  const _values = React.useMemo(
    () =>
      Array.isArray(value)
        ? value
        : Array.isArray(defaultValue)
          ? defaultValue
          : [min, max],
    [value, defaultValue, min, max]
  )

  return (
    <SliderPrimitive.Root
      data-slot="slider"
      defaultValue={defaultValue}
      value={value}
      min={min}
      max={max}
      className={cn(
        "relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",
        className
      )}
      {...props}
    >
      <SliderPrimitive.Track
        data-slot="slider-track"
        className={cn(
          "bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"
        )}
      >
        <SliderPrimitive.Range
          data-slot="slider-range"
          className={cn(
            "bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full"
          )}
        />
      </SliderPrimitive.Track>
      {Array.from({ length: _values.length }, (_, index) => (
        <SliderPrimitive.Thumb
          data-slot="slider-thumb"
          key={index}
          className="border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"
        />
      ))}
    </SliderPrimitive.Root>
  )
}

export { Slider }



==========================================
FILE: src\components\ui\sonner.tsx
==========================================
"use client"

import { useTheme } from "next-themes"
import { Toaster as Sonner, ToasterProps } from "sonner"

const Toaster = ({ ...props }: ToasterProps) => {
  const { theme = "system" } = useTheme()

  return (
    <Sonner
      theme={theme as ToasterProps["theme"]}
      className="toaster group"
      style={
        {
          "--normal-bg": "var(--popover)",
          "--normal-text": "var(--popover-foreground)",
          "--normal-border": "var(--border)",
        } as React.CSSProperties
      }
      {...props}
    />
  )
}

export { Toaster }



==========================================
FILE: src\components\ui\switch.tsx
==========================================
"use client"

import * as React from "react"
import * as SwitchPrimitive from "@radix-ui/react-switch"

import { cn } from "@/lib/utils"

function Switch({
  className,
  ...props
}: React.ComponentProps<typeof SwitchPrimitive.Root>) {
  return (
    <SwitchPrimitive.Root
      data-slot="switch"
      className={cn(
        "peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",
        className
      )}
      {...props}
    >
      <SwitchPrimitive.Thumb
        data-slot="switch-thumb"
        className={cn(
          "bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0"
        )}
      />
    </SwitchPrimitive.Root>
  )
}

export { Switch }



==========================================
FILE: src\components\ui\table.tsx
==========================================
"use client"

import * as React from "react"

import { cn } from "@/lib/utils"

function Table({ className, ...props }: React.ComponentProps<"table">) {
  return (
    <div
      data-slot="table-container"
      className="relative w-full overflow-x-auto"
    >
      <table
        data-slot="table"
        className={cn("w-full caption-bottom text-sm", className)}
        {...props}
      />
    </div>
  )
}

function TableHeader({ className, ...props }: React.ComponentProps<"thead">) {
  return (
    <thead
      data-slot="table-header"
      className={cn("[&_tr]:border-b", className)}
      {...props}
    />
  )
}

function TableBody({ className, ...props }: React.ComponentProps<"tbody">) {
  return (
    <tbody
      data-slot="table-body"
      className={cn("[&_tr:last-child]:border-0", className)}
      {...props}
    />
  )
}

function TableFooter({ className, ...props }: React.ComponentProps<"tfoot">) {
  return (
    <tfoot
      data-slot="table-footer"
      className={cn(
        "bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",
        className
      )}
      {...props}
    />
  )
}

function TableRow({ className, ...props }: React.ComponentProps<"tr">) {
  return (
    <tr
      data-slot="table-row"
      className={cn(
        "hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",
        className
      )}
      {...props}
    />
  )
}

function TableHead({ className, ...props }: React.ComponentProps<"th">) {
  return (
    <th
      data-slot="table-head"
      className={cn(
        "text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className
      )}
      {...props}
    />
  )
}

function TableCell({ className, ...props }: React.ComponentProps<"td">) {
  return (
    <td
      data-slot="table-cell"
      className={cn(
        "p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",
        className
      )}
      {...props}
    />
  )
}

function TableCaption({
  className,
  ...props
}: React.ComponentProps<"caption">) {
  return (
    <caption
      data-slot="table-caption"
      className={cn("text-muted-foreground mt-4 text-sm", className)}
      {...props}
    />
  )
}

export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
}



==========================================
FILE: src\components\ui\tabs.tsx
==========================================
"use client"

import * as React from "react"
import * as TabsPrimitive from "@radix-ui/react-tabs"

import { cn } from "@/lib/utils"

function Tabs({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Root>) {
  return (
    <TabsPrimitive.Root
      data-slot="tabs"
      className={cn("flex flex-col gap-2", className)}
      {...props}
    />
  )
}

function TabsList({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.List>) {
  return (
    <TabsPrimitive.List
      data-slot="tabs-list"
      className={cn(
        "bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",
        className
      )}
      {...props}
    />
  )
}

function TabsTrigger({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {
  return (
    <TabsPrimitive.Trigger
      data-slot="tabs-trigger"
      className={cn(
        "data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className
      )}
      {...props}
    />
  )
}

function TabsContent({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Content>) {
  return (
    <TabsPrimitive.Content
      data-slot="tabs-content"
      className={cn("flex-1 outline-none", className)}
      {...props}
    />
  )
}

export { Tabs, TabsList, TabsTrigger, TabsContent }



==========================================
FILE: src\components\ui\textarea.tsx
==========================================
import * as React from "react"

import { cn } from "@/lib/utils"

function Textarea({ className, ...props }: React.ComponentProps<"textarea">) {
  return (
    <textarea
      data-slot="textarea"
      className={cn(
        "border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
        className
      )}
      {...props}
    />
  )
}

export { Textarea }



==========================================
FILE: src\components\ui\toast.tsx
==========================================
"use client"

import * as React from "react"
import * as ToastPrimitives from "@radix-ui/react-toast"
import { cva, type VariantProps } from "class-variance-authority"
import { X } from "lucide-react"

import { cn } from "@/lib/utils"

const ToastProvider = ToastPrimitives.Provider

const ToastViewport = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Viewport>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Viewport
    ref={ref}
    className={cn(
      "fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",
      className
    )}
    {...props}
  />
))
ToastViewport.displayName = ToastPrimitives.Viewport.displayName

const toastVariants = cva(
  "group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",
  {
    variants: {
      variant: {
        default: "border bg-background text-foreground",
        destructive:
          "destructive group border-destructive bg-destructive text-destructive-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  }
)

const Toast = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &
  VariantProps<typeof toastVariants>
>(({ className, variant, ...props }, ref) => {
  return (
    <ToastPrimitives.Root
      ref={ref}
      className={cn(toastVariants({ variant }), className)}
      {...props}
    />
  )
})
Toast.displayName = ToastPrimitives.Root.displayName

const ToastAction = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Action>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Action
    ref={ref}
    className={cn(
      "inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",
      className
    )}
    {...props}
  />
))
ToastAction.displayName = ToastPrimitives.Action.displayName

const ToastClose = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Close>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Close
    ref={ref}
    className={cn(
      "absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",
      className
    )}
    toast-close=""
    {...props}
  >
    <X className="h-4 w-4" />
  </ToastPrimitives.Close>
))
ToastClose.displayName = ToastPrimitives.Close.displayName

const ToastTitle = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Title>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Title
    ref={ref}
    className={cn("text-sm font-semibold [&+div]:text-xs", className)}
    {...props}
  />
))
ToastTitle.displayName = ToastPrimitives.Title.displayName

const ToastDescription = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Description>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Description
    ref={ref}
    className={cn("text-sm opacity-90", className)}
    {...props}
  />
))
ToastDescription.displayName = ToastPrimitives.Description.displayName

type ToastProps = React.ComponentPropsWithoutRef<typeof Toast>

type ToastActionElement = React.ReactElement<typeof ToastAction>

export {
  type ToastProps,
  type ToastActionElement,
  ToastProvider,
  ToastViewport,
  Toast,
  ToastTitle,
  ToastDescription,
  ToastClose,
  ToastAction,
}


==========================================
FILE: src\components\ui\toaster.tsx
==========================================
"use client"

import { useToast } from "@/hooks/use-toast"
import {
  Toast,
  ToastClose,
  ToastDescription,
  ToastProvider,
  ToastTitle,
  ToastViewport,
} from "@/components/ui/toast"

export function Toaster() {
  const { toasts } = useToast()

  return (
    <ToastProvider>
      {toasts.map(function ({ id, title, description, action, ...props }) {
        return (
          <Toast key={id} {...props}>
            <div className="grid gap-1">
              {title && <ToastTitle>{title}</ToastTitle>}
              {description && (
                <ToastDescription>{description}</ToastDescription>
              )}
            </div>
            {action}
            <ToastClose />
          </Toast>
        )
      })}
      <ToastViewport />
    </ToastProvider>
  )
}


==========================================
FILE: src\components\ui\toggle.tsx
==========================================
"use client"

import * as React from "react"
import * as TogglePrimitive from "@radix-ui/react-toggle"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const toggleVariants = cva(
  "inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",
  {
    variants: {
      variant: {
        default: "bg-transparent",
        outline:
          "border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground",
      },
      size: {
        default: "h-9 px-2 min-w-9",
        sm: "h-8 px-1.5 min-w-8",
        lg: "h-10 px-2.5 min-w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  }
)

function Toggle({
  className,
  variant,
  size,
  ...props
}: React.ComponentProps<typeof TogglePrimitive.Root> &
  VariantProps<typeof toggleVariants>) {
  return (
    <TogglePrimitive.Root
      data-slot="toggle"
      className={cn(toggleVariants({ variant, size, className }))}
      {...props}
    />
  )
}

export { Toggle, toggleVariants }



==========================================
FILE: src\components\ui\toggle-group.tsx
==========================================
"use client"

import * as React from "react"
import * as ToggleGroupPrimitive from "@radix-ui/react-toggle-group"
import { type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"
import { toggleVariants } from "@/components/ui/toggle"

const ToggleGroupContext = React.createContext<
  VariantProps<typeof toggleVariants>
>({
  size: "default",
  variant: "default",
})

function ToggleGroup({
  className,
  variant,
  size,
  children,
  ...props
}: React.ComponentProps<typeof ToggleGroupPrimitive.Root> &
  VariantProps<typeof toggleVariants>) {
  return (
    <ToggleGroupPrimitive.Root
      data-slot="toggle-group"
      data-variant={variant}
      data-size={size}
      className={cn(
        "group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs",
        className
      )}
      {...props}
    >
      <ToggleGroupContext.Provider value={{ variant, size }}>
        {children}
      </ToggleGroupContext.Provider>
    </ToggleGroupPrimitive.Root>
  )
}

function ToggleGroupItem({
  className,
  children,
  variant,
  size,
  ...props
}: React.ComponentProps<typeof ToggleGroupPrimitive.Item> &
  VariantProps<typeof toggleVariants>) {
  const context = React.useContext(ToggleGroupContext)

  return (
    <ToggleGroupPrimitive.Item
      data-slot="toggle-group-item"
      data-variant={context.variant || variant}
      data-size={context.size || size}
      className={cn(
        toggleVariants({
          variant: context.variant || variant,
          size: context.size || size,
        }),
        "min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l",
        className
      )}
      {...props}
    >
      {children}
    </ToggleGroupPrimitive.Item>
  )
}

export { ToggleGroup, ToggleGroupItem }



==========================================
FILE: src\components\ui\tooltip.tsx
==========================================
"use client"

import * as React from "react"
import * as TooltipPrimitive from "@radix-ui/react-tooltip"

import { cn } from "@/lib/utils"

function TooltipProvider({
  delayDuration = 0,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {
  return (
    <TooltipPrimitive.Provider
      data-slot="tooltip-provider"
      delayDuration={delayDuration}
      {...props}
    />
  )
}

function Tooltip({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Root>) {
  return (
    <TooltipProvider>
      <TooltipPrimitive.Root data-slot="tooltip" {...props} />
    </TooltipProvider>
  )
}

function TooltipTrigger({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {
  return <TooltipPrimitive.Trigger data-slot="tooltip-trigger" {...props} />
}

function TooltipContent({
  className,
  sideOffset = 0,
  children,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Content>) {
  return (
    <TooltipPrimitive.Portal>
      <TooltipPrimitive.Content
        data-slot="tooltip-content"
        sideOffset={sideOffset}
        className={cn(
          "bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",
          className
        )}
        {...props}
      >
        {children}
        <TooltipPrimitive.Arrow className="bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]" />
      </TooltipPrimitive.Content>
    </TooltipPrimitive.Portal>
  )
}

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }



==========================================
FILE: src\hooks\use-mobile.ts
==========================================
import * as React from "react"

const MOBILE_BREAKPOINT = 768

export function useIsMobile() {
  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)

  React.useEffect(() => {
    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)
    const onChange = () => {
      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    }
    mql.addEventListener("change", onChange)
    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    return () => mql.removeEventListener("change", onChange)
  }, [])

  return !!isMobile
}



==========================================
FILE: src\hooks\use-simple-socket.ts
==========================================
'use client';

import { useEffect, useState } from 'react';

export const useSimpleSocket = () => {
  const [isConnected, setIsConnected] = useState(false);
  const [lastUpdate, setLastUpdate] = useState<string>('');

  useEffect(() => {
    // Simple connection check
    const checkConnection = async () => {
      try {
        const response = await fetch('/api/socket');
        const data = await response.json();
        setIsConnected(true);
        setLastUpdate(`Connected at ${new Date().toLocaleTimeString()}`);
      } catch (error) {
        console.error('Socket connection failed:', error);
        setIsConnected(false);
      }
    };

    // Check connection every 5 seconds
    checkConnection();
    const interval = setInterval(checkConnection, 5000);

    return () => clearInterval(interval);
  }, []);

  const emit = async (event: string, data: any) => {
    try {
      await fetch('/api/socket', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ event, data })
      });
    } catch (error) {
      console.error('Socket emit failed:', error);
    }
  };

  return {
    isConnected,
    lastUpdate,
    emit
  };
};


==========================================
FILE: src\hooks\use-socket.ts
==========================================
'use client'

import { useEffect, useRef, useState } from 'react'
import { io, Socket } from 'socket.io-client'

interface UseSocketOptions {
  autoConnect?: boolean
  roomId?: string
}

export const useSocket = (options: UseSocketOptions = {}) => {
  const [isConnected, setIsConnected] = useState(false)
  const [socket, setSocket] = useState<Socket | null>(null)
  const socketRef = useRef<Socket | null>(null)

  useEffect(() => {
    const { autoConnect = true, roomId } = options

    if (autoConnect) {
      const socketInstance = io({
        path: '/api/socket',
        addTrailingSlash: false,
      })

      socketRef.current = socketInstance
      setSocket(socketInstance)

      socketInstance.on('connect', () => {
        console.log('Connected to WebSocket server')
        setIsConnected(true)
        
        // Join room if provided
        if (roomId) {
          socketInstance.emit('join-room', roomId)
        }
      })

      socketInstance.on('disconnect', () => {
        console.log('Disconnected from WebSocket server')
        setIsConnected(false)
      })

      // Clean up on unmount
      return () => {
        socketInstance.disconnect()
      }
    }
  }, [options.autoConnect, options.roomId])

  const emit = (event: string, data: any) => {
    if (socketRef.current) {
      socketRef.current.emit(event, data)
    }
  }

  const on = (event: string, callback: (data: any) => void) => {
    if (socketRef.current) {
      socketRef.current.on(event, callback)
    }
  }

  const off = (event: string, callback?: (data: any) => void) => {
    if (socketRef.current) {
      socketRef.current.off(event, callback)
    }
  }

  const joinRoom = (roomId: string) => {
    if (socketRef.current) {
      socketRef.current.emit('join-room', roomId)
    }
  }

  return {
    isConnected,
    socket,
    emit,
    on,
    off,
    joinRoom,
  }
}

// Specific hooks for different real-time events
export const useJobUpdates = (callback: (data: any) => void) => {
  const { on, off } = useSocket({ autoConnect: true })

  useEffect(() => {
    on('job-status-changed', callback)
    return () => {
      off('job-status-changed', callback)
    }
  }, [on, off, callback])
}

export const useDirectorUpdates = (callback: (data: any) => void) => {
  const { on, off } = useSocket({ autoConnect: true })

  useEffect(() => {
    on('director-updated', callback)
    return () => {
      off('director-updated', callback)
    }
  }, [on, off, callback])
}

export const useContentUpdates = (callback: (data: any) => void) => {
  const { on, off } = useSocket({ autoConnect: true })

  useEffect(() => {
    on('new-content', callback)
    return () => {
      off('new-content', callback)
    }
  }, [on, off, callback])
}

export const useCharacterUpdates = (callback: (data: any) => void) => {
  const { on, off } = useSocket({ autoConnect: true })

  useEffect(() => {
    on('character-changed', callback)
    return () => {
      off('character-changed', callback)
    }
  }, [on, off, callback])
}

export const useAnalyticsUpdates = (callback: (data: any) => void) => {
  const { on, off } = useSocket({ autoConnect: true })

  useEffect(() => {
    on('analytics-refresh', callback)
    return () => {
      off('analytics-refresh', callback)
    }
  }, [on, off, callback])
}


==========================================
FILE: src\hooks\use-toast.ts
==========================================
"use client"

// Inspired by react-hot-toast library
import * as React from "react"

import type {
  ToastActionElement,
  ToastProps,
} from "@/components/ui/toast"

const TOAST_LIMIT = 1
const TOAST_REMOVE_DELAY = 1000000

type ToasterToast = ToastProps & {
  id: string
  title?: React.ReactNode
  description?: React.ReactNode
  action?: ToastActionElement
}

// eslint-disable-next-line @typescript-eslint/no-unused-vars
const actionTypes = {
  ADD_TOAST: "ADD_TOAST",
  UPDATE_TOAST: "UPDATE_TOAST",
  DISMISS_TOAST: "DISMISS_TOAST",
  REMOVE_TOAST: "REMOVE_TOAST",
} as const

let count = 0

function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER
  return count.toString()
}

type ActionType = typeof actionTypes

type Action =
  | {
    type: ActionType["ADD_TOAST"]
    toast: ToasterToast
  }
  | {
    type: ActionType["UPDATE_TOAST"]
    toast: Partial<ToasterToast>
  }
  | {
    type: ActionType["DISMISS_TOAST"]
    toastId?: ToasterToast["id"]
  }
  | {
    type: ActionType["REMOVE_TOAST"]
    toastId?: ToasterToast["id"]
  }

interface State {
  toasts: ToasterToast[]
}

const toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()

const addToRemoveQueue = (toastId: string) => {
  if (toastTimeouts.has(toastId)) {
    return
  }

  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId)
    dispatch({
      type: "REMOVE_TOAST",
      toastId: toastId,
    })
  }, TOAST_REMOVE_DELAY)

  toastTimeouts.set(toastId, timeout)
}

export const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case "ADD_TOAST":
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      }

    case "UPDATE_TOAST":
      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === action.toast.id ? { ...t, ...action.toast } : t
        ),
      }

    case "DISMISS_TOAST": {
      const { toastId } = action

      // ! Side effects ! - This could be extracted into a dismissToast() action,
      // but I'll keep it here for simplicity
      if (toastId) {
        addToRemoveQueue(toastId)
      } else {
        state.toasts.forEach((toast) => {
          addToRemoveQueue(toast.id)
        })
      }

      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === toastId || toastId === undefined
            ? {
              ...t,
              open: false,
            }
            : t
        ),
      }
    }
    case "REMOVE_TOAST":
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        }
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) => t.id !== action.toastId),
      }
  }
}

const listeners: Array<(state: State) => void> = []

let memoryState: State = { toasts: [] }

function dispatch(action: Action) {
  memoryState = reducer(memoryState, action)
  listeners.forEach((listener) => {
    listener(memoryState)
  })
}

type Toast = Omit<ToasterToast, "id">

function toast({ ...props }: Toast) {
  const id = genId()

  const update = (props: ToasterToast) =>
    dispatch({
      type: "UPDATE_TOAST",
      toast: { ...props, id },
    })
  const dismiss = () => dispatch({ type: "DISMISS_TOAST", toastId: id })

  dispatch({
    type: "ADD_TOAST",
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss()
      },
    },
  })

  return {
    id: id,
    dismiss,
    update,
  }
}

function useToast() {
  const [state, setState] = React.useState<State>(memoryState)

  React.useEffect(() => {
    listeners.push(setState)
    return () => {
      const index = listeners.indexOf(setState)
      if (index > -1) {
        listeners.splice(index, 1)
      }
    }
  }, [state])

  return {
    ...state,
    toast,
    dismiss: (toastId?: string) => dispatch({ type: "DISMISS_TOAST", toastId }),
  }
}

export { useToast, toast }


==========================================
FILE: src\lib\ai-director\director.ts
==========================================
import { db } from '@/lib/db';
import ZAI from 'z-ai-web-dev-sdk';
import type { Character, Content, Analytics, Trend, DirectorControl } from '@prisma/client';

interface GenerationPlan {
  character_id: string;
  content_type: 'image' | 'video';
  aesthetic: 'cinematic' | 'influencer';
  prompt: string;
  priority: number;
  reasoning: string;
  trend_keywords: string[];
  optimal_posting_time: Date;
  estimated_performance: number;
}

interface CharacterPerformance {
  character: Character;
  performance_score: number;
  content_count: number;
  avg_engagement: number;
  best_aesthetic: string;
  trend_alignment: number;
}

interface TrendAnalysis {
  trend: Trend;
  relevance_score: number;
  character_match: string[];
  suggested_prompts: string[];
}

class AIDirector {
  private zai: ZAI;
  private lastAnalysis: Date | null = null;
  private analysisInterval = 2 * 60 * 60 * 1000; // 2 hours

  constructor() {
    this.zai = new ZAI();
  }

  // Main AI Director decision engine
  async generateOptimalPlan(): Promise<GenerationPlan[]> {
    try {
      console.log('🤖 AI Director: Starting analysis...');
      
      // Get current data
      const characters = await this.getTopPerformingCharacters();
      const trends = await this.getRelevantTrends();
      const analytics = await this.getRecentAnalytics();
      
      // Analyze performance patterns
      const performanceAnalysis = await this.analyzePerformancePatterns(characters, analytics);
      
      // Generate trend-based content plans
      const plans = await this.generateTrendBasedPlans(performanceAnalysis, trends);
      
      // Optimize posting schedule
      const optimizedPlans = await this.optimizePostingSchedule(plans);
      
      // Save analysis results
      await this.saveDirectorControl({
        characterRankings: performanceAnalysis.map(p => ({
          character_id: p.character.id,
          score: p.performance_score,
          reasoning: p.trend_alignment > 0.7 ? 'High trend alignment' : 'Steady performer'
        })),
        nextPlan: optimizedPlans,
        lastAnalysis: new Date()
      });

      console.log(`🤖 AI Director: Generated ${optimizedPlans.length} optimized plans`);
      return optimizedPlans;
      
    } catch (error) {
      console.error('🤖 AI Director Error:', error);
      return this.getFallbackPlan();
    }
  }

  // Get top performing characters
  private async getTopPerformingCharacters(): Promise<Character[]> {
    const characters = await db.character.findMany({
      where: { isActive: true },
      orderBy: { performanceScore: 'desc' },
      take: 6 // Focus on top 6 performers
    });

    return characters;
  }

  // Get relevant trends
  private async getRelevantTrends(): Promise<Trend[]> {
    const trends = await db.trend.findMany({
      where: { 
        isActive: true,
        expiresAt: { gte: new Date() }
      },
      orderBy: { popularity: 'desc' },
      take: 10
    });

    return trends;
  }

  // Get recent analytics
  private async getRecentAnalytics(): Promise<Analytics[]> {
    const sevenDaysAgo = new Date();
    sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);

    const analytics = await db.analytics.findMany({
      where: {
        createdAt: { gte: sevenDaysAgo }
      },
      include: {
        content: {
          include: {
            character: true
          }
        }
      }
    });

    return analytics;
  }

  // Analyze performance patterns using GLM-4.6
  private async analyzePerformancePatterns(
    characters: Character[], 
    analytics: Analytics[]
  ): Promise<CharacterPerformance[]> {
    const performance: CharacterPerformance[] = [];

    for (const character of characters) {
      const characterAnalytics = analytics.filter(
        a => a.content.characterId === character.id
      );

      if (characterAnalytics.length === 0) {
        performance.push({
          character,
          performance_score: character.performanceScore,
          content_count: 0,
          avg_engagement: 0,
          best_aesthetic: 'cinematic',
          trend_alignment: 0.5
        });
        continue;
      }

      const avgEngagement = characterAnalytics.reduce(
        (sum, a) => sum + a.engagementRate, 0
      ) / characterAnalytics.length;

      const aestheticPerformance = this.calculateAestheticPerformance(characterAnalytics);
      
      // Use GLM-4.6 to analyze trend alignment
      const trendAlignment = await this.analyzeTrendAlignment(character, characterAnalytics);

      performance.push({
        character,
        performance_score: character.performanceScore,
        content_count: characterAnalytics.length,
        avg_engagement: avgEngagement,
        best_aesthetic: aestheticPerformance.best,
        trend_alignment: trendAlignment
      });
    }

    return performance.sort((a, b) => b.performance_score - a.performance_score);
  }

  // Calculate aesthetic performance
  private calculateAestheticPerformance(analytics: Analytics[]): { best: string; scores: Record<string, number> } {
    const cinematicScores: number[] = [];
    const influencerScores: number[] = [];

    analytics.forEach(a => {
      if (a.content.aesthetic === 'cinematic') {
        cinematicScores.push(a.engagementRate);
      } else if (a.content.aesthetic === 'influencer') {
        influencerScores.push(a.engagementRate);
      }
    });

    const cinematicAvg = cinematicScores.length > 0 
      ? cinematicScores.reduce((a, b) => a + b, 0) / cinematicScores.length 
      : 0;
    
    const influencerAvg = influencerScores.length > 0 
      ? influencerScores.reduce((a, b) => a + b, 0) / influencerScores.length 
      : 0;

    return {
      best: cinematicAvg > influencerAvg ? 'cinematic' : 'influencer',
      scores: { cinematic: cinematicAvg, influencer: influencerAvg }
    };
  }

  // Analyze trend alignment using GLM-4.6
  private async analyzeTrendAlignment(character: Character, analytics: Analytics[]): Promise<number> {
    try {
      const recentContent = analytics.slice(-5); // Last 5 pieces of content
      
      const prompt = `
        Analyze this character's recent performance and calculate trend alignment (0-1):
        
        Character: ${character.code} (${character.ethnicity}, Age ${character.baseAge}, ${character.aestheticType})
        Recent Performance: ${recentContent.map(a => `${a.engagementRate}% engagement`).join(', ')}
        
        Consider:
        - Engagement trends
        - Content type performance
        - Aesthetic effectiveness
        - Virality potential
        
        Return only a number between 0 and 1 representing trend alignment.
      `;

      const completion = await this.zai.chat.completions.create({
        messages: [
          {
            role: 'system',
            content: 'You are an AI performance analyst specializing in social media content optimization.'
          },
          {
            role: 'user',
            content: prompt
          }
        ],
        max_tokens: 10,
        temperature: 0.3
      });

      const response = completion.choices[0]?.message?.content?.trim();
      const alignment = parseFloat(response) || 0.5;
      
      return Math.max(0, Math.min(1, alignment));
      
    } catch (error) {
      console.error('Trend alignment analysis failed:', error);
      return 0.5; // Default to neutral
    }
  }

  // Generate trend-based content plans
  private async generateTrendBasedPlans(
    performance: CharacterPerformance[], 
    trends: Trend[]
  ): Promise<GenerationPlan[]> {
    const plans: GenerationPlan[] = [];

    // Generate plans for top 3 performers
    for (let i = 0; i < Math.min(3, performance.length); i++) {
      const charPerf = performance[i];
      
      // Find best matching trends
      const matchingTrends = await this.findMatchingTrends(charPerf.character, trends);
      
      // Generate 2-3 plans per character
      const planCount = Math.min(3, matchingTrends.length);
      for (let j = 0; j < planCount; j++) {
        const trend = matchingTrends[j];
        const plan = await this.createContentPlan(charPerf, trend);
        plans.push(plan);
      }
    }

    return plans.sort((a, b) => b.priority - a.priority);
  }

  // Find trends that match character
  private async findMatchingTrends(character: Character, trends: Trend[]): Promise<TrendAnalysis[]> {
    const analyses: TrendAnalysis[] = [];

    for (const trend of trends) {
      const relevance = await this.calculateTrendRelevance(character, trend);
      
      if (relevance > 0.3) { // Only consider relevant trends
        analyses.push({
          trend,
          relevance_score: relevance,
          character_match: [character.id],
          suggested_prompts: await this.generateTrendPrompts(character, trend)
        });
      }
    }

    return analyses.sort((a, b) => b.relevance_score - a.relevance_score);
  }

  // Calculate trend relevance for character
  private async calculateTrendRelevance(character: Character, trend: Trend): Promise<number> {
    try {
      const prompt = `
        Calculate trend relevance (0-1) for this character and trend:
        
        Character: ${character.code} (${character.ethnicity}, Age ${character.baseAge}, ${character.aestheticType})
        Trend: ${trend.title} - ${trend.description}
        Trend Type: ${trend.type}
        Popularity: ${trend.popularity}
        
        Consider:
        - Demographic alignment
        - Aesthetic compatibility
        - Content type suitability
        - Cultural relevance
        
        Return only a number between 0 and 1.
      `;

      const completion = await this.zai.chat.completions.create({
        messages: [
          {
            role: 'system',
            content: 'You are an AI trend analyst specializing in content-creator matching.'
          },
          {
            role: 'user',
            content: prompt
          }
        ],
        max_tokens: 10,
        temperature: 0.3
      });

      const response = completion.choices[0]?.message?.content?.trim();
      const relevance = parseFloat(response) || 0;
      
      return Math.max(0, Math.min(1, relevance));
      
    } catch (error) {
      console.error('Trend relevance calculation failed:', error);
      return 0.3; // Default to low relevance
    }
  }

  // Generate trend-based prompts
  private async generateTrendPrompts(character: Character, trend: Trend): Promise<string[]> {
    try {
      const prompt = `
        Generate 3 specific content prompts for this character based on the trend:
        
        Character: ${character.code} (${character.ethnicity}, Age ${character.baseAge}, ${character.aestheticType})
        Trend: ${trend.title} - ${trend.description}
        
        Generate prompts that:
        - Match the character's aesthetic (${character.aestheticType})
        - Incorporate the trend naturally
        - Are optimized for TikTok/Instagram
        - Drive high engagement
        
        Return as a JSON array of strings.
      `;

      const completion = await this.zai.chat.completions.create({
        messages: [
          {
            role: 'system',
            content: 'You are a creative content strategist specializing in viral social media content.'
          },
          {
            role: 'user',
            content: prompt
          }
        ],
        max_tokens: 300,
        temperature: 0.7
      });

      const response = completion.choices[0]?.message?.content?.trim();
      
      try {
        return JSON.parse(response || '[]');
      } catch {
        // Fallback if JSON parsing fails
        return response?.split('\n').filter(Boolean).slice(0, 3) || [];
      }
      
    } catch (error) {
      console.error('Prompt generation failed:', error);
      return [`Create content featuring ${character.code} with ${trend.title} aesthetic`];
    }
  }

  // Create individual content plan
  private async createContentPlan(
    charPerf: CharacterPerformance, 
    trendAnalysis: TrendAnalysis
  ): Promise<GenerationPlan> {
    const prompt = trendAnalysis.suggested_prompts[0] || `Create ${trendAnalysis.trend.title} content`;
    
    return {
      character_id: charPerf.character.id,
      content_type: Math.random() > 0.3 ? 'video' : 'image', // 70% video, 30% image
      aesthetic: charPerf.best_aesthetic,
      prompt,
      priority: Math.round(trendAnalysis.relevance_score * 100),
      reasoning: `High relevance (${Math.round(trendAnalysis.relevance_score * 100)}%) to ${trendAnalysis.trend.title} trend`,
      trend_keywords: [trendAnalysis.trend.title, trendAnalysis.trend.type],
      optimal_posting_time: this.calculateOptimalPostingTime(charPerf.character),
      estimated_performance: Math.round(charPerf.performance_score * trendAnalysis.relevance_score)
    };
  }

  // Calculate optimal posting time
  private calculateOptimalPostingTime(character: Character): Date {
    const now = new Date();
    const optimalHour = this.getOptimalHourForCharacter(character);
    
    const postingTime = new Date(now);
    postingTime.setHours(optimalHour, 0, 0, 0);
    
    // If optimal time has passed today, schedule for tomorrow
    if (postingTime <= now) {
      postingTime.setDate(postingTime.getDate() + 1);
    }
    
    return postingTime;
  }

  // Get optimal posting hour for character
  private getOptimalHourForCharacter(character: Character): number {
    // Different demographics have different optimal posting times
    const baseHour = character.ethnicity === 'korean' ? 20 : 19; // Korean audience: 8 PM, others: 7 PM
    
    // Adjust based on age
    if (character.baseAge === 18) {
      return baseHour + 1; // Younger audience active later
    } else if (character.baseAge === 35) {
      return baseHour - 1; // Older audience active earlier
    }
    
    return baseHour;
  }

  // Optimize posting schedule
  private async optimizePostingSchedule(plans: GenerationPlan[]): Promise<GenerationPlan[]> {
    // Sort by priority and posting time
    const sorted = plans.sort((a, b) => {
      if (a.priority !== b.priority) {
        return b.priority - a.priority;
      }
      return a.optimal_posting_time.getTime() - b.optimal_posting_time.getTime();
    });

    // Spread out posts to avoid competition
    const optimized: GenerationPlan[] = [];
    const usedTimes = new Set<number>();

    for (const plan of sorted) {
      let postingTime = new Date(plan.optimal_posting_time);
      const hour = postingTime.getHours();
      
      // If this hour is already used, shift by 2 hours
      if (usedTimes.has(hour)) {
        postingTime.setHours(hour + 2);
      }
      
      usedTimes.add(postingTime.getHours());
      plan.optimal_posting_time = postingTime;
      optimized.push(plan);
    }

    return optimized;
  }

  // Save director control state
  private async saveDirectorControl(data: Partial<DirectorControl>): Promise<void> {
    await db.directorControl.upsert({
      where: { id: 'director-main' },
      update: data,
      create: {
        id: 'director-main',
        ...data
      }
    });
  }

  // Fallback plan if AI analysis fails
  private getFallbackPlan(): GenerationPlan[] {
    return [
      {
        character_id: 'ID_01_A',
        content_type: 'video',
        aesthetic: 'cinematic',
        prompt: 'Create cinematic luxury lifestyle content',
        priority: 80,
        reasoning: 'Fallback plan - top performer',
        trend_keywords: ['luxury', 'lifestyle'],
        optimal_posting_time: this.calculateOptimalPostingTime({ id: 'ID_01_A' } as Character),
        estimated_performance: 75
      }
    ];
  }

  // Check if analysis should run
  shouldRunAnalysis(): boolean {
    if (!this.lastAnalysis) {
      return true;
    }
    
    return Date.now() - this.lastAnalysis.getTime() > this.analysisInterval;
  }

  // Update last analysis time
  updateLastAnalysis(): void {
    this.lastAnalysis = new Date();
  }
}

export { AIDirector, type GenerationPlan, type CharacterPerformance, type TrendAnalysis };


==========================================
FILE: src\lib\auth.ts
==========================================
import { NextAuthOptions } from 'next-auth';
import CredentialsProvider from 'next-auth/providers/credentials';
import { db } from '@/lib/db';

export const authOptions: NextAuthOptions = {
  providers: [
    CredentialsProvider({
      name: 'credentials',
      credentials: {
        email: { label: 'Email', type: 'email' },
        password: { label: 'Password', type: 'password' }
      },
      async authorize(credentials) {
        if (!credentials?.email || !credentials?.password) {
          return null;
        }

        try {
          // Find user in database
          const user = await db.user.findUnique({
            where: { email: credentials.email }
          });

          if (!user) {
            return null;
          }

          // In a real app, you'd hash and compare passwords
          // For demo purposes, we'll accept any password for existing users
          return {
            id: user.id,
            email: user.email,
            name: user.name,
            role: user.role
          };
        } catch (error) {
          console.error('Auth error:', error);
          return null;
        }
      }
    })
  ],
  session: {
    strategy: 'jwt'
  },
  callbacks: {
    async jwt({ token, user }) {
      if (user) {
        token.id = user.id;
        token.email = user.email;
        token.name = user.name;
        token.role = user.role;
      }
      return token;
    },
    async session({ session, token }) {
      if (token) {
        session.user = {
          id: token.id as string,
          email: token.email as string,
          name: token.name as string,
          role: token.role as string
        };
      }
      return session;
    }
  },
  pages: {
    signIn: '/login',
    error: '/login'
  }
};

// Helper function for server-side session retrieval
export async function getServerSession() {
  try {
    const { getServerSession } = await import('next-auth/next');
    return getServerSession(authOptions);
  } catch (error) {
    console.error('Error getting server session:', error);
    return null;
  }
}


==========================================
FILE: src\lib\db.ts
==========================================
import { PrismaClient } from '@prisma/client'

const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined
}

export const db =
  globalForPrisma.prisma ??
  new PrismaClient({
    log: ['query'],
  })

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = db


==========================================
FILE: src\lib\elevenlabs\client.ts
==========================================
/**
 * ElevenLabs API Client Wrapper
 * Handles text-to-speech for voiceover generation
 */

export class ElevenLabsClient {
  private apiKey: string;
  private baseUrl: string = 'https://api.elevenlabs.io/v1';

  constructor(apiKey: string) {
    this.apiKey = apiKey;
  }

  private async makeRequest(endpoint: string, options: RequestInit = {}) {
    const url = `${this.baseUrl}${endpoint}`;
    
    const response = await fetch(url, {
      ...options,
      headers: {
        'Content-Type': 'application/json',
        'xi-api-key': this.apiKey,
        ...options.headers,
      },
    });

    if (!response.ok) {
      const error = await response.text();
      throw new Error(`ElevenLabs API Error: ${response.status} - ${error}`);
    }

    return response;
  }

  /**
   * Get available voices
   */
  async getVoices() {
    return this.makeRequest('/voices');
  }

  /**
   * Generate text-to-speech audio
   */
  async generateSpeech(params: {
    text: string;
    voiceId?: string;
    modelId?: string;
    voiceSettings?: {
      stability?: number;
      similarity_boost?: number;
      style?: number;
      use_speaker_boost?: boolean;
    };
    outputFormat?: 'mp3' | 'pcm';
  }) {
    const endpoint = `/text-to-speech/${params.voiceId || '21m00Tcm4T08D3Piu1'}`;
    
    const requestBody = {
      text: params.text,
      model_id: params.modelId || 'eleven_multilingual_v2',
      voice_settings: {
        stability: params.voiceSettings?.stability || 0.5,
        similarity_boost: params.voiceSettings?.similarity_boost || 0.5,
        style: params.voiceSettings?.style || 0.0,
        use_speaker_boost: params.voiceSettings?.use_speaker_boost || true,
        ...params.voiceSettings,
      },
    };

    const response = await this.makeRequest(endpoint, {
      method: 'POST',
      body: JSON.stringify(requestBody),
    });

    // Return the audio blob
    return response.blob();
  }

  /**
   * Generate speech with predefined voice profiles for different character types
   */
  async generateCharacterSpeech(params: {
    text: string;
    characterType: 'korean' | 'japanese' | 'chinese';
    age: 'young' | 'adult' | 'mature';
    aesthetic: 'cinematic' | 'influencer';
  }) {
    // Select appropriate voice based on character profile
    const voiceMap = {
      korean: {
        young: '21m00Tcm4T08D3Piu1', // Young male
        adult: '29vD33k1N0K3dG6VkU', // Adult male
        mature: '2EiwWnXGFv4JZG0I7pO' // Mature male
      },
      japanese: {
        young: '21m00Tcm4T08D3Piu1',
        adult: '29vD33k1N0K3dG6VkU',
        mature: '2EiwWnXGFv4JZG0I7pO'
      },
      chinese: {
        young: '21m00Tcm4T08D3Piu1',
        adult: '29vD33k1N0K3dG6VkU',
        mature: '2EiwWnXGFv4JZG0I7pO'
      }
    };

    const voiceId = voiceMap[params.characterType]?.[params.age] || '21m00Tcm4T08D3Piu1';
    
    // Adjust voice settings based on aesthetic
    const voiceSettings = {
      stability: params.aesthetic === 'cinematic' ? 0.7 : 0.3,
      similarity_boost: params.aesthetic === 'cinematic' ? 0.8 : 0.6,
      style: params.aesthetic === 'influencer' ? 0.3 : 0.1,
      use_speaker_boost: true,
    };

    return this.generateSpeech({
      text: params.text,
      voiceId,
      voiceSettings,
    });
  }

  /**
   * Get usage information
   */
  async getUsage() {
    return this.makeRequest('/usage');
  }

  /**
   * Get user information
   */
  async getUserInfo() {
    return this.makeRequest('/user');
  }
}

// Singleton instance for the application
let elevenLabsClient: ElevenLabsClient | null = null;

export function getElevenLabsClient(): ElevenLabsClient {
  if (!elevenLabsClient) {
    const apiKey = process.env.ELEVENLABS_API_KEY;
    if (!apiKey) {
      throw new Error('ELEVENLABS_API_KEY environment variable is not set');
    }
    elevenLabsClient = new ElevenLabsClient(apiKey);
  }
  return elevenLabsClient;
}


==========================================
FILE: src\lib\scheduler\automated-scheduler.ts
==========================================
// NOTE: This runs on a server only.
import { db } from "@/lib/db"

let schedulerStarted = false

export function startScheduler() {
  if (schedulerStarted) return
  schedulerStarted = true

  console.log("[Scheduler] Starting automated scheduler...")

  setInterval(async () => {
    try {
      const nowISO = new Date().toISOString().split("T")[0]

      const dueItems = await db.schedule.findMany({
        where: {
          date: nowISO,
          status: "scheduled"
        }
      })

      if (dueItems.length === 0) return

      for (const item of dueItems) {
        console.log("[Scheduler] Processing scheduled item:", item.id)

        try {
          // PLACEHOLDER FOR REAL TIKTOK POSTING
          // In Phase 4 we replace this with actual TikTok API calls
          console.log(`[Scheduler] Posting "${item.title}" to TikTok...`)

          await db.schedule.update({
            where: { id: item.id },
            data: { status: "posted" }
          })

          console.log("[Scheduler] Schedule update:", {
            id: item.id,
            status: "posted"
          })

        } catch (err) {
          console.error("[Scheduler] Failed to post:", err)

          await db.schedule.update({
            where: { id: item.id },
            data: { status: "failed" }
          })

          console.log("[Scheduler] Schedule update:", {
            id: item.id,
            status: "failed"
          })
        }
      }
    } catch (err) {
      console.error("[Scheduler] Error running scheduler loop:", err)
    }
  }, 60_000) // every 60 seconds
}


==========================================
FILE: src\lib\tiktok\client.ts
==========================================
import { db } from "@/lib/db"

// TikTok API client
export class TikTokClient {
  private accessToken: string | null = null
  private refreshToken: string | null = null

  constructor() {
    this.accessToken = null
    this.refreshToken = null
  }

  // Set access token from OAuth callback
  setTokens(accessToken: string, refreshToken: string) {
    this.accessToken = accessToken
    this.refreshToken = refreshToken
  }

  getAccessToken() {
    return this.accessToken
  }

  getRefreshToken() {
    return this.refreshToken
  }

  hasValidTokens() {
    return !!(this.accessToken && this.refreshToken)
  }

  // Refresh access token
  async refreshAccessToken() {
    if (!this.refreshToken) {
      throw new Error('No refresh token available')
    }

    try {
      const response = await fetch('https://open-api.tiktok.com/v2/oauth/refresh_token/', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/x-www-form-urlencoded',
          'Authorization': `Bearer ${this.accessToken}`
        },
        body: `grant_type=refresh_token&refresh_token=${this.refreshToken}`
      })

      const data = await response.json()

      if (data.access_token) {
        this.accessToken = data.access_token
        this.refreshToken = data.refresh_token
        return true
      }
    } catch (error) {
      console.error('Failed to refresh access token:', error)
      return false
    }
  }

  // Upload video to TikTok
  async uploadVideo(videoBuffer: Buffer, title: string): Promise<string> {
    if (!this.hasValidTokens()) {
      throw new Error('No valid TikTok tokens available')
    }

    const initUploadResponse = await fetch('https://open-api.tiktok.com/v2/video/upload/', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.accessToken}`,
        'Content-Type': 'application/octet-stream'
      },
      body: videoBuffer
    })

    const initUploadData = await initUploadResponse.json()

    if (initUploadData.data?.upload_url) {
      // Upload video data to the provided URL
      const uploadResponse = await fetch(initUploadData.data.upload_url, {
        method: 'PUT',
        headers: {
          'Authorization': `Bearer ${this.accessToken}`,
          'Content-Type': 'application/octet-stream'
        },
        body: videoBuffer
      })

      const uploadData = await uploadResponse.json()

      if (uploadData.data.video_id) {
        return uploadData.data.video_id
      }
    }

    throw new Error('Video upload failed')
  }

  // Create video post with caption
  async createVideoPost(videoId: string, title: string, description: string): Promise<string> {
    if (!this.hasValidTokens()) {
      throw new Error('No valid TikTok tokens available')
    }

    const postData = {
      access_token: this.accessToken,
      video_id: videoId,
      title: title,
      description: description
    }

    const response = await fetch('https://open-api.tiktok.com/v2/video/create/', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.accessToken}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(postData)
    })

    const data = await response.json()

    if (data.data?.video_id) {
      return data.data.video_id
    }

    throw new Error('Video post failed')
  }

  // Get video analytics
  async getVideoAnalytics(videoId: string): Promise<any> {
    if (!this.hasValidTokens()) {
      throw new Error('No valid TikTok tokens available')
    }

    const response = await fetch(`https://open-api.tiktok.com/v2/video/insights/?video_id=${videoId}`, {
      headers: {
        'Authorization': `Bearer ${this.accessToken}`
      }
    })

    return response.json()
  }

  // Update schedule status in database
  async updateScheduleStatus(videoId: string, status: string): Promise<void> {
    try {
      await db.schedule.update({
        where: { id: videoId },
        data: { status }
      })

      console.log("Schedule update:", {
        id: videoId,
        status
      })
    } catch (error) {
      console.error("Failed to update schedule status:", error)
    }
  }
}


==========================================
FILE: src\lib\utils.ts
==========================================
import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}



==========================================
FILE: src\lib\z-ai\client.ts
==========================================
/**
 * Z.ai API Client Wrapper
 * Handles all interactions with Z.ai models:
 * - CogView-4 (Image Generation)
 * - Vidu-Q1 (Video Generation) 
 * - GLM-4.6 (LLM, Director AI)
 */

export class ZAIClient {
  private apiKey: string;
  private baseUrl: string = 'https://api.z.ai/v1';

  constructor(apiKey: string) {
    this.apiKey = apiKey;
  }

  private async makeRequest(endpoint: string, options: RequestInit = {}) {
    const url = `${this.baseUrl}${endpoint}`;
    
    const response = await fetch(url, {
      ...options,
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${this.apiKey}`,
        ...options.headers,
      },
    });

    if (!response.ok) {
      const error = await response.text();
      throw new Error(`Z.ai API Error: ${response.status} - ${error}`);
    }

    return response.json();
  }

  /**
   * Generate images using CogView-4
   */
  async generateImage(params: {
    prompt: string;
    size?: string;
    style?: string;
    num_images?: number;
  }) {
    return this.makeRequest('/image/cogview-4', {
      method: 'POST',
      body: JSON.stringify({
        prompt: params.prompt,
        size: params.size || '1024x1024',
        style: params.style || 'photorealistic',
        num_images: params.num_images || 1,
      }),
    });
  }

  /**
   * Generate videos using Vidu-Q1
   */
  async generateVideo(params: {
    prompt: string;
    duration?: number;
    resolution?: string;
    consistency_anchor?: string;
  }) {
    return this.makeRequest('/video/vidu-q1', {
      method: 'POST',
      body: JSON.stringify({
        prompt: params.prompt,
        duration: params.duration || 5,
        resolution: params.resolution || '1920x1080',
        consistency_anchor: params.consistency_anchor,
      }),
    });
  }

  /**
   * Chat completions using GLM-4.6
   * Used for Director AI, planning, and analysis
   */
  async chatCompletion(params: {
    messages: Array<{
      role: 'system' | 'user' | 'assistant';
      content: string;
    }>;
    model?: string;
    temperature?: number;
    max_tokens?: number;
    response_format?: {
      type: 'json_object' | 'text';
    };
  }) {
    return this.makeRequest('/chat/completions', {
      method: 'POST',
      body: JSON.stringify({
        model: params.model || 'glm-4.6',
        messages: params.messages,
        temperature: params.temperature || 0.7,
        max_tokens: params.max_tokens || 2000,
        response_format: params.response_format || { type: 'text' },
      }),
    });
  }

  /**
   * Generate structured content plan using GLM-4.6
   * Specifically for Director AI functionality
   */
  async generateContentPlan(params: {
    characterCode: string;
    characterData: {
      ethnicity: string;
      baseAge: number;
      variant: string;
      aestheticType: string;
    };
    product?: string;
    analytics?: any;
    trendData?: any;
  }) {
    const systemPrompt = `You are the Director AI for AI Creator Studio. 
You specialize in creating cinematic and influencer content for AI-generated characters.

Your task is to generate a comprehensive content plan that includes:
1. Scene description and setup
2. Lighting and camera directions
3. Pacing and timing
4. Hook lines for engagement
5. Video generation prompts
6. Image reference prompts
7. Voiceover scripts
8. Performance variations for A/B testing

Always respond with valid JSON that follows the specified structure.`;

    const userPrompt = `
Generate a content plan for the following:

Character: ${params.characterCode}
Ethnicity: ${params.characterData.ethnicity}
Age: ${params.characterData.baseAge}
Variant: ${params.characterData.variant}
Aesthetic: ${params.characterData.aestheticType}
${params.product ? `Product: ${params.product}` : ''}
${params.analytics ? `Performance History: ${JSON.stringify(params.analytics)}` : ''}
${params.trendData ? `Current Trends: ${JSON.stringify(params.trendData)}` : ''}

Create a plan optimized for ${params.characterData.aestheticType} content that appeals to ${params.characterData.ethnicity} male demographics aged ${params.characterData.baseAge}.

Return a JSON object with this exact structure:
{
  "scene": "detailed scene description",
  "lighting": "lighting setup description", 
  "cameraMotion": "camera movement description",
  "pacing": "pacing and timing description",
  "hookLine": "attention-grabbing opening line",
  "viduPrompt": "detailed prompt for video generation",
  "cogviewPrompts": ["prompt1", "prompt2", "prompt3"],
  "voiceoverScript": "complete voiceover script",
  "variations": [
    {
      "title": "Variation 1",
      "description": "description of variation",
      "viduPrompt": "alternative video prompt",
      "targetMetric": "engagement"
    },
    {
      "title": "Variation 2",
      "description": "description of variation", 
      "viduPrompt": "alternative video prompt",
      "targetMetric": "retention"
    }
  ]
}`;

    return this.chatCompletion({
      messages: [
        { role: 'system', content: systemPrompt },
        { role: 'user', content: userPrompt }
      ],
      temperature: 0.7,
      max_tokens: 3000,
      response_format: { type: 'json_object' }
    });
  }

  /**
   * Analyze content performance and provide optimization suggestions
   */
  async analyzePerformance(params: {
    contentData: any;
    analytics: any;
    characterData: any;
  }) {
    const systemPrompt = `You are a content optimization AI for AI Creator Studio.
Analyze content performance and provide actionable insights for improvement.

Focus on:
1. Engagement patterns
2. Character performance
3. Content type effectiveness
4. Optimization recommendations
5. A/B testing insights

Always respond with valid JSON.`;

    const userPrompt = `
Analyze the following content performance:

Content Data: ${JSON.stringify(params.contentData)}
Analytics: ${JSON.stringify(params.analytics)}
Character Data: ${JSON.stringify(params.characterData)}

Provide analysis and recommendations in this JSON format:
{
  "performanceScore": 85.5,
  "strengths": ["strength1", "strength2"],
  "weaknesses": ["weakness1", "weakness2"],
  "recommendations": [
    {
      "category": "content",
      "action": "specific action to take",
      "impact": "high|medium|low",
      "description": "detailed explanation"
    }
  ],
  "nextOptimal": {
    "character": "ID_XX_X",
    "aesthetic": "cinematic|influencer",
    "content": "video|image",
    "timing": "optimal posting time"
  }
}`;

    return this.chatCompletion({
      messages: [
        { role: 'system', content: systemPrompt },
        { role: 'user', content: userPrompt }
      ],
      temperature: 0.5,
      max_tokens: 2000,
      response_format: { type: 'json_object' }
    });
  }
}

// Singleton instance for the application
let zaiClient: ZAIClient | null = null;

export function getZAIClient(): ZAIClient {
  if (!zaiClient) {
    const apiKey = process.env.ZAI_API_KEY;
    if (!apiKey) {
      throw new Error('ZAI_API_KEY environment variable is not set');
    }
    zaiClient = new ZAIClient(apiKey);
  }
  return zaiClient;
}

